{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.context_menu.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { getPublicElement } from \"../../core/element\";\nimport { noop } from \"../../core/utils/common\";\nimport { each } from \"../../core/utils/iterator\";\nimport modules from \"./ui.grid_core.modules\";\nimport ContextMenu from \"../context_menu\";\nvar CONTEXT_MENU = \"dx-context-menu\";\nvar viewName = {\n  columnHeadersView: \"header\",\n  rowsView: \"content\",\n  footerView: \"footer\",\n  headerPanel: \"headerPanel\"\n};\nvar VIEW_NAMES = [\"columnHeadersView\", \"rowsView\", \"footerView\", \"headerPanel\"];\nvar ContextMenuController = modules.ViewController.inherit({\n  init: function () {\n    this.createAction(\"onContextMenuPreparing\");\n  },\n  getContextMenuItems: function (dxEvent) {\n    if (!dxEvent) {\n      return false;\n    }\n\n    var that = this;\n    var $targetElement = $(dxEvent.target);\n    var $element;\n    var $targetRowElement;\n    var $targetCellElement;\n    var menuItems;\n    each(VIEW_NAMES, function () {\n      var view = that.getView(this);\n      $element = view && view.element();\n\n      if ($element && ($element.is($targetElement) || $element.find($targetElement).length)) {\n        var _rowOptions$cells;\n\n        $targetCellElement = $targetElement.closest(\".dx-row > td, .dx-row > tr\");\n        $targetRowElement = $targetCellElement.parent();\n        var rowIndex = view.getRowIndex($targetRowElement);\n        var columnIndex = $targetCellElement[0] && $targetCellElement[0].cellIndex;\n        var rowOptions = $targetRowElement.data(\"options\");\n        var options = {\n          event: dxEvent,\n          targetElement: getPublicElement($targetElement),\n          target: viewName[this],\n          rowIndex: rowIndex,\n          row: view._getRows()[rowIndex],\n          columnIndex: columnIndex,\n          column: null === rowOptions || void 0 === rowOptions ? void 0 : null === (_rowOptions$cells = rowOptions.cells) || void 0 === _rowOptions$cells ? void 0 : _rowOptions$cells[columnIndex].column\n        };\n        options.items = view.getContextMenuItems && view.getContextMenuItems(options);\n        that.executeAction(\"onContextMenuPreparing\", options);\n\n        that._contextMenuPrepared(options);\n\n        menuItems = options.items;\n\n        if (menuItems) {\n          return false;\n        }\n      }\n    });\n    return menuItems;\n  },\n  _contextMenuPrepared: noop\n});\nvar ContextMenuView = modules.View.inherit({\n  _renderCore: function () {\n    var that = this;\n    var $element = that.element().addClass(CONTEXT_MENU);\n    this.setAria(\"role\", \"presentation\", $element);\n\n    this._createComponent($element, ContextMenu, {\n      onPositioning: function (actionArgs) {\n        var event = actionArgs.event;\n        var contextMenuInstance = actionArgs.component;\n        var items = that.getController(\"contextMenu\").getContextMenuItems(event);\n\n        if (items) {\n          contextMenuInstance.option(\"items\", items);\n          event.stopPropagation();\n        } else {\n          actionArgs.cancel = true;\n        }\n      },\n      onItemClick: function (params) {\n        params.itemData.onItemClick && params.itemData.onItemClick(params);\n      },\n      cssClass: that.getWidgetContainerClass(),\n      target: that.component.$element()\n    });\n  }\n});\nexport var contextMenuModule = {\n  defaultOptions: function () {\n    return {\n      onContextMenuPreparing: null\n    };\n  },\n  controllers: {\n    contextMenu: ContextMenuController\n  },\n  views: {\n    contextMenuView: ContextMenuView\n  }\n};","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/ui/grid_core/ui.grid_core.context_menu.js"],"names":["$","getPublicElement","noop","each","modules","ContextMenu","CONTEXT_MENU","viewName","columnHeadersView","rowsView","footerView","headerPanel","VIEW_NAMES","ContextMenuController","ViewController","inherit","init","createAction","getContextMenuItems","dxEvent","that","$targetElement","target","$element","$targetRowElement","$targetCellElement","menuItems","view","getView","element","is","find","length","_rowOptions$cells","closest","parent","rowIndex","getRowIndex","columnIndex","cellIndex","rowOptions","data","options","event","targetElement","row","_getRows","column","cells","items","executeAction","_contextMenuPrepared","ContextMenuView","View","_renderCore","addClass","setAria","_createComponent","onPositioning","actionArgs","contextMenuInstance","component","getController","option","stopPropagation","cancel","onItemClick","params","itemData","cssClass","getWidgetContainerClass","contextMenuModule","defaultOptions","onContextMenuPreparing","controllers","contextMenu","views","contextMenuView"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.context_menu.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport modules from \"./ui.grid_core.modules\";\r\nimport ContextMenu from \"../context_menu\";\r\nvar CONTEXT_MENU = \"dx-context-menu\";\r\nvar viewName = {\r\n    columnHeadersView: \"header\",\r\n    rowsView: \"content\",\r\n    footerView: \"footer\",\r\n    headerPanel: \"headerPanel\"\r\n};\r\nvar VIEW_NAMES = [\"columnHeadersView\", \"rowsView\", \"footerView\", \"headerPanel\"];\r\nvar ContextMenuController = modules.ViewController.inherit({\r\n    init: function() {\r\n        this.createAction(\"onContextMenuPreparing\")\r\n    },\r\n    getContextMenuItems: function(dxEvent) {\r\n        if (!dxEvent) {\r\n            return false\r\n        }\r\n        var that = this;\r\n        var $targetElement = $(dxEvent.target);\r\n        var $element;\r\n        var $targetRowElement;\r\n        var $targetCellElement;\r\n        var menuItems;\r\n        each(VIEW_NAMES, (function() {\r\n            var view = that.getView(this);\r\n            $element = view && view.element();\r\n            if ($element && ($element.is($targetElement) || $element.find($targetElement).length)) {\r\n                var _rowOptions$cells;\r\n                $targetCellElement = $targetElement.closest(\".dx-row > td, .dx-row > tr\");\r\n                $targetRowElement = $targetCellElement.parent();\r\n                var rowIndex = view.getRowIndex($targetRowElement);\r\n                var columnIndex = $targetCellElement[0] && $targetCellElement[0].cellIndex;\r\n                var rowOptions = $targetRowElement.data(\"options\");\r\n                var options = {\r\n                    event: dxEvent,\r\n                    targetElement: getPublicElement($targetElement),\r\n                    target: viewName[this],\r\n                    rowIndex: rowIndex,\r\n                    row: view._getRows()[rowIndex],\r\n                    columnIndex: columnIndex,\r\n                    column: null === rowOptions || void 0 === rowOptions ? void 0 : null === (_rowOptions$cells = rowOptions.cells) || void 0 === _rowOptions$cells ? void 0 : _rowOptions$cells[columnIndex].column\r\n                };\r\n                options.items = view.getContextMenuItems && view.getContextMenuItems(options);\r\n                that.executeAction(\"onContextMenuPreparing\", options);\r\n                that._contextMenuPrepared(options);\r\n                menuItems = options.items;\r\n                if (menuItems) {\r\n                    return false\r\n                }\r\n            }\r\n        }));\r\n        return menuItems\r\n    },\r\n    _contextMenuPrepared: noop\r\n});\r\nvar ContextMenuView = modules.View.inherit({\r\n    _renderCore: function() {\r\n        var that = this;\r\n        var $element = that.element().addClass(CONTEXT_MENU);\r\n        this.setAria(\"role\", \"presentation\", $element);\r\n        this._createComponent($element, ContextMenu, {\r\n            onPositioning: function(actionArgs) {\r\n                var event = actionArgs.event;\r\n                var contextMenuInstance = actionArgs.component;\r\n                var items = that.getController(\"contextMenu\").getContextMenuItems(event);\r\n                if (items) {\r\n                    contextMenuInstance.option(\"items\", items);\r\n                    event.stopPropagation()\r\n                } else {\r\n                    actionArgs.cancel = true\r\n                }\r\n            },\r\n            onItemClick: function(params) {\r\n                params.itemData.onItemClick && params.itemData.onItemClick(params)\r\n            },\r\n            cssClass: that.getWidgetContainerClass(),\r\n            target: that.component.$element()\r\n        })\r\n    }\r\n});\r\nexport var contextMenuModule = {\r\n    defaultOptions: function() {\r\n        return {\r\n            onContextMenuPreparing: null\r\n        }\r\n    },\r\n    controllers: {\r\n        contextMenu: ContextMenuController\r\n    },\r\n    views: {\r\n        contextMenuView: ContextMenuView\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}