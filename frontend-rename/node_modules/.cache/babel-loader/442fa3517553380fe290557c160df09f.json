{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/toolbar.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getWidth, getOuterWidth } from \"../core/utils/size\";\nimport $ from \"../core/renderer\";\nimport registerComponent from \"../core/component_registrator\";\nimport { grep, deferRender } from \"../core/utils/common\";\nimport { extend } from \"../core/utils/extend\";\nimport { merge } from \"../core/utils/array\";\nimport { each } from \"../core/utils/iterator\";\nimport ActionSheetStrategy from \"./toolbar/ui.toolbar.strategy.action_sheet\";\nimport DropDownMenuStrategy from \"./toolbar/ui.toolbar.strategy.drop_down_menu\";\nimport ToolbarBase from \"./toolbar/ui.toolbar.base\";\nimport { ChildDefaultTemplate } from \"../core/templates/child_default_template\";\nvar STRATEGIES = {\n  actionSheet: ActionSheetStrategy,\n  dropDownMenu: DropDownMenuStrategy\n};\nvar TOOLBAR_AUTO_HIDE_ITEM_CLASS = \"dx-toolbar-item-auto-hide\";\nvar TOOLBAR_AUTO_HIDE_TEXT_CLASS = \"dx-toolbar-text-auto-hide\";\nvar TOOLBAR_HIDDEN_ITEM = \"dx-toolbar-item-invisible\";\nvar Toolbar = ToolbarBase.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      menuItemTemplate: \"menuItem\",\n      submenuType: \"dropDownMenu\",\n      menuContainer: void 0,\n      overflowMenuVisible: false\n    });\n  },\n  _dimensionChanged: function (dimension) {\n    if (\"height\" === dimension) {\n      return;\n    }\n\n    this.callBase();\n\n    this._menuStrategy.renderMenuItems();\n  },\n  _initTemplates: function () {\n    this.callBase();\n\n    this._templateManager.addDefaultTemplates({\n      actionSheetItem: new ChildDefaultTemplate(\"item\")\n    });\n  },\n  _initMarkup: function () {\n    this.callBase();\n\n    this._renderMenu();\n  },\n  _postProcessRenderItems: function () {\n    this._hideOverflowItems();\n\n    this._menuStrategy._updateMenuVisibility();\n\n    this.callBase();\n    deferRender(() => {\n      this._menuStrategy.renderMenuItems();\n    });\n  },\n  _renderItem: function (index, item, itemContainer, $after) {\n    var itemElement = this.callBase(index, item, itemContainer, $after);\n\n    if (\"auto\" === item.locateInMenu) {\n      itemElement.addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n    }\n\n    if (\"dxButton\" === item.widget && \"inMenu\" === item.showText) {\n      itemElement.toggleClass(TOOLBAR_AUTO_HIDE_TEXT_CLASS);\n    }\n\n    return itemElement;\n  },\n  _getItemsWidth: function () {\n    return this._getSummaryItemsWidth([this._$beforeSection, this._$centerSection, this._$afterSection]);\n  },\n  _hideOverflowItems: function (elementWidth) {\n    var overflowItems = this.$element().find(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n\n    if (!overflowItems.length) {\n      return;\n    }\n\n    elementWidth = elementWidth || getWidth(this.$element());\n    $(overflowItems).removeClass(TOOLBAR_HIDDEN_ITEM);\n\n    var itemsWidth = this._getItemsWidth();\n\n    while (overflowItems.length && elementWidth < itemsWidth) {\n      var $item = overflowItems.eq(-1);\n      itemsWidth -= getOuterWidth($item);\n      $item.addClass(TOOLBAR_HIDDEN_ITEM);\n      overflowItems.splice(-1, 1);\n    }\n  },\n  _getMenuItems: function () {\n    var that = this;\n    var menuItems = grep(this.option(\"items\") || [], function (item) {\n      return that._isMenuItem(item);\n    });\n\n    var $hiddenItems = this._itemContainer().children(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS + \".\" + TOOLBAR_HIDDEN_ITEM).not(\".dx-state-invisible\");\n\n    this._restoreItems = this._restoreItems || [];\n    var overflowItems = [].slice.call($hiddenItems).map(item => {\n      var itemData = that._getItemData(item);\n\n      var $itemContainer = $(item).children();\n      var $itemMarkup = $itemContainer.children();\n      return extend({\n        menuItemTemplate: function () {\n          that._restoreItems.push({\n            container: $itemContainer,\n            item: $itemMarkup\n          });\n\n          var $container = $(\"<div>\").addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n          return $container.append($itemMarkup);\n        }\n      }, itemData);\n    });\n    return merge(overflowItems, menuItems);\n  },\n  _getToolbarItems: function () {\n    var that = this;\n    return grep(this.option(\"items\") || [], function (item) {\n      return !that._isMenuItem(item);\n    });\n  },\n  _renderMenu: function () {\n    this._renderMenuStrategy();\n\n    deferRender(() => {\n      this._menuStrategy.render();\n    });\n  },\n  _renderMenuStrategy: function () {\n    var strategyName = this.option(\"submenuType\");\n\n    if (this._requireDropDownStrategy()) {\n      strategyName = \"dropDownMenu\";\n    }\n\n    var strategy = STRATEGIES[strategyName];\n\n    if (!(this._menuStrategy && this._menuStrategy.NAME === strategyName)) {\n      this._menuStrategy = new strategy(this);\n    }\n  },\n  _requireDropDownStrategy: function () {\n    var items = this.option(\"items\") || [];\n    var result = false;\n    each(items, function (index, item) {\n      if (\"auto\" === item.locateInMenu) {\n        result = true;\n      } else if (\"always\" === item.locateInMenu && item.widget) {\n        result = true;\n      }\n    });\n    return result;\n  },\n  _arrangeItems: function () {\n    if (this.$element().is(\":hidden\")) {\n      return;\n    }\n\n    this._$centerSection.css({\n      margin: \"0 auto\",\n      float: \"none\"\n    });\n\n    each(this._restoreItems || [], function (_, obj) {\n      $(obj.container).append(obj.item);\n    });\n    this._restoreItems = [];\n    var elementWidth = getWidth(this.$element());\n\n    this._hideOverflowItems(elementWidth);\n\n    this.callBase(elementWidth);\n  },\n  _itemOptionChanged: function (item, property, value) {\n    if (this._isMenuItem(item)) {\n      this._menuStrategy.renderMenuItems();\n    } else if (this._isToolbarItem(item)) {\n      this.callBase(item, property, value);\n    } else {\n      this.callBase(item, property, value);\n\n      this._menuStrategy.renderMenuItems();\n    }\n\n    if (\"location\" === property) {\n      this.repaint();\n    }\n  },\n  _isMenuItem: function (itemData) {\n    return \"menu\" === itemData.location || \"always\" === itemData.locateInMenu;\n  },\n  _isToolbarItem: function (itemData) {\n    return void 0 === itemData.location || \"never\" === itemData.locateInMenu;\n  },\n  _optionChanged: function (args) {\n    var {\n      name: name,\n      value: value\n    } = args;\n\n    switch (name) {\n      case \"submenuType\":\n        this._invalidate();\n\n        break;\n\n      case \"menuItemTemplate\":\n        this._changeMenuOption(\"itemTemplate\", this._getTemplate(value));\n\n        break;\n\n      case \"onItemClick\":\n        this._changeMenuOption(name, value);\n\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"menuContainer\":\n        this._changeMenuOption(\"container\", value);\n\n        break;\n\n      case \"overflowMenuVisible\":\n        this._changeMenuOption(\"dropDownMenu\" === this._menuStrategy.NAME ? \"opened\" : \"visible\", value);\n\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  _changeMenuOption: function (name, value) {\n    this._menuStrategy.widgetOption(name, value);\n  }\n});\nregisterComponent(\"dxToolbar\", Toolbar);\nexport default Toolbar;","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/ui/toolbar.js"],"names":["getWidth","getOuterWidth","$","registerComponent","grep","deferRender","extend","merge","each","ActionSheetStrategy","DropDownMenuStrategy","ToolbarBase","ChildDefaultTemplate","STRATEGIES","actionSheet","dropDownMenu","TOOLBAR_AUTO_HIDE_ITEM_CLASS","TOOLBAR_AUTO_HIDE_TEXT_CLASS","TOOLBAR_HIDDEN_ITEM","Toolbar","inherit","_getDefaultOptions","callBase","menuItemTemplate","submenuType","menuContainer","overflowMenuVisible","_dimensionChanged","dimension","_menuStrategy","renderMenuItems","_initTemplates","_templateManager","addDefaultTemplates","actionSheetItem","_initMarkup","_renderMenu","_postProcessRenderItems","_hideOverflowItems","_updateMenuVisibility","_renderItem","index","item","itemContainer","$after","itemElement","locateInMenu","addClass","widget","showText","toggleClass","_getItemsWidth","_getSummaryItemsWidth","_$beforeSection","_$centerSection","_$afterSection","elementWidth","overflowItems","$element","find","length","removeClass","itemsWidth","$item","eq","splice","_getMenuItems","that","menuItems","option","_isMenuItem","$hiddenItems","_itemContainer","children","not","_restoreItems","slice","call","map","itemData","_getItemData","$itemContainer","$itemMarkup","push","container","$container","append","_getToolbarItems","_renderMenuStrategy","render","strategyName","_requireDropDownStrategy","strategy","NAME","items","result","_arrangeItems","is","css","margin","float","_","obj","_itemOptionChanged","property","value","_isToolbarItem","repaint","location","_optionChanged","args","name","_invalidate","_changeMenuOption","_getTemplate","apply","arguments","widgetOption"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/toolbar.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getWidth,\r\n    getOuterWidth\r\n} from \"../core/utils/size\";\r\nimport $ from \"../core/renderer\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport {\r\n    grep,\r\n    deferRender\r\n} from \"../core/utils/common\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    merge\r\n} from \"../core/utils/array\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport ActionSheetStrategy from \"./toolbar/ui.toolbar.strategy.action_sheet\";\r\nimport DropDownMenuStrategy from \"./toolbar/ui.toolbar.strategy.drop_down_menu\";\r\nimport ToolbarBase from \"./toolbar/ui.toolbar.base\";\r\nimport {\r\n    ChildDefaultTemplate\r\n} from \"../core/templates/child_default_template\";\r\nvar STRATEGIES = {\r\n    actionSheet: ActionSheetStrategy,\r\n    dropDownMenu: DropDownMenuStrategy\r\n};\r\nvar TOOLBAR_AUTO_HIDE_ITEM_CLASS = \"dx-toolbar-item-auto-hide\";\r\nvar TOOLBAR_AUTO_HIDE_TEXT_CLASS = \"dx-toolbar-text-auto-hide\";\r\nvar TOOLBAR_HIDDEN_ITEM = \"dx-toolbar-item-invisible\";\r\nvar Toolbar = ToolbarBase.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            menuItemTemplate: \"menuItem\",\r\n            submenuType: \"dropDownMenu\",\r\n            menuContainer: void 0,\r\n            overflowMenuVisible: false\r\n        })\r\n    },\r\n    _dimensionChanged: function(dimension) {\r\n        if (\"height\" === dimension) {\r\n            return\r\n        }\r\n        this.callBase();\r\n        this._menuStrategy.renderMenuItems()\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._templateManager.addDefaultTemplates({\r\n            actionSheetItem: new ChildDefaultTemplate(\"item\")\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._renderMenu()\r\n    },\r\n    _postProcessRenderItems: function() {\r\n        this._hideOverflowItems();\r\n        this._menuStrategy._updateMenuVisibility();\r\n        this.callBase();\r\n        deferRender(() => {\r\n            this._menuStrategy.renderMenuItems()\r\n        })\r\n    },\r\n    _renderItem: function(index, item, itemContainer, $after) {\r\n        var itemElement = this.callBase(index, item, itemContainer, $after);\r\n        if (\"auto\" === item.locateInMenu) {\r\n            itemElement.addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS)\r\n        }\r\n        if (\"dxButton\" === item.widget && \"inMenu\" === item.showText) {\r\n            itemElement.toggleClass(TOOLBAR_AUTO_HIDE_TEXT_CLASS)\r\n        }\r\n        return itemElement\r\n    },\r\n    _getItemsWidth: function() {\r\n        return this._getSummaryItemsWidth([this._$beforeSection, this._$centerSection, this._$afterSection])\r\n    },\r\n    _hideOverflowItems: function(elementWidth) {\r\n        var overflowItems = this.$element().find(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS);\r\n        if (!overflowItems.length) {\r\n            return\r\n        }\r\n        elementWidth = elementWidth || getWidth(this.$element());\r\n        $(overflowItems).removeClass(TOOLBAR_HIDDEN_ITEM);\r\n        var itemsWidth = this._getItemsWidth();\r\n        while (overflowItems.length && elementWidth < itemsWidth) {\r\n            var $item = overflowItems.eq(-1);\r\n            itemsWidth -= getOuterWidth($item);\r\n            $item.addClass(TOOLBAR_HIDDEN_ITEM);\r\n            overflowItems.splice(-1, 1)\r\n        }\r\n    },\r\n    _getMenuItems: function() {\r\n        var that = this;\r\n        var menuItems = grep(this.option(\"items\") || [], (function(item) {\r\n            return that._isMenuItem(item)\r\n        }));\r\n        var $hiddenItems = this._itemContainer().children(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS + \".\" + TOOLBAR_HIDDEN_ITEM).not(\".dx-state-invisible\");\r\n        this._restoreItems = this._restoreItems || [];\r\n        var overflowItems = [].slice.call($hiddenItems).map(item => {\r\n            var itemData = that._getItemData(item);\r\n            var $itemContainer = $(item).children();\r\n            var $itemMarkup = $itemContainer.children();\r\n            return extend({\r\n                menuItemTemplate: function() {\r\n                    that._restoreItems.push({\r\n                        container: $itemContainer,\r\n                        item: $itemMarkup\r\n                    });\r\n                    var $container = $(\"<div>\").addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\r\n                    return $container.append($itemMarkup)\r\n                }\r\n            }, itemData)\r\n        });\r\n        return merge(overflowItems, menuItems)\r\n    },\r\n    _getToolbarItems: function() {\r\n        var that = this;\r\n        return grep(this.option(\"items\") || [], (function(item) {\r\n            return !that._isMenuItem(item)\r\n        }))\r\n    },\r\n    _renderMenu: function() {\r\n        this._renderMenuStrategy();\r\n        deferRender(() => {\r\n            this._menuStrategy.render()\r\n        })\r\n    },\r\n    _renderMenuStrategy: function() {\r\n        var strategyName = this.option(\"submenuType\");\r\n        if (this._requireDropDownStrategy()) {\r\n            strategyName = \"dropDownMenu\"\r\n        }\r\n        var strategy = STRATEGIES[strategyName];\r\n        if (!(this._menuStrategy && this._menuStrategy.NAME === strategyName)) {\r\n            this._menuStrategy = new strategy(this)\r\n        }\r\n    },\r\n    _requireDropDownStrategy: function() {\r\n        var items = this.option(\"items\") || [];\r\n        var result = false;\r\n        each(items, (function(index, item) {\r\n            if (\"auto\" === item.locateInMenu) {\r\n                result = true\r\n            } else if (\"always\" === item.locateInMenu && item.widget) {\r\n                result = true\r\n            }\r\n        }));\r\n        return result\r\n    },\r\n    _arrangeItems: function() {\r\n        if (this.$element().is(\":hidden\")) {\r\n            return\r\n        }\r\n        this._$centerSection.css({\r\n            margin: \"0 auto\",\r\n            float: \"none\"\r\n        });\r\n        each(this._restoreItems || [], (function(_, obj) {\r\n            $(obj.container).append(obj.item)\r\n        }));\r\n        this._restoreItems = [];\r\n        var elementWidth = getWidth(this.$element());\r\n        this._hideOverflowItems(elementWidth);\r\n        this.callBase(elementWidth)\r\n    },\r\n    _itemOptionChanged: function(item, property, value) {\r\n        if (this._isMenuItem(item)) {\r\n            this._menuStrategy.renderMenuItems()\r\n        } else if (this._isToolbarItem(item)) {\r\n            this.callBase(item, property, value)\r\n        } else {\r\n            this.callBase(item, property, value);\r\n            this._menuStrategy.renderMenuItems()\r\n        }\r\n        if (\"location\" === property) {\r\n            this.repaint()\r\n        }\r\n    },\r\n    _isMenuItem: function(itemData) {\r\n        return \"menu\" === itemData.location || \"always\" === itemData.locateInMenu\r\n    },\r\n    _isToolbarItem: function(itemData) {\r\n        return void 0 === itemData.location || \"never\" === itemData.locateInMenu\r\n    },\r\n    _optionChanged: function(args) {\r\n        var {\r\n            name: name,\r\n            value: value\r\n        } = args;\r\n        switch (name) {\r\n            case \"submenuType\":\r\n                this._invalidate();\r\n                break;\r\n            case \"menuItemTemplate\":\r\n                this._changeMenuOption(\"itemTemplate\", this._getTemplate(value));\r\n                break;\r\n            case \"onItemClick\":\r\n                this._changeMenuOption(name, value);\r\n                this.callBase.apply(this, arguments);\r\n                break;\r\n            case \"menuContainer\":\r\n                this._changeMenuOption(\"container\", value);\r\n                break;\r\n            case \"overflowMenuVisible\":\r\n                this._changeMenuOption(\"dropDownMenu\" === this._menuStrategy.NAME ? \"opened\" : \"visible\", value);\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _changeMenuOption: function(name, value) {\r\n        this._menuStrategy.widgetOption(name, value)\r\n    }\r\n});\r\nregisterComponent(\"dxToolbar\", Toolbar);\r\nexport default Toolbar;\r\n"]},"metadata":{},"sourceType":"module"}