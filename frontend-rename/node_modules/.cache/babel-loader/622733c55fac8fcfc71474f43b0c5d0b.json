{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/form/components/field_item.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../../core/renderer\";\nimport eventsEngine from \"../../../events/core/events_engine\";\nimport { name as clickEventName } from \"../../../events/click\";\nimport { getPublicElement } from \"../../../core/element\";\nimport { captionize } from \"../../../core/utils/inflector\";\nimport { format } from \"../../../core/utils/string\";\nimport { isMaterial } from \"../../themes\";\nimport errors from \"../../widget/ui.errors\";\nimport Validator from \"../../validator\";\nimport { FIELD_ITEM_CONTENT_CLASS } from \"../constants\";\nexport var FLEX_LAYOUT_CLASS = \"dx-flex-layout\";\nexport var FIELD_ITEM_OPTIONAL_CLASS = \"dx-field-item-optional\";\nexport var FIELD_ITEM_REQUIRED_CLASS = \"dx-field-item-required\";\nexport var FIELD_ITEM_CONTENT_WRAPPER_CLASS = \"dx-field-item-content-wrapper\";\nexport var FIELD_ITEM_CONTENT_LOCATION_CLASS = \"dx-field-item-content-location-\";\nexport var FIELD_ITEM_LABEL_ALIGN_CLASS = \"dx-field-item-label-align\";\nexport var FIELD_ITEM_HELP_TEXT_CLASS = \"dx-field-item-help-text\";\nexport var LABEL_VERTICAL_ALIGNMENT_CLASS = \"dx-label-v-align\";\nexport var LABEL_HORIZONTAL_ALIGNMENT_CLASS = \"dx-label-h-align\";\nimport { renderLabel } from \"./label\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar INVALID_CLASS = \"dx-invalid\";\nexport function renderFieldItem(_ref) {\n  var {\n    $parent: $parent,\n    rootElementCssClassList: rootElementCssClassList,\n    parentComponent: parentComponent,\n    createComponentCallback: createComponentCallback,\n    useFlexLayout: useFlexLayout,\n    labelOptions: labelOptions,\n    labelNeedBaselineAlign: labelNeedBaselineAlign,\n    labelLocation: labelLocation,\n    needRenderLabel: needRenderLabel,\n    formLabelLocation: formLabelLocation,\n    item: item,\n    editorOptions: editorOptions,\n    isSimpleItem: isSimpleItem,\n    isRequired: isRequired,\n    template: template,\n    helpID: helpID,\n    labelID: labelID,\n    name: name,\n    helpText: helpText,\n    requiredMessageTemplate: requiredMessageTemplate,\n    validationGroup: validationGroup\n  } = _ref;\n  var $rootElement = $(\"<div>\").addClass(rootElementCssClassList.join(\" \")).appendTo($parent);\n  $rootElement.addClass(isRequired ? FIELD_ITEM_REQUIRED_CLASS : FIELD_ITEM_OPTIONAL_CLASS);\n\n  if (isSimpleItem && useFlexLayout) {\n    $rootElement.addClass(FLEX_LAYOUT_CLASS);\n  }\n\n  if (isSimpleItem && labelNeedBaselineAlign) {\n    $rootElement.addClass(FIELD_ITEM_LABEL_ALIGN_CLASS);\n  }\n\n  var $fieldEditorContainer = $(\"<div>\");\n  $fieldEditorContainer.data(\"dx-form-item\", item);\n  $fieldEditorContainer.addClass(FIELD_ITEM_CONTENT_CLASS).addClass(FIELD_ITEM_CONTENT_LOCATION_CLASS + {\n    right: \"left\",\n    left: \"right\",\n    top: \"bottom\"\n  }[formLabelLocation]);\n  var $label = needRenderLabel ? renderLabel(labelOptions) : null;\n\n  if ($label) {\n    $rootElement.append($label);\n\n    if (\"top\" === labelLocation || \"left\" === labelLocation) {\n      $rootElement.append($fieldEditorContainer);\n    }\n\n    if (\"right\" === labelLocation) {\n      $rootElement.prepend($fieldEditorContainer);\n    }\n\n    if (\"top\" === labelLocation) {\n      $rootElement.addClass(LABEL_VERTICAL_ALIGNMENT_CLASS);\n    } else {\n      $rootElement.addClass(LABEL_HORIZONTAL_ALIGNMENT_CLASS);\n    }\n\n    if (\"dxCheckBox\" === item.editorType || \"dxSwitch\" === item.editorType) {\n      eventsEngine.on($label, clickEventName, function () {\n        eventsEngine.trigger($fieldEditorContainer.children(), clickEventName);\n      });\n    }\n  } else {\n    $rootElement.append($fieldEditorContainer);\n  }\n\n  var widgetInstance;\n\n  if (template) {\n    template.render({\n      container: getPublicElement($fieldEditorContainer),\n      model: {\n        dataField: item.dataField,\n        editorType: item.editorType,\n        editorOptions: editorOptions,\n        component: parentComponent,\n        name: item.name\n      }\n    });\n  } else {\n    var $div = $(\"<div>\").appendTo($fieldEditorContainer);\n\n    try {\n      widgetInstance = createComponentCallback($div, item.editorType, editorOptions);\n      widgetInstance.setAria(\"describedby\", helpID);\n      widgetInstance.setAria(\"labelledby\", labelID);\n      widgetInstance.setAria(\"required\", isRequired);\n    } catch (e) {\n      errors.log(\"E1035\", e.message);\n    }\n  }\n\n  var editorElem = $fieldEditorContainer.children().first();\n  var $validationTarget = editorElem.hasClass(TEMPLATE_WRAPPER_CLASS) ? editorElem.children().first() : editorElem;\n  var validationTargetInstance = $validationTarget && $validationTarget.data(\"dx-validation-target\");\n\n  if (validationTargetInstance) {\n    var isItemHaveCustomLabel = item.label && item.label.text;\n    var itemName = isItemHaveCustomLabel ? null : name;\n    var fieldName = isItemHaveCustomLabel ? item.label.text : itemName && captionize(itemName);\n    var validationRules;\n\n    if (isSimpleItem) {\n      if (item.validationRules) {\n        validationRules = item.validationRules;\n      } else {\n        var requiredMessage = format(requiredMessageTemplate, fieldName || \"\");\n        validationRules = item.isRequired ? [{\n          type: \"required\",\n          message: requiredMessage\n        }] : null;\n      }\n    }\n\n    if (Array.isArray(validationRules) && validationRules.length) {\n      createComponentCallback($validationTarget, Validator, {\n        validationRules: validationRules,\n        validationGroup: validationGroup,\n        dataGetter: function () {\n          return {\n            formItem: item\n          };\n        }\n      });\n    }\n\n    if (isMaterial()) {\n      var wrapperClass = \".\" + FIELD_ITEM_CONTENT_WRAPPER_CLASS;\n\n      var toggleInvalidClass = function (e) {\n        $(e.element).parents(wrapperClass).toggleClass(INVALID_CLASS, false === e.component.option(\"isValid\") && (e.component._isFocused() || \"always\" === e.component.option(\"validationMessageMode\")));\n      };\n\n      validationTargetInstance.on(\"optionChanged\", e => {\n        if (\"isValid\" !== e.name) {\n          return;\n        }\n\n        toggleInvalidClass(e);\n      });\n      validationTargetInstance.on(\"focusIn\", toggleInvalidClass).on(\"focusOut\", toggleInvalidClass).on(\"enterKey\", toggleInvalidClass);\n    }\n  }\n\n  if (helpText && isSimpleItem) {\n    var $editorParent = $fieldEditorContainer.parent();\n    $editorParent.append($(\"<div>\").addClass(FIELD_ITEM_CONTENT_WRAPPER_CLASS).append($fieldEditorContainer).append($(\"<div>\").addClass(FIELD_ITEM_HELP_TEXT_CLASS).attr(\"id\", helpID).text(helpText)));\n  }\n\n  return {\n    $fieldEditorContainer: $fieldEditorContainer,\n    $rootElement: $rootElement,\n    widgetInstance: widgetInstance\n  };\n}","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/ui/form/components/field_item.js"],"names":["$","eventsEngine","name","clickEventName","getPublicElement","captionize","format","isMaterial","errors","Validator","FIELD_ITEM_CONTENT_CLASS","FLEX_LAYOUT_CLASS","FIELD_ITEM_OPTIONAL_CLASS","FIELD_ITEM_REQUIRED_CLASS","FIELD_ITEM_CONTENT_WRAPPER_CLASS","FIELD_ITEM_CONTENT_LOCATION_CLASS","FIELD_ITEM_LABEL_ALIGN_CLASS","FIELD_ITEM_HELP_TEXT_CLASS","LABEL_VERTICAL_ALIGNMENT_CLASS","LABEL_HORIZONTAL_ALIGNMENT_CLASS","renderLabel","TEMPLATE_WRAPPER_CLASS","INVALID_CLASS","renderFieldItem","_ref","$parent","rootElementCssClassList","parentComponent","createComponentCallback","useFlexLayout","labelOptions","labelNeedBaselineAlign","labelLocation","needRenderLabel","formLabelLocation","item","editorOptions","isSimpleItem","isRequired","template","helpID","labelID","helpText","requiredMessageTemplate","validationGroup","$rootElement","addClass","join","appendTo","$fieldEditorContainer","data","right","left","top","$label","append","prepend","editorType","on","trigger","children","widgetInstance","render","container","model","dataField","component","$div","setAria","e","log","message","editorElem","first","$validationTarget","hasClass","validationTargetInstance","isItemHaveCustomLabel","label","text","itemName","fieldName","validationRules","requiredMessage","type","Array","isArray","length","dataGetter","formItem","wrapperClass","toggleInvalidClass","element","parents","toggleClass","option","_isFocused","$editorParent","parent","attr"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/form/components/field_item.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../../core/renderer\";\r\nimport eventsEngine from \"../../../events/core/events_engine\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../../events/click\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../../core/element\";\r\nimport {\r\n    captionize\r\n} from \"../../../core/utils/inflector\";\r\nimport {\r\n    format\r\n} from \"../../../core/utils/string\";\r\nimport {\r\n    isMaterial\r\n} from \"../../themes\";\r\nimport errors from \"../../widget/ui.errors\";\r\nimport Validator from \"../../validator\";\r\nimport {\r\n    FIELD_ITEM_CONTENT_CLASS\r\n} from \"../constants\";\r\nexport var FLEX_LAYOUT_CLASS = \"dx-flex-layout\";\r\nexport var FIELD_ITEM_OPTIONAL_CLASS = \"dx-field-item-optional\";\r\nexport var FIELD_ITEM_REQUIRED_CLASS = \"dx-field-item-required\";\r\nexport var FIELD_ITEM_CONTENT_WRAPPER_CLASS = \"dx-field-item-content-wrapper\";\r\nexport var FIELD_ITEM_CONTENT_LOCATION_CLASS = \"dx-field-item-content-location-\";\r\nexport var FIELD_ITEM_LABEL_ALIGN_CLASS = \"dx-field-item-label-align\";\r\nexport var FIELD_ITEM_HELP_TEXT_CLASS = \"dx-field-item-help-text\";\r\nexport var LABEL_VERTICAL_ALIGNMENT_CLASS = \"dx-label-v-align\";\r\nexport var LABEL_HORIZONTAL_ALIGNMENT_CLASS = \"dx-label-h-align\";\r\nimport {\r\n    renderLabel\r\n} from \"./label\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar INVALID_CLASS = \"dx-invalid\";\r\nexport function renderFieldItem(_ref) {\r\n    var {\r\n        $parent: $parent,\r\n        rootElementCssClassList: rootElementCssClassList,\r\n        parentComponent: parentComponent,\r\n        createComponentCallback: createComponentCallback,\r\n        useFlexLayout: useFlexLayout,\r\n        labelOptions: labelOptions,\r\n        labelNeedBaselineAlign: labelNeedBaselineAlign,\r\n        labelLocation: labelLocation,\r\n        needRenderLabel: needRenderLabel,\r\n        formLabelLocation: formLabelLocation,\r\n        item: item,\r\n        editorOptions: editorOptions,\r\n        isSimpleItem: isSimpleItem,\r\n        isRequired: isRequired,\r\n        template: template,\r\n        helpID: helpID,\r\n        labelID: labelID,\r\n        name: name,\r\n        helpText: helpText,\r\n        requiredMessageTemplate: requiredMessageTemplate,\r\n        validationGroup: validationGroup\r\n    } = _ref;\r\n    var $rootElement = $(\"<div>\").addClass(rootElementCssClassList.join(\" \")).appendTo($parent);\r\n    $rootElement.addClass(isRequired ? FIELD_ITEM_REQUIRED_CLASS : FIELD_ITEM_OPTIONAL_CLASS);\r\n    if (isSimpleItem && useFlexLayout) {\r\n        $rootElement.addClass(FLEX_LAYOUT_CLASS)\r\n    }\r\n    if (isSimpleItem && labelNeedBaselineAlign) {\r\n        $rootElement.addClass(FIELD_ITEM_LABEL_ALIGN_CLASS)\r\n    }\r\n    var $fieldEditorContainer = $(\"<div>\");\r\n    $fieldEditorContainer.data(\"dx-form-item\", item);\r\n    $fieldEditorContainer.addClass(FIELD_ITEM_CONTENT_CLASS).addClass(FIELD_ITEM_CONTENT_LOCATION_CLASS + {\r\n        right: \"left\",\r\n        left: \"right\",\r\n        top: \"bottom\"\r\n    } [formLabelLocation]);\r\n    var $label = needRenderLabel ? renderLabel(labelOptions) : null;\r\n    if ($label) {\r\n        $rootElement.append($label);\r\n        if (\"top\" === labelLocation || \"left\" === labelLocation) {\r\n            $rootElement.append($fieldEditorContainer)\r\n        }\r\n        if (\"right\" === labelLocation) {\r\n            $rootElement.prepend($fieldEditorContainer)\r\n        }\r\n        if (\"top\" === labelLocation) {\r\n            $rootElement.addClass(LABEL_VERTICAL_ALIGNMENT_CLASS)\r\n        } else {\r\n            $rootElement.addClass(LABEL_HORIZONTAL_ALIGNMENT_CLASS)\r\n        }\r\n        if (\"dxCheckBox\" === item.editorType || \"dxSwitch\" === item.editorType) {\r\n            eventsEngine.on($label, clickEventName, (function() {\r\n                eventsEngine.trigger($fieldEditorContainer.children(), clickEventName)\r\n            }))\r\n        }\r\n    } else {\r\n        $rootElement.append($fieldEditorContainer)\r\n    }\r\n    var widgetInstance;\r\n    if (template) {\r\n        template.render({\r\n            container: getPublicElement($fieldEditorContainer),\r\n            model: {\r\n                dataField: item.dataField,\r\n                editorType: item.editorType,\r\n                editorOptions: editorOptions,\r\n                component: parentComponent,\r\n                name: item.name\r\n            }\r\n        })\r\n    } else {\r\n        var $div = $(\"<div>\").appendTo($fieldEditorContainer);\r\n        try {\r\n            widgetInstance = createComponentCallback($div, item.editorType, editorOptions);\r\n            widgetInstance.setAria(\"describedby\", helpID);\r\n            widgetInstance.setAria(\"labelledby\", labelID);\r\n            widgetInstance.setAria(\"required\", isRequired)\r\n        } catch (e) {\r\n            errors.log(\"E1035\", e.message)\r\n        }\r\n    }\r\n    var editorElem = $fieldEditorContainer.children().first();\r\n    var $validationTarget = editorElem.hasClass(TEMPLATE_WRAPPER_CLASS) ? editorElem.children().first() : editorElem;\r\n    var validationTargetInstance = $validationTarget && $validationTarget.data(\"dx-validation-target\");\r\n    if (validationTargetInstance) {\r\n        var isItemHaveCustomLabel = item.label && item.label.text;\r\n        var itemName = isItemHaveCustomLabel ? null : name;\r\n        var fieldName = isItemHaveCustomLabel ? item.label.text : itemName && captionize(itemName);\r\n        var validationRules;\r\n        if (isSimpleItem) {\r\n            if (item.validationRules) {\r\n                validationRules = item.validationRules\r\n            } else {\r\n                var requiredMessage = format(requiredMessageTemplate, fieldName || \"\");\r\n                validationRules = item.isRequired ? [{\r\n                    type: \"required\",\r\n                    message: requiredMessage\r\n                }] : null\r\n            }\r\n        }\r\n        if (Array.isArray(validationRules) && validationRules.length) {\r\n            createComponentCallback($validationTarget, Validator, {\r\n                validationRules: validationRules,\r\n                validationGroup: validationGroup,\r\n                dataGetter: function() {\r\n                    return {\r\n                        formItem: item\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        if (isMaterial()) {\r\n            var wrapperClass = \".\" + FIELD_ITEM_CONTENT_WRAPPER_CLASS;\r\n            var toggleInvalidClass = function(e) {\r\n                $(e.element).parents(wrapperClass).toggleClass(INVALID_CLASS, false === e.component.option(\"isValid\") && (e.component._isFocused() || \"always\" === e.component.option(\"validationMessageMode\")))\r\n            };\r\n            validationTargetInstance.on(\"optionChanged\", e => {\r\n                if (\"isValid\" !== e.name) {\r\n                    return\r\n                }\r\n                toggleInvalidClass(e)\r\n            });\r\n            validationTargetInstance.on(\"focusIn\", toggleInvalidClass).on(\"focusOut\", toggleInvalidClass).on(\"enterKey\", toggleInvalidClass)\r\n        }\r\n    }\r\n    if (helpText && isSimpleItem) {\r\n        var $editorParent = $fieldEditorContainer.parent();\r\n        $editorParent.append($(\"<div>\").addClass(FIELD_ITEM_CONTENT_WRAPPER_CLASS).append($fieldEditorContainer).append($(\"<div>\").addClass(FIELD_ITEM_HELP_TEXT_CLASS).attr(\"id\", helpID).text(helpText)))\r\n    }\r\n    return {\r\n        $fieldEditorContainer: $fieldEditorContainer,\r\n        $rootElement: $rootElement,\r\n        widgetInstance: widgetInstance\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}