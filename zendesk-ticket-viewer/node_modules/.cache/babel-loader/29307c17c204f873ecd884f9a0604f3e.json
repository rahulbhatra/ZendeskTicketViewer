{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/toolbar/ui.toolbar.strategy.drop_down_menu.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../core/utils/extend\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport ToolbarStrategy from \"./ui.toolbar.strategy\";\nimport ToolbarMenu from \"./ui.toolbar.menu\";\nimport DropDownMenu from \"../drop_down_menu\";\nimport devices from \"../../core/devices\";\nvar MENU_INVISIBLE_CLASS = \"dx-state-invisible\";\nvar POPOVER_BOUNDARY_OFFSET = 10;\nvar DropDownMenuStrategy = ToolbarStrategy.inherit({\n  NAME: \"dropDownMenu\",\n  render: function () {\n    if (!this._hasVisibleMenuItems()) {\n      return;\n    }\n\n    this._renderMenuButtonContainer();\n\n    this._renderWidget();\n  },\n  renderMenuItems: function () {\n    if (!this._menu) {\n      this.render();\n    }\n\n    this.callBase();\n\n    if (this._menu && !this._menu.option(\"items\").length) {\n      this._menu.close();\n    }\n  },\n  _menuWidget: function () {\n    return DropDownMenu;\n  },\n  _widgetOptions: function () {\n    var topAndBottomOffset = 2 * POPOVER_BOUNDARY_OFFSET;\n    return extend(this.callBase(), {\n      deferRendering: true,\n      container: this._toolbar.option(\"menuContainer\"),\n      popupMaxHeight: \"android\" === devices.current().platform ? domAdapter.getDocumentElement().clientHeight - topAndBottomOffset : void 0,\n      menuWidget: ToolbarMenu,\n      onOptionChanged: _ref => {\n        var {\n          name: name,\n          value: value\n        } = _ref;\n\n        if (\"opened\" === name) {\n          this._toolbar.option(\"overflowMenuVisible\", value);\n        }\n\n        if (\"items\" === name) {\n          this._updateMenuVisibility(value);\n        }\n      },\n      popupPosition: {\n        at: \"bottom right\",\n        my: \"top right\"\n      }\n    });\n  },\n  _updateMenuVisibility: function (menuItems) {\n    var items = menuItems || this._getMenuItems();\n\n    var isMenuVisible = items.length && this._hasVisibleMenuItems(items);\n\n    this._toggleMenuVisibility(isMenuVisible);\n  },\n  _toggleMenuVisibility: function (value) {\n    if (!this._menuContainer()) {\n      return;\n    }\n\n    this._menuContainer().toggleClass(MENU_INVISIBLE_CLASS, !value);\n  },\n  _menuContainer: function () {\n    return this._$menuButtonContainer;\n  }\n});\nexport default DropDownMenuStrategy;","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/ui/toolbar/ui.toolbar.strategy.drop_down_menu.js"],"names":["extend","domAdapter","ToolbarStrategy","ToolbarMenu","DropDownMenu","devices","MENU_INVISIBLE_CLASS","POPOVER_BOUNDARY_OFFSET","DropDownMenuStrategy","inherit","NAME","render","_hasVisibleMenuItems","_renderMenuButtonContainer","_renderWidget","renderMenuItems","_menu","callBase","option","length","close","_menuWidget","_widgetOptions","topAndBottomOffset","deferRendering","container","_toolbar","popupMaxHeight","current","platform","getDocumentElement","clientHeight","menuWidget","onOptionChanged","_ref","name","value","_updateMenuVisibility","popupPosition","at","my","menuItems","items","_getMenuItems","isMenuVisible","_toggleMenuVisibility","_menuContainer","toggleClass","_$menuButtonContainer"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SACIA,MADJ,QAEO,yBAFP;AAGA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,IAAIC,oBAAoB,GAAG,oBAA3B;AACA,IAAIC,uBAAuB,GAAG,EAA9B;AACA,IAAIC,oBAAoB,GAAGN,eAAe,CAACO,OAAhB,CAAwB;AAC/CC,EAAAA,IAAI,EAAE,cADyC;AAE/CC,EAAAA,MAAM,EAAE,YAAW;AACf,QAAI,CAAC,KAAKC,oBAAL,EAAL,EAAkC;AAC9B;AACH;;AACD,SAAKC,0BAAL;;AACA,SAAKC,aAAL;AACH,GAR8C;AAS/CC,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAI,CAAC,KAAKC,KAAV,EAAiB;AACb,WAAKL,MAAL;AACH;;AACD,SAAKM,QAAL;;AACA,QAAI,KAAKD,KAAL,IAAc,CAAC,KAAKA,KAAL,CAAWE,MAAX,CAAkB,OAAlB,EAA2BC,MAA9C,EAAsD;AAClD,WAAKH,KAAL,CAAWI,KAAX;AACH;AACJ,GAjB8C;AAkB/CC,EAAAA,WAAW,EAAE,YAAW;AACpB,WAAOjB,YAAP;AACH,GApB8C;AAqB/CkB,EAAAA,cAAc,EAAE,YAAW;AACvB,QAAIC,kBAAkB,GAAG,IAAIhB,uBAA7B;AACA,WAAOP,MAAM,CAAC,KAAKiB,QAAL,EAAD,EAAkB;AAC3BO,MAAAA,cAAc,EAAE,IADW;AAE3BC,MAAAA,SAAS,EAAE,KAAKC,QAAL,CAAcR,MAAd,CAAqB,eAArB,CAFgB;AAG3BS,MAAAA,cAAc,EAAE,cAActB,OAAO,CAACuB,OAAR,GAAkBC,QAAhC,GAA2C5B,UAAU,CAAC6B,kBAAX,GAAgCC,YAAhC,GAA+CR,kBAA1F,GAA+G,KAAK,CAHzG;AAI3BS,MAAAA,UAAU,EAAE7B,WAJe;AAK3B8B,MAAAA,eAAe,EAAEC,IAAI,IAAI;AACrB,YAAI;AACAC,UAAAA,IAAI,EAAEA,IADN;AAEAC,UAAAA,KAAK,EAAEA;AAFP,YAGAF,IAHJ;;AAIA,YAAI,aAAaC,IAAjB,EAAuB;AACnB,eAAKT,QAAL,CAAcR,MAAd,CAAqB,qBAArB,EAA4CkB,KAA5C;AACH;;AACD,YAAI,YAAYD,IAAhB,EAAsB;AAClB,eAAKE,qBAAL,CAA2BD,KAA3B;AACH;AACJ,OAhB0B;AAiB3BE,MAAAA,aAAa,EAAE;AACXC,QAAAA,EAAE,EAAE,cADO;AAEXC,QAAAA,EAAE,EAAE;AAFO;AAjBY,KAAlB,CAAb;AAsBH,GA7C8C;AA8C/CH,EAAAA,qBAAqB,EAAE,UAASI,SAAT,EAAoB;AACvC,QAAIC,KAAK,GAAGD,SAAS,IAAI,KAAKE,aAAL,EAAzB;;AACA,QAAIC,aAAa,GAAGF,KAAK,CAACvB,MAAN,IAAgB,KAAKP,oBAAL,CAA0B8B,KAA1B,CAApC;;AACA,SAAKG,qBAAL,CAA2BD,aAA3B;AACH,GAlD8C;AAmD/CC,EAAAA,qBAAqB,EAAE,UAAST,KAAT,EAAgB;AACnC,QAAI,CAAC,KAAKU,cAAL,EAAL,EAA4B;AACxB;AACH;;AACD,SAAKA,cAAL,GAAsBC,WAAtB,CAAkCzC,oBAAlC,EAAwD,CAAC8B,KAAzD;AACH,GAxD8C;AAyD/CU,EAAAA,cAAc,EAAE,YAAW;AACvB,WAAO,KAAKE,qBAAZ;AACH;AA3D8C,CAAxB,CAA3B;AA6DA,eAAexC,oBAAf","sourcesContent":["/**\r\n * DevExtreme (esm/ui/toolbar/ui.toolbar.strategy.drop_down_menu.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport ToolbarStrategy from \"./ui.toolbar.strategy\";\r\nimport ToolbarMenu from \"./ui.toolbar.menu\";\r\nimport DropDownMenu from \"../drop_down_menu\";\r\nimport devices from \"../../core/devices\";\r\nvar MENU_INVISIBLE_CLASS = \"dx-state-invisible\";\r\nvar POPOVER_BOUNDARY_OFFSET = 10;\r\nvar DropDownMenuStrategy = ToolbarStrategy.inherit({\r\n    NAME: \"dropDownMenu\",\r\n    render: function() {\r\n        if (!this._hasVisibleMenuItems()) {\r\n            return\r\n        }\r\n        this._renderMenuButtonContainer();\r\n        this._renderWidget()\r\n    },\r\n    renderMenuItems: function() {\r\n        if (!this._menu) {\r\n            this.render()\r\n        }\r\n        this.callBase();\r\n        if (this._menu && !this._menu.option(\"items\").length) {\r\n            this._menu.close()\r\n        }\r\n    },\r\n    _menuWidget: function() {\r\n        return DropDownMenu\r\n    },\r\n    _widgetOptions: function() {\r\n        var topAndBottomOffset = 2 * POPOVER_BOUNDARY_OFFSET;\r\n        return extend(this.callBase(), {\r\n            deferRendering: true,\r\n            container: this._toolbar.option(\"menuContainer\"),\r\n            popupMaxHeight: \"android\" === devices.current().platform ? domAdapter.getDocumentElement().clientHeight - topAndBottomOffset : void 0,\r\n            menuWidget: ToolbarMenu,\r\n            onOptionChanged: _ref => {\r\n                var {\r\n                    name: name,\r\n                    value: value\r\n                } = _ref;\r\n                if (\"opened\" === name) {\r\n                    this._toolbar.option(\"overflowMenuVisible\", value)\r\n                }\r\n                if (\"items\" === name) {\r\n                    this._updateMenuVisibility(value)\r\n                }\r\n            },\r\n            popupPosition: {\r\n                at: \"bottom right\",\r\n                my: \"top right\"\r\n            }\r\n        })\r\n    },\r\n    _updateMenuVisibility: function(menuItems) {\r\n        var items = menuItems || this._getMenuItems();\r\n        var isMenuVisible = items.length && this._hasVisibleMenuItems(items);\r\n        this._toggleMenuVisibility(isMenuVisible)\r\n    },\r\n    _toggleMenuVisibility: function(value) {\r\n        if (!this._menuContainer()) {\r\n            return\r\n        }\r\n        this._menuContainer().toggleClass(MENU_INVISIBLE_CLASS, !value)\r\n    },\r\n    _menuContainer: function() {\r\n        return this._$menuButtonContainer\r\n    }\r\n});\r\nexport default DropDownMenuStrategy;\r\n"]},"metadata":{},"sourceType":"module"}