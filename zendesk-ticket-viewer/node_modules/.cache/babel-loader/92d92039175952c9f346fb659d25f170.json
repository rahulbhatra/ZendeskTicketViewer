{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/form/ui.form.layout_manager.utils.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../core/utils/extend\";\nimport { isDefined } from \"../../core/utils/type\";\nimport { each } from \"../../core/utils/iterator\";\nimport { captionize } from \"../../core/utils/inflector\";\nimport { inArray } from \"../../core/utils/array\";\nimport Guid from \"../../core/guid\";\nimport { SIMPLE_ITEM_TYPE } from \"./constants\";\nvar EDITORS_WITH_ARRAY_VALUE = [\"dxTagBox\", \"dxRangeSlider\"];\nexport function convertToRenderFieldItemOptions(_ref) {\n  var {\n    $parent: $parent,\n    rootElementCssClassList: rootElementCssClassList,\n    parentComponent: parentComponent,\n    createComponentCallback: createComponentCallback,\n    useFlexLayout: useFlexLayout,\n    item: item,\n    template: template,\n    name: name,\n    formLabelLocation: formLabelLocation,\n    requiredMessageTemplate: requiredMessageTemplate,\n    validationGroup: validationGroup,\n    editorValue: editorValue,\n    canAssignUndefinedValueToEditor: canAssignUndefinedValueToEditor,\n    editorValidationBoundary: editorValidationBoundary,\n    editorStylingMode: editorStylingMode,\n    showColonAfterLabel: showColonAfterLabel,\n    managerLabelLocation: managerLabelLocation,\n    itemId: itemId,\n    managerMarkOptions: managerMarkOptions,\n    labelMode: labelMode\n  } = _ref;\n  var isRequired = isDefined(item.isRequired) ? item.isRequired : !!_hasRequiredRuleInSet(item.validationRules);\n  var isSimpleItem = item.itemType === SIMPLE_ITEM_TYPE;\n  var helpID = item.helpText ? \"dx-\" + new Guid() : null;\n  var helpText = item.helpText;\n\n  var labelOptions = _convertToLabelOptions({\n    item: item,\n    id: itemId,\n    isRequired: isRequired,\n    managerMarkOptions: managerMarkOptions,\n    showColonAfterLabel: showColonAfterLabel,\n    labelLocation: managerLabelLocation\n  });\n\n  var isOutsideLabelMode = \"outside\" === labelMode;\n  var needRenderLabel = labelOptions.visible && labelOptions.text && isOutsideLabelMode;\n  var {\n    location: labelLocation,\n    labelID: labelID\n  } = labelOptions;\n  var labelNeedBaselineAlign = \"top\" !== labelLocation && (!!item.helpText && !useFlexLayout || -1 !== inArray(item.editorType, [\"dxTextArea\", \"dxRadioGroup\", \"dxCalendar\", \"dxHtmlEditor\"]));\n  return {\n    $parent: $parent,\n    rootElementCssClassList: rootElementCssClassList,\n    parentComponent: parentComponent,\n    createComponentCallback: createComponentCallback,\n    useFlexLayout: useFlexLayout,\n    labelOptions: labelOptions,\n    labelNeedBaselineAlign: labelNeedBaselineAlign,\n    labelLocation: labelLocation,\n    needRenderLabel: needRenderLabel,\n    item: item,\n    isSimpleItem: isSimpleItem,\n    isRequired: isRequired,\n    template: template,\n    helpID: helpID,\n    labelID: labelID,\n    name: name,\n    helpText: helpText,\n    formLabelLocation: formLabelLocation,\n    requiredMessageTemplate: requiredMessageTemplate,\n    validationGroup: validationGroup,\n    editorOptions: _convertToEditorOptions({\n      editorType: item.editorType,\n      editorValue: editorValue,\n      defaultEditorName: item.dataField,\n      canAssignUndefinedValueToEditor: canAssignUndefinedValueToEditor,\n      externalEditorOptions: item.editorOptions,\n      editorInputId: itemId,\n      editorValidationBoundary: editorValidationBoundary,\n      editorStylingMode: editorStylingMode,\n      labelMode: isOutsideLabelMode ? \"hidden\" : labelMode,\n      labelText: isOutsideLabelMode ? void 0 : labelOptions.text,\n      labelMark: getLabelMarkText(labelOptions.markOptions)\n    })\n  };\n}\nexport function getLabelMarkText(_ref2) {\n  var {\n    showRequiredMark: showRequiredMark,\n    requiredMark: requiredMark,\n    showOptionalMark: showOptionalMark,\n    optionalMark: optionalMark\n  } = _ref2;\n\n  if (!showRequiredMark && !showOptionalMark) {\n    return \"\";\n  }\n\n  return String.fromCharCode(160) + (showRequiredMark ? requiredMark : optionalMark);\n}\nexport function convertToLabelMarkOptions(_ref3, isRequired) {\n  var {\n    showRequiredMark: showRequiredMark,\n    requiredMark: requiredMark,\n    showOptionalMark: showOptionalMark,\n    optionalMark: optionalMark\n  } = _ref3;\n  return {\n    showRequiredMark: showRequiredMark && isRequired,\n    requiredMark: requiredMark,\n    showOptionalMark: showOptionalMark && !isRequired,\n    optionalMark: optionalMark\n  };\n}\n\nfunction _convertToEditorOptions(_ref4) {\n  var {\n    editorType: editorType,\n    defaultEditorName: defaultEditorName,\n    editorValue: editorValue,\n    canAssignUndefinedValueToEditor: canAssignUndefinedValueToEditor,\n    externalEditorOptions: externalEditorOptions,\n    editorInputId: editorInputId,\n    editorValidationBoundary: editorValidationBoundary,\n    editorStylingMode: editorStylingMode,\n    labelMode: labelMode,\n    labelText: labelText,\n    labelMark: labelMark\n  } = _ref4;\n  var editorOptionsWithValue = {};\n\n  if (void 0 !== editorValue || canAssignUndefinedValueToEditor) {\n    editorOptionsWithValue.value = editorValue;\n  }\n\n  if (-1 !== EDITORS_WITH_ARRAY_VALUE.indexOf(editorType)) {\n    editorOptionsWithValue.value = editorOptionsWithValue.value || [];\n  }\n\n  var result = extend(true, editorOptionsWithValue, externalEditorOptions, {\n    inputAttr: {\n      id: editorInputId\n    },\n    validationBoundary: editorValidationBoundary,\n    stylingMode: editorStylingMode,\n    label: labelText,\n    labelMode: labelMode,\n    labelMark: labelMark\n  });\n\n  if (externalEditorOptions) {\n    if (result.dataSource) {\n      result.dataSource = externalEditorOptions.dataSource;\n    }\n\n    if (result.items) {\n      result.items = externalEditorOptions.items;\n    }\n  }\n\n  if (defaultEditorName && !result.name) {\n    result.name = defaultEditorName;\n  }\n\n  return result;\n}\n\nfunction _hasRequiredRuleInSet(rules) {\n  var hasRequiredRule;\n\n  if (rules && rules.length) {\n    each(rules, function (index, rule) {\n      if (\"required\" === rule.type) {\n        hasRequiredRule = true;\n        return false;\n      }\n    });\n  }\n\n  return hasRequiredRule;\n}\n\nfunction _convertToLabelOptions(_ref5) {\n  var {\n    item: item,\n    id: id,\n    isRequired: isRequired,\n    managerMarkOptions: managerMarkOptions,\n    showColonAfterLabel: showColonAfterLabel,\n    labelLocation: labelLocation\n  } = _ref5;\n  var labelOptions = extend({\n    showColon: showColonAfterLabel,\n    location: labelLocation,\n    id: id,\n    visible: true,\n    isRequired: isRequired\n  }, item ? item.label : {}, {\n    markOptions: convertToLabelMarkOptions(managerMarkOptions, isRequired)\n  });\n\n  if (-1 !== inArray(item.editorType, [\"dxRadioGroup\", \"dxCheckBox\", \"dxLookup\", \"dxSlider\", \"dxRangeSlider\", \"dxSwitch\", \"dxHtmlEditor\"])) {\n    labelOptions.labelID = \"dx-label-\".concat(new Guid());\n  }\n\n  if (!labelOptions.text && item.dataField) {\n    labelOptions.text = captionize(item.dataField);\n  }\n\n  if (labelOptions.text) {\n    labelOptions.text += labelOptions.showColon ? \":\" : \"\";\n  }\n\n  return labelOptions;\n}","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/ui/form/ui.form.layout_manager.utils.js"],"names":["extend","isDefined","each","captionize","inArray","Guid","SIMPLE_ITEM_TYPE","EDITORS_WITH_ARRAY_VALUE","convertToRenderFieldItemOptions","_ref","$parent","rootElementCssClassList","parentComponent","createComponentCallback","useFlexLayout","item","template","name","formLabelLocation","requiredMessageTemplate","validationGroup","editorValue","canAssignUndefinedValueToEditor","editorValidationBoundary","editorStylingMode","showColonAfterLabel","managerLabelLocation","itemId","managerMarkOptions","labelMode","isRequired","_hasRequiredRuleInSet","validationRules","isSimpleItem","itemType","helpID","helpText","labelOptions","_convertToLabelOptions","id","labelLocation","isOutsideLabelMode","needRenderLabel","visible","text","location","labelID","labelNeedBaselineAlign","editorType","editorOptions","_convertToEditorOptions","defaultEditorName","dataField","externalEditorOptions","editorInputId","labelText","labelMark","getLabelMarkText","markOptions","_ref2","showRequiredMark","requiredMark","showOptionalMark","optionalMark","String","fromCharCode","convertToLabelMarkOptions","_ref3","_ref4","editorOptionsWithValue","value","indexOf","result","inputAttr","validationBoundary","stylingMode","label","dataSource","items","rules","hasRequiredRule","length","index","rule","type","_ref5","showColon","concat"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/form/ui.form.layout_manager.utils.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    captionize\r\n} from \"../../core/utils/inflector\";\r\nimport {\r\n    inArray\r\n} from \"../../core/utils/array\";\r\nimport Guid from \"../../core/guid\";\r\nimport {\r\n    SIMPLE_ITEM_TYPE\r\n} from \"./constants\";\r\nvar EDITORS_WITH_ARRAY_VALUE = [\"dxTagBox\", \"dxRangeSlider\"];\r\nexport function convertToRenderFieldItemOptions(_ref) {\r\n    var {\r\n        $parent: $parent,\r\n        rootElementCssClassList: rootElementCssClassList,\r\n        parentComponent: parentComponent,\r\n        createComponentCallback: createComponentCallback,\r\n        useFlexLayout: useFlexLayout,\r\n        item: item,\r\n        template: template,\r\n        name: name,\r\n        formLabelLocation: formLabelLocation,\r\n        requiredMessageTemplate: requiredMessageTemplate,\r\n        validationGroup: validationGroup,\r\n        editorValue: editorValue,\r\n        canAssignUndefinedValueToEditor: canAssignUndefinedValueToEditor,\r\n        editorValidationBoundary: editorValidationBoundary,\r\n        editorStylingMode: editorStylingMode,\r\n        showColonAfterLabel: showColonAfterLabel,\r\n        managerLabelLocation: managerLabelLocation,\r\n        itemId: itemId,\r\n        managerMarkOptions: managerMarkOptions,\r\n        labelMode: labelMode\r\n    } = _ref;\r\n    var isRequired = isDefined(item.isRequired) ? item.isRequired : !!_hasRequiredRuleInSet(item.validationRules);\r\n    var isSimpleItem = item.itemType === SIMPLE_ITEM_TYPE;\r\n    var helpID = item.helpText ? \"dx-\" + new Guid : null;\r\n    var helpText = item.helpText;\r\n    var labelOptions = _convertToLabelOptions({\r\n        item: item,\r\n        id: itemId,\r\n        isRequired: isRequired,\r\n        managerMarkOptions: managerMarkOptions,\r\n        showColonAfterLabel: showColonAfterLabel,\r\n        labelLocation: managerLabelLocation\r\n    });\r\n    var isOutsideLabelMode = \"outside\" === labelMode;\r\n    var needRenderLabel = labelOptions.visible && labelOptions.text && isOutsideLabelMode;\r\n    var {\r\n        location: labelLocation,\r\n        labelID: labelID\r\n    } = labelOptions;\r\n    var labelNeedBaselineAlign = \"top\" !== labelLocation && (!!item.helpText && !useFlexLayout || -1 !== inArray(item.editorType, [\"dxTextArea\", \"dxRadioGroup\", \"dxCalendar\", \"dxHtmlEditor\"]));\r\n    return {\r\n        $parent: $parent,\r\n        rootElementCssClassList: rootElementCssClassList,\r\n        parentComponent: parentComponent,\r\n        createComponentCallback: createComponentCallback,\r\n        useFlexLayout: useFlexLayout,\r\n        labelOptions: labelOptions,\r\n        labelNeedBaselineAlign: labelNeedBaselineAlign,\r\n        labelLocation: labelLocation,\r\n        needRenderLabel: needRenderLabel,\r\n        item: item,\r\n        isSimpleItem: isSimpleItem,\r\n        isRequired: isRequired,\r\n        template: template,\r\n        helpID: helpID,\r\n        labelID: labelID,\r\n        name: name,\r\n        helpText: helpText,\r\n        formLabelLocation: formLabelLocation,\r\n        requiredMessageTemplate: requiredMessageTemplate,\r\n        validationGroup: validationGroup,\r\n        editorOptions: _convertToEditorOptions({\r\n            editorType: item.editorType,\r\n            editorValue: editorValue,\r\n            defaultEditorName: item.dataField,\r\n            canAssignUndefinedValueToEditor: canAssignUndefinedValueToEditor,\r\n            externalEditorOptions: item.editorOptions,\r\n            editorInputId: itemId,\r\n            editorValidationBoundary: editorValidationBoundary,\r\n            editorStylingMode: editorStylingMode,\r\n            labelMode: isOutsideLabelMode ? \"hidden\" : labelMode,\r\n            labelText: isOutsideLabelMode ? void 0 : labelOptions.text,\r\n            labelMark: getLabelMarkText(labelOptions.markOptions)\r\n        })\r\n    }\r\n}\r\nexport function getLabelMarkText(_ref2) {\r\n    var {\r\n        showRequiredMark: showRequiredMark,\r\n        requiredMark: requiredMark,\r\n        showOptionalMark: showOptionalMark,\r\n        optionalMark: optionalMark\r\n    } = _ref2;\r\n    if (!showRequiredMark && !showOptionalMark) {\r\n        return \"\"\r\n    }\r\n    return String.fromCharCode(160) + (showRequiredMark ? requiredMark : optionalMark)\r\n}\r\nexport function convertToLabelMarkOptions(_ref3, isRequired) {\r\n    var {\r\n        showRequiredMark: showRequiredMark,\r\n        requiredMark: requiredMark,\r\n        showOptionalMark: showOptionalMark,\r\n        optionalMark: optionalMark\r\n    } = _ref3;\r\n    return {\r\n        showRequiredMark: showRequiredMark && isRequired,\r\n        requiredMark: requiredMark,\r\n        showOptionalMark: showOptionalMark && !isRequired,\r\n        optionalMark: optionalMark\r\n    }\r\n}\r\n\r\nfunction _convertToEditorOptions(_ref4) {\r\n    var {\r\n        editorType: editorType,\r\n        defaultEditorName: defaultEditorName,\r\n        editorValue: editorValue,\r\n        canAssignUndefinedValueToEditor: canAssignUndefinedValueToEditor,\r\n        externalEditorOptions: externalEditorOptions,\r\n        editorInputId: editorInputId,\r\n        editorValidationBoundary: editorValidationBoundary,\r\n        editorStylingMode: editorStylingMode,\r\n        labelMode: labelMode,\r\n        labelText: labelText,\r\n        labelMark: labelMark\r\n    } = _ref4;\r\n    var editorOptionsWithValue = {};\r\n    if (void 0 !== editorValue || canAssignUndefinedValueToEditor) {\r\n        editorOptionsWithValue.value = editorValue\r\n    }\r\n    if (-1 !== EDITORS_WITH_ARRAY_VALUE.indexOf(editorType)) {\r\n        editorOptionsWithValue.value = editorOptionsWithValue.value || []\r\n    }\r\n    var result = extend(true, editorOptionsWithValue, externalEditorOptions, {\r\n        inputAttr: {\r\n            id: editorInputId\r\n        },\r\n        validationBoundary: editorValidationBoundary,\r\n        stylingMode: editorStylingMode,\r\n        label: labelText,\r\n        labelMode: labelMode,\r\n        labelMark: labelMark\r\n    });\r\n    if (externalEditorOptions) {\r\n        if (result.dataSource) {\r\n            result.dataSource = externalEditorOptions.dataSource\r\n        }\r\n        if (result.items) {\r\n            result.items = externalEditorOptions.items\r\n        }\r\n    }\r\n    if (defaultEditorName && !result.name) {\r\n        result.name = defaultEditorName\r\n    }\r\n    return result\r\n}\r\n\r\nfunction _hasRequiredRuleInSet(rules) {\r\n    var hasRequiredRule;\r\n    if (rules && rules.length) {\r\n        each(rules, (function(index, rule) {\r\n            if (\"required\" === rule.type) {\r\n                hasRequiredRule = true;\r\n                return false\r\n            }\r\n        }))\r\n    }\r\n    return hasRequiredRule\r\n}\r\n\r\nfunction _convertToLabelOptions(_ref5) {\r\n    var {\r\n        item: item,\r\n        id: id,\r\n        isRequired: isRequired,\r\n        managerMarkOptions: managerMarkOptions,\r\n        showColonAfterLabel: showColonAfterLabel,\r\n        labelLocation: labelLocation\r\n    } = _ref5;\r\n    var labelOptions = extend({\r\n        showColon: showColonAfterLabel,\r\n        location: labelLocation,\r\n        id: id,\r\n        visible: true,\r\n        isRequired: isRequired\r\n    }, item ? item.label : {}, {\r\n        markOptions: convertToLabelMarkOptions(managerMarkOptions, isRequired)\r\n    });\r\n    if (-1 !== inArray(item.editorType, [\"dxRadioGroup\", \"dxCheckBox\", \"dxLookup\", \"dxSlider\", \"dxRangeSlider\", \"dxSwitch\", \"dxHtmlEditor\"])) {\r\n        labelOptions.labelID = \"dx-label-\".concat(new Guid)\r\n    }\r\n    if (!labelOptions.text && item.dataField) {\r\n        labelOptions.text = captionize(item.dataField)\r\n    }\r\n    if (labelOptions.text) {\r\n        labelOptions.text += labelOptions.showColon ? \":\" : \"\"\r\n    }\r\n    return labelOptions\r\n}\r\n"]},"metadata":{},"sourceType":"module"}