{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/dialog.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getHeight, getWidth } from \"../core/utils/size\";\nimport $ from \"../core/renderer\";\nimport { Component } from \"../core/component\";\nimport Action from \"../core/action\";\nimport devices from \"../core/devices\";\nimport config from \"../core/config\";\nimport { resetActiveElement } from \"../core/utils/dom\";\nimport { Deferred } from \"../core/utils/deferred\";\nimport { isFunction, isPlainObject } from \"../core/utils/type\";\nimport { each } from \"../core/utils/iterator\";\nimport { extend } from \"../core/utils/extend\";\nimport { getWindow } from \"../core/utils/window\";\nimport eventsEngine from \"../events/core/events_engine\";\nimport { value as getViewport } from \"../core/utils/view_port\";\nimport messageLocalization from \"../localization/message\";\nimport errors from \"./widget/ui.errors\";\nimport Popup from \"./popup\";\nimport { ensureDefined } from \"../core/utils/common\";\nvar window = getWindow();\nvar DEFAULT_BUTTON = {\n  text: \"OK\",\n  onClick: function () {\n    return true;\n  }\n};\nvar DX_DIALOG_CLASSNAME = \"dx-dialog\";\nvar DX_DIALOG_WRAPPER_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-wrapper\");\nvar DX_DIALOG_ROOT_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-root\");\nvar DX_DIALOG_CONTENT_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-content\");\nvar DX_DIALOG_MESSAGE_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-message\");\nvar DX_DIALOG_BUTTONS_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-buttons\");\nvar DX_DIALOG_BUTTON_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-button\");\nvar DX_BUTTON_CLASSNAME = \"dx-button\";\nexport var FakeDialogComponent = Component.inherit({\n  ctor: function (element, options) {\n    this.callBase(options);\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: {\n        platform: \"ios\"\n      },\n      options: {\n        width: 276\n      }\n    }, {\n      device: {\n        platform: \"android\"\n      },\n      options: {\n        lWidth: \"60%\",\n        pWidth: \"80%\"\n      }\n    }]);\n  }\n});\nexport var title = \"\";\nexport var custom = function (options) {\n  var deferred = new Deferred();\n  var defaultOptions = new FakeDialogComponent().option();\n  options = extend(defaultOptions, options);\n  var $element = $(\"<div>\").addClass(DX_DIALOG_CLASSNAME).appendTo(getViewport());\n  var isMessageDefined = (\"message\" in options);\n  var isMessageHtmlDefined = (\"messageHtml\" in options);\n\n  if (isMessageDefined) {\n    errors.log(\"W1013\");\n  }\n\n  var messageHtml = String(isMessageHtmlDefined ? options.messageHtml : options.message);\n  var $message = $(\"<div>\").addClass(DX_DIALOG_MESSAGE_CLASSNAME).html(messageHtml);\n  var popupToolbarItems = [];\n  each(options.buttons || [DEFAULT_BUTTON], function () {\n    var action = new Action(this.onClick, {\n      context: popupInstance\n    });\n    popupToolbarItems.push({\n      toolbar: \"bottom\",\n      location: devices.current().android ? \"after\" : \"center\",\n      widget: \"dxButton\",\n      options: extend({}, this, {\n        onClick: function () {\n          var result = action.execute(...arguments);\n          hide(result);\n        }\n      })\n    });\n  });\n  var popupInstance = new Popup($element, extend({\n    title: options.title || title,\n    showTitle: ensureDefined(options.showTitle, true),\n    dragEnabled: ensureDefined(options.dragEnabled, true),\n    height: \"auto\",\n    width: function () {\n      var isPortrait = getHeight(window) > getWidth(window);\n      var key = (isPortrait ? \"p\" : \"l\") + \"Width\";\n      var widthOption = Object.prototype.hasOwnProperty.call(options, key) ? options[key] : options.width;\n      return isFunction(widthOption) ? widthOption() : widthOption;\n    },\n    showCloseButton: options.showCloseButton || false,\n    ignoreChildEvents: false,\n    onContentReady: function (args) {\n      args.component.$content().addClass(DX_DIALOG_CONTENT_CLASSNAME).append($message);\n    },\n    onShowing: function (e) {\n      e.component.bottomToolbar().addClass(DX_DIALOG_BUTTONS_CLASSNAME).find(\".\".concat(DX_BUTTON_CLASSNAME)).addClass(DX_DIALOG_BUTTON_CLASSNAME);\n      resetActiveElement();\n    },\n    onShown: function (e) {\n      var $firstButton = e.component.bottomToolbar().find(\".\".concat(DX_BUTTON_CLASSNAME)).first();\n      eventsEngine.trigger($firstButton, \"focus\");\n    },\n    onHiding: function () {\n      deferred.reject();\n    },\n    toolbarItems: popupToolbarItems,\n    animation: {\n      show: {\n        type: \"pop\",\n        duration: 400\n      },\n      hide: {\n        type: \"pop\",\n        duration: 400,\n        to: {\n          opacity: 0,\n          scale: 0\n        },\n        from: {\n          opacity: 1,\n          scale: 1\n        }\n      }\n    },\n    rtlEnabled: config().rtlEnabled,\n    position: {\n      boundaryOffset: {\n        h: 10,\n        v: 0\n      }\n    }\n  }, options.popupOptions));\n  popupInstance.$wrapper().addClass(DX_DIALOG_WRAPPER_CLASSNAME);\n\n  if (options.position) {\n    popupInstance.option(\"position\", options.position);\n  }\n\n  popupInstance.$wrapper().addClass(DX_DIALOG_ROOT_CLASSNAME);\n\n  function hide(value) {\n    deferred.resolve(value);\n    popupInstance.hide().done(function () {\n      popupInstance.$element().remove();\n    });\n  }\n\n  return {\n    show: function () {\n      popupInstance.show();\n      return deferred.promise();\n    },\n    hide: hide\n  };\n};\nexport var alert = function (messageHtml, title, showTitle) {\n  var options = isPlainObject(messageHtml) ? messageHtml : {\n    title: title,\n    messageHtml: messageHtml,\n    showTitle: showTitle,\n    dragEnabled: showTitle\n  };\n  return custom(options).show();\n};\nexport var confirm = function (messageHtml, title, showTitle) {\n  var options = isPlainObject(messageHtml) ? messageHtml : {\n    title: title,\n    messageHtml: messageHtml,\n    showTitle: showTitle,\n    buttons: [{\n      text: messageLocalization.format(\"Yes\"),\n      onClick: function () {\n        return true;\n      }\n    }, {\n      text: messageLocalization.format(\"No\"),\n      onClick: function () {\n        return false;\n      }\n    }],\n    dragEnabled: showTitle\n  };\n  return custom(options).show();\n};","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/ui/dialog.js"],"names":["getHeight","getWidth","$","Component","Action","devices","config","resetActiveElement","Deferred","isFunction","isPlainObject","each","extend","getWindow","eventsEngine","value","getViewport","messageLocalization","errors","Popup","ensureDefined","window","DEFAULT_BUTTON","text","onClick","DX_DIALOG_CLASSNAME","DX_DIALOG_WRAPPER_CLASSNAME","concat","DX_DIALOG_ROOT_CLASSNAME","DX_DIALOG_CONTENT_CLASSNAME","DX_DIALOG_MESSAGE_CLASSNAME","DX_DIALOG_BUTTONS_CLASSNAME","DX_DIALOG_BUTTON_CLASSNAME","DX_BUTTON_CLASSNAME","FakeDialogComponent","inherit","ctor","element","options","callBase","_defaultOptionsRules","device","platform","width","lWidth","pWidth","title","custom","deferred","defaultOptions","option","$element","addClass","appendTo","isMessageDefined","isMessageHtmlDefined","log","messageHtml","String","message","$message","html","popupToolbarItems","buttons","action","context","popupInstance","push","toolbar","location","current","android","widget","result","execute","arguments","hide","showTitle","dragEnabled","height","isPortrait","key","widthOption","Object","prototype","hasOwnProperty","call","showCloseButton","ignoreChildEvents","onContentReady","args","component","$content","append","onShowing","e","bottomToolbar","find","onShown","$firstButton","first","trigger","onHiding","reject","toolbarItems","animation","show","type","duration","to","opacity","scale","from","rtlEnabled","position","boundaryOffset","h","v","popupOptions","$wrapper","resolve","done","remove","promise","alert","confirm","format"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/dialog.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getHeight,\r\n    getWidth\r\n} from \"../core/utils/size\";\r\nimport $ from \"../core/renderer\";\r\nimport {\r\n    Component\r\n} from \"../core/component\";\r\nimport Action from \"../core/action\";\r\nimport devices from \"../core/devices\";\r\nimport config from \"../core/config\";\r\nimport {\r\n    resetActiveElement\r\n} from \"../core/utils/dom\";\r\nimport {\r\n    Deferred\r\n} from \"../core/utils/deferred\";\r\nimport {\r\n    isFunction,\r\n    isPlainObject\r\n} from \"../core/utils/type\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    getWindow\r\n} from \"../core/utils/window\";\r\nimport eventsEngine from \"../events/core/events_engine\";\r\nimport {\r\n    value as getViewport\r\n} from \"../core/utils/view_port\";\r\nimport messageLocalization from \"../localization/message\";\r\nimport errors from \"./widget/ui.errors\";\r\nimport Popup from \"./popup\";\r\nimport {\r\n    ensureDefined\r\n} from \"../core/utils/common\";\r\nvar window = getWindow();\r\nvar DEFAULT_BUTTON = {\r\n    text: \"OK\",\r\n    onClick: function() {\r\n        return true\r\n    }\r\n};\r\nvar DX_DIALOG_CLASSNAME = \"dx-dialog\";\r\nvar DX_DIALOG_WRAPPER_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-wrapper\");\r\nvar DX_DIALOG_ROOT_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-root\");\r\nvar DX_DIALOG_CONTENT_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-content\");\r\nvar DX_DIALOG_MESSAGE_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-message\");\r\nvar DX_DIALOG_BUTTONS_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-buttons\");\r\nvar DX_DIALOG_BUTTON_CLASSNAME = \"\".concat(DX_DIALOG_CLASSNAME, \"-button\");\r\nvar DX_BUTTON_CLASSNAME = \"dx-button\";\r\nexport var FakeDialogComponent = Component.inherit({\r\n    ctor: function(element, options) {\r\n        this.callBase(options)\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: {\r\n                platform: \"ios\"\r\n            },\r\n            options: {\r\n                width: 276\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"android\"\r\n            },\r\n            options: {\r\n                lWidth: \"60%\",\r\n                pWidth: \"80%\"\r\n            }\r\n        }])\r\n    }\r\n});\r\nexport var title = \"\";\r\nexport var custom = function(options) {\r\n    var deferred = new Deferred;\r\n    var defaultOptions = (new FakeDialogComponent).option();\r\n    options = extend(defaultOptions, options);\r\n    var $element = $(\"<div>\").addClass(DX_DIALOG_CLASSNAME).appendTo(getViewport());\r\n    var isMessageDefined = \"message\" in options;\r\n    var isMessageHtmlDefined = \"messageHtml\" in options;\r\n    if (isMessageDefined) {\r\n        errors.log(\"W1013\")\r\n    }\r\n    var messageHtml = String(isMessageHtmlDefined ? options.messageHtml : options.message);\r\n    var $message = $(\"<div>\").addClass(DX_DIALOG_MESSAGE_CLASSNAME).html(messageHtml);\r\n    var popupToolbarItems = [];\r\n    each(options.buttons || [DEFAULT_BUTTON], (function() {\r\n        var action = new Action(this.onClick, {\r\n            context: popupInstance\r\n        });\r\n        popupToolbarItems.push({\r\n            toolbar: \"bottom\",\r\n            location: devices.current().android ? \"after\" : \"center\",\r\n            widget: \"dxButton\",\r\n            options: extend({}, this, {\r\n                onClick: function() {\r\n                    var result = action.execute(...arguments);\r\n                    hide(result)\r\n                }\r\n            })\r\n        })\r\n    }));\r\n    var popupInstance = new Popup($element, extend({\r\n        title: options.title || title,\r\n        showTitle: ensureDefined(options.showTitle, true),\r\n        dragEnabled: ensureDefined(options.dragEnabled, true),\r\n        height: \"auto\",\r\n        width: function() {\r\n            var isPortrait = getHeight(window) > getWidth(window);\r\n            var key = (isPortrait ? \"p\" : \"l\") + \"Width\";\r\n            var widthOption = Object.prototype.hasOwnProperty.call(options, key) ? options[key] : options.width;\r\n            return isFunction(widthOption) ? widthOption() : widthOption\r\n        },\r\n        showCloseButton: options.showCloseButton || false,\r\n        ignoreChildEvents: false,\r\n        onContentReady: function(args) {\r\n            args.component.$content().addClass(DX_DIALOG_CONTENT_CLASSNAME).append($message)\r\n        },\r\n        onShowing: function(e) {\r\n            e.component.bottomToolbar().addClass(DX_DIALOG_BUTTONS_CLASSNAME).find(\".\".concat(DX_BUTTON_CLASSNAME)).addClass(DX_DIALOG_BUTTON_CLASSNAME);\r\n            resetActiveElement()\r\n        },\r\n        onShown: function(e) {\r\n            var $firstButton = e.component.bottomToolbar().find(\".\".concat(DX_BUTTON_CLASSNAME)).first();\r\n            eventsEngine.trigger($firstButton, \"focus\")\r\n        },\r\n        onHiding: function() {\r\n            deferred.reject()\r\n        },\r\n        toolbarItems: popupToolbarItems,\r\n        animation: {\r\n            show: {\r\n                type: \"pop\",\r\n                duration: 400\r\n            },\r\n            hide: {\r\n                type: \"pop\",\r\n                duration: 400,\r\n                to: {\r\n                    opacity: 0,\r\n                    scale: 0\r\n                },\r\n                from: {\r\n                    opacity: 1,\r\n                    scale: 1\r\n                }\r\n            }\r\n        },\r\n        rtlEnabled: config().rtlEnabled,\r\n        position: {\r\n            boundaryOffset: {\r\n                h: 10,\r\n                v: 0\r\n            }\r\n        }\r\n    }, options.popupOptions));\r\n    popupInstance.$wrapper().addClass(DX_DIALOG_WRAPPER_CLASSNAME);\r\n    if (options.position) {\r\n        popupInstance.option(\"position\", options.position)\r\n    }\r\n    popupInstance.$wrapper().addClass(DX_DIALOG_ROOT_CLASSNAME);\r\n\r\n    function hide(value) {\r\n        deferred.resolve(value);\r\n        popupInstance.hide().done((function() {\r\n            popupInstance.$element().remove()\r\n        }))\r\n    }\r\n    return {\r\n        show: function() {\r\n            popupInstance.show();\r\n            return deferred.promise()\r\n        },\r\n        hide: hide\r\n    }\r\n};\r\nexport var alert = function(messageHtml, title, showTitle) {\r\n    var options = isPlainObject(messageHtml) ? messageHtml : {\r\n        title: title,\r\n        messageHtml: messageHtml,\r\n        showTitle: showTitle,\r\n        dragEnabled: showTitle\r\n    };\r\n    return custom(options).show()\r\n};\r\nexport var confirm = function(messageHtml, title, showTitle) {\r\n    var options = isPlainObject(messageHtml) ? messageHtml : {\r\n        title: title,\r\n        messageHtml: messageHtml,\r\n        showTitle: showTitle,\r\n        buttons: [{\r\n            text: messageLocalization.format(\"Yes\"),\r\n            onClick: function() {\r\n                return true\r\n            }\r\n        }, {\r\n            text: messageLocalization.format(\"No\"),\r\n            onClick: function() {\r\n                return false\r\n            }\r\n        }],\r\n        dragEnabled: showTitle\r\n    };\r\n    return custom(options).show()\r\n};\r\n"]},"metadata":{},"sourceType":"module"}