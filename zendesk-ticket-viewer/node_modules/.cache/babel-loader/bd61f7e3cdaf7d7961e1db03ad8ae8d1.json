{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/chart_components/tracker.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport domAdapter from \"../../core/dom_adapter\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { name as clickEventName } from \"../../events/click\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each as _each } from \"../../core/utils/iterator\";\nimport consts from \"../components/consts\";\nimport { getDistance, pointInCanvas as inCanvas, normalizeEnum as _normalizeEnum } from \"../core/utils\";\nimport pointerEvents from \"../../events/pointer\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport { isDefined } from \"../../core/utils/type\";\nimport { noop as _noop } from \"../../core/utils/common\";\nvar _floor = Math.floor;\nvar eventsConsts = consts.events;\nvar statesConsts = consts.states;\nvar HOVER_STATE = statesConsts.hoverMark;\nvar NORMAL_STATE = statesConsts.normalMark;\nvar EVENT_NS = \"dxChartTracker\";\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\nvar LEGEND_CLICK = \"legendClick\";\nvar SERIES_CLICK = \"seriesClick\";\nvar POINT_CLICK = \"pointClick\";\nvar POINT_DATA = \"chart-data-point\";\nvar SERIES_DATA = \"chart-data-series\";\nvar ARG_DATA = \"chart-data-argument\";\nvar DELAY = 100;\nvar HOLD_TIMEOUT = 300;\nvar NONE_MODE = \"none\";\nvar ALL_ARGUMENT_POINTS_MODE = \"allargumentpoints\";\nvar INCLUDE_POINTS_MODE = \"includepoints\";\nvar EXLUDE_POINTS_MODE = \"excludepoints\";\nvar LEGEND_HOVER_MODES = [INCLUDE_POINTS_MODE, EXLUDE_POINTS_MODE, NONE_MODE];\n\nfunction getData(event, dataKey, tryCheckParent) {\n  var target = event.target;\n\n  if (\"tspan\" === target.tagName) {\n    return target.parentNode[dataKey];\n  }\n\n  var data = target[dataKey];\n\n  if (tryCheckParent && !isDefined(data)) {\n    return function getParentData(node) {\n      if (node.parentNode) {\n        if (isDefined(node.parentNode[dataKey])) {\n          return node.parentNode[dataKey];\n        } else {\n          return getParentData(node.parentNode);\n        }\n      }\n\n      return;\n    }(target);\n  }\n\n  return data;\n}\n\nfunction eventCanceled(event, target) {\n  return event.cancel || !target.getOptions();\n}\n\nfunction correctLegendHoverMode(mode) {\n  if (LEGEND_HOVER_MODES.indexOf(mode) > -1) {\n    return mode;\n  } else {\n    return INCLUDE_POINTS_MODE;\n  }\n}\n\nfunction correctHoverMode(target) {\n  var mode = target.getOptions().hoverMode;\n  return mode === NONE_MODE ? mode : ALL_ARGUMENT_POINTS_MODE;\n}\n\nvar baseTrackerPrototype = {\n  ctor: function (options) {\n    var that = this;\n    var data = {\n      tracker: that\n    };\n    that._renderer = options.renderer;\n    that._legend = options.legend;\n    that._tooltip = options.tooltip;\n    that._eventTrigger = options.eventTrigger;\n    that._seriesGroup = options.seriesGroup;\n    options.seriesGroup.off(DOT_EVENT_NS).on(addNamespace(eventsConsts.showPointTooltip, EVENT_NS), data, that._showPointTooltip).on(addNamespace(eventsConsts.hidePointTooltip, EVENT_NS), data, that._hidePointTooltip);\n\n    that._renderer.root.off(DOT_EVENT_NS).on(POINTER_ACTION, data, that._pointerHandler).on(addNamespace(pointerEvents.up, EVENT_NS), () => clearTimeout(that._holdTimer)).on(addNamespace(clickEventName, EVENT_NS), data, that._clickHandler);\n  },\n  update: function (options) {\n    this._chart = options.chart;\n  },\n\n  updateSeries(series, resetDecorations) {\n    var that = this;\n    var noHoveredSeries = !(null !== series && void 0 !== series && series.some(s => s === that.hoveredSeries) || that._hoveredPoint && that._hoveredPoint.series);\n\n    if (that._storedSeries !== series) {\n      that._storedSeries = series || [];\n    }\n\n    if (noHoveredSeries) {\n      that._clean();\n\n      that._renderer.initHatching();\n    }\n\n    if (resetDecorations) {\n      that.clearSelection();\n\n      if (!noHoveredSeries) {\n        that._hideTooltip(that.pointAtShownTooltip);\n\n        that.clearHover();\n      }\n    }\n  },\n\n  setCanvases: function (mainCanvas, paneCanvases) {\n    this._mainCanvas = mainCanvas;\n    this._canvases = paneCanvases;\n  },\n  repairTooltip: function () {\n    var point = this.pointAtShownTooltip;\n\n    if (!point || !point.series || !point.isVisible()) {\n      this._hideTooltip(point, true);\n    } else {\n      this._showTooltip(point);\n    }\n  },\n  _setHoveredPoint: function (point) {\n    if (point === this._hoveredPoint) {\n      return;\n    }\n\n    this._releaseHoveredPoint();\n\n    point.hover();\n    this._hoveredPoint = point;\n  },\n  _releaseHoveredPoint: function () {\n    if (this._hoveredPoint && this._hoveredPoint.getOptions()) {\n      this._hoveredPoint.clearHover();\n\n      this._hoveredPoint = null;\n\n      if (this._tooltip.isEnabled()) {\n        this._hideTooltip(this._hoveredPoint);\n      }\n    }\n  },\n  _setHoveredSeries: function (series, mode) {\n    this._releaseHoveredSeries();\n\n    this._releaseHoveredPoint();\n\n    series.hover(mode);\n    this.hoveredSeries = series;\n  },\n\n  _releaseHoveredSeries() {\n    if (this.hoveredSeries) {\n      this.hoveredSeries.clearHover();\n      this.hoveredSeries = null;\n    }\n  },\n\n  clearSelection() {\n    this._storedSeries.forEach(series => {\n      if (series) {\n        series.clearSelection();\n        series.getPoints().forEach(point => point.clearSelection());\n      }\n    });\n  },\n\n  _clean: function () {\n    this.hoveredPoint = this.hoveredSeries = this._hoveredArgumentPoints = null;\n\n    this._hideTooltip(this.pointAtShownTooltip);\n  },\n  clearHover: function () {\n    this._resetHoveredArgument();\n\n    this._releaseHoveredSeries();\n\n    this._releaseHoveredPoint();\n  },\n  _hideTooltip: function (point, silent) {\n    if (!this._tooltip || point && this.pointAtShownTooltip !== point) {\n      return;\n    }\n\n    if (!silent && this.pointAtShownTooltip) {\n      this.pointAtShownTooltip = null;\n    }\n\n    this._tooltip.hide();\n  },\n  _showTooltip: function (point) {\n    var that = this;\n    var tooltipFormatObject;\n    var eventData = {\n      target: point\n    };\n\n    if (null !== point && void 0 !== point && point.getOptions()) {\n      tooltipFormatObject = point.getTooltipFormatObject(that._tooltip, that._tooltip.isShared() && that._chart.getStackedPoints(point));\n\n      if (!isDefined(tooltipFormatObject.valueText) && !tooltipFormatObject.points || !point.isVisible()) {\n        return;\n      }\n\n      var coords = point.getTooltipParams(that._tooltip.getLocation());\n\n      var rootOffset = that._renderer.getRootOffset();\n\n      coords.x += rootOffset.left;\n      coords.y += rootOffset.top;\n\n      var callback = result => {\n        result && (that.pointAtShownTooltip = point);\n      };\n\n      callback(that._tooltip.show(tooltipFormatObject, coords, eventData, void 0, callback));\n    }\n  },\n  _showPointTooltip: function (event, point) {\n    var that = event.data.tracker;\n    var pointWithTooltip = that.pointAtShownTooltip;\n\n    if (pointWithTooltip && pointWithTooltip !== point) {\n      that._hideTooltip(pointWithTooltip);\n    }\n\n    that._showTooltip(point);\n  },\n  _hidePointTooltip: function (event, point) {\n    event.data.tracker._hideTooltip(point);\n  },\n  _enableOutHandler: function () {\n    if (this._outHandler) {\n      return;\n    }\n\n    var that = this;\n\n    var handler = function (e) {\n      var rootOffset = that._renderer.getRootOffset();\n\n      var x = _floor(e.pageX - rootOffset.left);\n\n      var y = _floor(e.pageY - rootOffset.top);\n\n      if (!inCanvas(that._mainCanvas, x, y) && !that._isCursorOnTooltip(e)) {\n        that._pointerOut();\n\n        that._disableOutHandler();\n      }\n    };\n\n    eventsEngine.on(domAdapter.getDocument(), POINTER_ACTION, handler);\n    this._outHandler = handler;\n  },\n  _isCursorOnTooltip: function (e) {\n    return this._tooltip.isEnabled() && this._tooltip.isCursorOnTooltip(e.pageX, e.pageY);\n  },\n  _disableOutHandler: function () {\n    this._outHandler && eventsEngine.off(domAdapter.getDocument(), POINTER_ACTION, this._outHandler);\n    this._outHandler = null;\n  },\n  stopCurrentHandling: function () {\n    this._pointerOut(true);\n  },\n  _pointerOut: function (force) {\n    this.clearHover();\n    (force || this._tooltip.isEnabled()) && this._hideTooltip(this.pointAtShownTooltip);\n  },\n  _triggerLegendClick: function (eventArgs, elementClick) {\n    var eventTrigger = this._eventTrigger;\n    eventTrigger(LEGEND_CLICK, eventArgs, function () {\n      !eventCanceled(eventArgs.event, eventArgs.target) && eventTrigger(elementClick, eventArgs);\n    });\n  },\n  _hoverLegendItem: function (x, y) {\n    var item = this._legend.getItemByCoord(x, y);\n\n    var series;\n    var legendHoverMode = correctLegendHoverMode(this._legend.getOptions().hoverMode);\n\n    if (item) {\n      series = this._storedSeries[item.id];\n\n      if (!series.isHovered() || series.lastHoverMode !== legendHoverMode) {\n        this._setHoveredSeries(series, legendHoverMode);\n      }\n\n      this._tooltip.isEnabled() && this._hideTooltip(this.pointAtShownTooltip);\n    } else {\n      this.clearHover();\n    }\n  },\n  _hoverArgument: function (argument, argumentIndex) {\n    var hoverMode = this._getArgumentHoverMode();\n\n    if (isDefined(argument)) {\n      this._releaseHoveredPoint();\n\n      this._hoveredArgument = argument;\n      this._argumentIndex = argumentIndex;\n\n      this._notifySeries({\n        action: \"pointHover\",\n        notifyLegend: this._notifyLegendOnHoverArgument,\n        target: {\n          argument: argument,\n          fullState: HOVER_STATE,\n          argumentIndex: argumentIndex,\n          getOptions: function () {\n            return {\n              hoverMode: hoverMode\n            };\n          }\n        }\n      });\n    }\n  },\n  _resetHoveredArgument: function () {\n    var hoverMode;\n\n    if (isDefined(this._hoveredArgument)) {\n      hoverMode = this._getArgumentHoverMode();\n\n      this._notifySeries({\n        action: \"clearPointHover\",\n        notifyLegend: this._notifyLegendOnHoverArgument,\n        target: {\n          fullState: NORMAL_STATE,\n          argumentIndex: this._argumentIndex,\n          argument: this._hoveredArgument,\n          getOptions: function () {\n            return {\n              hoverMode: hoverMode\n            };\n          }\n        }\n      });\n\n      this._hoveredArgument = null;\n    }\n  },\n  _notifySeries: function (data) {\n    this._storedSeries.forEach(function (series) {\n      series.notify(data);\n    });\n  },\n  _pointerHandler: function (e) {\n    var _series;\n\n    var that = e.data.tracker;\n\n    var rootOffset = that._renderer.getRootOffset();\n\n    var x = _floor(e.pageX - rootOffset.left);\n\n    var y = _floor(e.pageY - rootOffset.top);\n\n    var canvas = that._getCanvas(x, y);\n\n    var series = getData(e, SERIES_DATA);\n    var point = getData(e, POINT_DATA) || (null === (_series = series) || void 0 === _series ? void 0 : _series.getPointByCoord(x, y));\n    that._isHolding = false;\n    clearTimeout(that._holdTimer);\n\n    if (e.type === pointerEvents.down) {\n      that._holdTimer = setTimeout(() => that._isHolding = true, HOLD_TIMEOUT);\n    }\n\n    if (point && !point.getMarkerVisibility()) {\n      point = void 0;\n    }\n\n    that._enableOutHandler();\n\n    if (that._legend.coordsIn(x, y)) {\n      that._hoverLegendItem(x, y);\n\n      return;\n    }\n\n    if (that.hoveredSeries && that.hoveredSeries !== that._stuckSeries) {\n      that._releaseHoveredSeries();\n    }\n\n    if (that._hoverArgumentAxis(x, y, e)) {\n      return;\n    }\n\n    if (that._isPointerOut(canvas, point)) {\n      that._pointerOut();\n    }\n\n    if (!canvas && !point) {\n      return;\n    }\n\n    if (series && !point) {\n      point = series.getNeighborPoint(x, y);\n\n      if (!that._stickyHovering && point && !point.coordsIn(x, y)) {\n        point = null;\n      }\n\n      if (series !== that.hoveredSeries) {\n        that._setTimeout(function () {\n          that._setHoveredSeries(series);\n\n          that._setStuckSeries(e, series, x, y);\n\n          that._pointerComplete(point, x, y);\n        }, series);\n\n        return;\n      }\n    } else if (point) {\n      if (e.type !== pointerEvents.move && \"touch\" !== e.pointerType) {\n        return;\n      }\n\n      if (that.hoveredSeries) {\n        that._setTimeout(() => that._pointerOnPoint(point, x, y, e), point);\n      } else {\n        that._pointerOnPoint(point, x, y, e);\n      }\n\n      return;\n    } else if (that._setStuckSeries(e, void 0, x, y) && that._stickyHovering) {\n      var _point;\n\n      series = that._stuckSeries;\n      point = series.getNeighborPoint(x, y);\n\n      that._releaseHoveredSeries();\n\n      (null === (_point = point) || void 0 === _point ? void 0 : _point.getMarkerVisibility()) && that._setHoveredPoint(point);\n    } else if (!that._stickyHovering) {\n      that._pointerOut();\n    }\n\n    that._pointerComplete(point, x, y);\n  },\n  _pointerOnPoint: function (point, x, y) {\n    this._resetHoveredArgument();\n\n    this._setHoveredPoint(point);\n\n    this._pointerComplete(point, x, y);\n  },\n  _pointerComplete: function (point) {\n    this.pointAtShownTooltip !== point && this._tooltip.isEnabled() && this._showTooltip(point);\n  },\n  _clickHandler: function (e) {\n    var _point2;\n\n    var that = e.data.tracker;\n\n    if (that._isHolding) {\n      return;\n    }\n\n    var rootOffset = that._renderer.getRootOffset();\n\n    var x = _floor(e.pageX - rootOffset.left);\n\n    var y = _floor(e.pageY - rootOffset.top);\n\n    var point = getData(e, POINT_DATA);\n    var series = that._stuckSeries || getData(e, SERIES_DATA) || (null === (_point2 = point) || void 0 === _point2 ? void 0 : _point2.series);\n    var axis = that._argumentAxis;\n\n    if (that._legend.coordsIn(x, y)) {\n      var item = that._legend.getItemByCoord(x, y);\n\n      if (item) {\n        that._legendClick(item, e);\n      }\n    } else if (null !== axis && void 0 !== axis && axis.coordsIn(x, y)) {\n      var argument = getData(e, ARG_DATA, true);\n\n      if (isDefined(argument)) {\n        that._eventTrigger(\"argumentAxisClick\", {\n          argument: argument,\n          event: e\n        });\n      }\n    } else if (series) {\n      var _point3;\n\n      point = point || series.getPointByCoord(x, y);\n\n      if (null !== (_point3 = point) && void 0 !== _point3 && _point3.getMarkerVisibility()) {\n        that._pointClick(point, e);\n      } else {\n        getData(e, SERIES_DATA) && that._eventTrigger(SERIES_CLICK, {\n          target: series,\n          event: e\n        });\n      }\n    }\n  },\n  dispose: function () {\n    this._disableOutHandler();\n\n    this._renderer.root.off(DOT_EVENT_NS);\n\n    this._seriesGroup.off(DOT_EVENT_NS);\n  }\n};\nexport var ChartTracker = function (options) {\n  this.ctor(options);\n};\nextend(ChartTracker.prototype, baseTrackerPrototype, {\n  _pointClick: function (point, event) {\n    var eventTrigger = this._eventTrigger;\n    var series = point.series;\n    eventTrigger(POINT_CLICK, {\n      target: point,\n      event: event\n    }, function () {\n      !eventCanceled(event, series) && eventTrigger(SERIES_CLICK, {\n        target: series,\n        event: event\n      });\n    });\n  },\n  update: function (options) {\n    baseTrackerPrototype.update.call(this, options);\n    this._argumentAxis = options.argumentAxis || {};\n    this._axisHoverEnabled = this._argumentAxis && _normalizeEnum(this._argumentAxis.getOptions().hoverMode) === ALL_ARGUMENT_POINTS_MODE;\n    this._rotated = options.rotated;\n    this._crosshair = options.crosshair;\n    this._stickyHovering = options.stickyHovering;\n  },\n  _getCanvas: function (x, y) {\n    var canvases = this._canvases || [];\n\n    for (var i = 0; i < canvases.length; i++) {\n      var c = canvases[i];\n\n      if (inCanvas(c, x, y)) {\n        return c;\n      }\n    }\n\n    return null;\n  },\n  _isPointerOut: function (canvas) {\n    return !canvas && this._stuckSeries;\n  },\n  _hideCrosshair: function () {\n    var _this$_crosshair;\n\n    null === (_this$_crosshair = this._crosshair) || void 0 === _this$_crosshair ? void 0 : _this$_crosshair.hide();\n  },\n  _moveCrosshair: function (point, x, y) {\n    if (this._crosshair && null !== point && void 0 !== point && point.isVisible()) {\n      this._crosshair.show({\n        point: point,\n        x: x,\n        y: y\n      });\n    }\n  },\n  _clean: function () {\n    baseTrackerPrototype._clean.call(this);\n\n    this._resetTimer();\n\n    this._stuckSeries = null;\n  },\n  _getSeriesForShared: function (x, y) {\n    var _point4;\n\n    var points = [];\n    var point = null;\n    var distance = 1 / 0;\n\n    if (this._tooltip.isShared() && !this.hoveredSeries) {\n      _each(this._storedSeries, function (_, series) {\n        var point = series.getNeighborPoint(x, y);\n        point && points.push(point);\n      });\n\n      _each(points, function (_, p) {\n        var coords = p.getCrosshairData(x, y);\n        var d = getDistance(x, y, coords.x, coords.y);\n\n        if (d < distance) {\n          point = p;\n          distance = d;\n        }\n      });\n    }\n\n    return null === (_point4 = point) || void 0 === _point4 ? void 0 : _point4.series;\n  },\n  _setTimeout: function (callback, keeper) {\n    var that = this;\n\n    if (that._timeoutKeeper !== keeper) {\n      that._resetTimer();\n\n      that._hoverTimeout = setTimeout(function () {\n        callback();\n        that._timeoutKeeper = null;\n      }, DELAY);\n      that._timeoutKeeper = keeper;\n    }\n  },\n  _resetTimer: function () {\n    clearTimeout(this._hoverTimeout);\n    this._timeoutKeeper = this._hoverTimeout = null;\n  },\n  _stopEvent: function (e) {\n    if (!isDefined(e.cancelable) || e.cancelable) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  },\n  _setStuckSeries: function (e, series, x, y) {\n    if (\"mouse\" !== e.pointerType) {\n      this._stuckSeries = null;\n    } else {\n      this._stuckSeries = series || this._stuckSeries || this._getSeriesForShared(x, y);\n    }\n\n    return !!this._stuckSeries;\n  },\n  _pointerOut: function () {\n    var that = this;\n    that._stuckSeries = null;\n\n    that._hideCrosshair();\n\n    that._resetTimer();\n\n    baseTrackerPrototype._pointerOut.apply(that, arguments);\n  },\n  _hoverArgumentAxis: function (x, y, e) {\n    this._resetHoveredArgument();\n\n    if (this._axisHoverEnabled && this._argumentAxis.coordsIn(x, y)) {\n      this._hoverArgument(getData(e, ARG_DATA, true));\n\n      return true;\n    }\n  },\n  _pointerComplete: function (point, x, y) {\n    this.hoveredSeries && this.hoveredSeries.updateHover(x, y);\n\n    this._resetTimer();\n\n    this._moveCrosshair(point, x, y);\n\n    baseTrackerPrototype._pointerComplete.call(this, point);\n  },\n  _legendClick: function (item, e) {\n    var series = this._storedSeries[item.id];\n\n    this._triggerLegendClick({\n      target: series,\n      event: e\n    }, SERIES_CLICK);\n  },\n  _hoverLegendItem: function (x, y) {\n    this._stuckSeries = null;\n\n    this._hideCrosshair();\n\n    baseTrackerPrototype._hoverLegendItem.call(this, x, y);\n  },\n  _pointerOnPoint: function (point, x, y, e) {\n    this._setStuckSeries(e, point.series, x, y);\n\n    this._releaseHoveredSeries();\n\n    baseTrackerPrototype._pointerOnPoint.call(this, point, x, y, e);\n  },\n  _notifyLegendOnHoverArgument: false,\n  _getArgumentHoverMode: function () {\n    return correctHoverMode(this._argumentAxis);\n  },\n  dispose: function () {\n    this._resetTimer();\n\n    baseTrackerPrototype.dispose.call(this);\n  }\n});\nexport var PieTracker = function (options) {\n  this.ctor(options);\n};\nextend(PieTracker.prototype, baseTrackerPrototype, {\n  _isPointerOut: function (_, point) {\n    return !point;\n  },\n  _legendClick: function (item, e) {\n    var points = [];\n\n    this._storedSeries.forEach(s => points.push.apply(points, s.getPointsByKeys(item.argument, item.argumentIndex)));\n\n    this._eventTrigger(LEGEND_CLICK, {\n      target: item.argument,\n      points: points,\n      event: e\n    });\n  },\n  _pointClick: function (point, e) {\n    this._eventTrigger(POINT_CLICK, {\n      target: point,\n      event: e\n    });\n  },\n  _hoverLegendItem: function (x, y) {\n    var item = this._legend.getItemByCoord(x, y);\n\n    if (item && this._hoveredArgument !== item.argument) {\n      this._resetHoveredArgument();\n\n      this._hoverArgument(item.argument, item.argumentIndex);\n    } else if (!item) {\n      this.clearHover();\n    }\n  },\n  _getArgumentHoverMode: function () {\n    return correctHoverMode(this._legend);\n  },\n  _hoverArgumentAxis: _noop,\n  _setStuckSeries: _noop,\n  _getCanvas: _noop,\n  _notifyLegendOnHoverArgument: true\n});","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/viz/chart_components/tracker.js"],"names":["domAdapter","eventsEngine","name","clickEventName","extend","each","_each","consts","getDistance","pointInCanvas","inCanvas","normalizeEnum","_normalizeEnum","pointerEvents","addNamespace","isDefined","noop","_noop","_floor","Math","floor","eventsConsts","events","statesConsts","states","HOVER_STATE","hoverMark","NORMAL_STATE","normalMark","EVENT_NS","DOT_EVENT_NS","POINTER_ACTION","down","move","LEGEND_CLICK","SERIES_CLICK","POINT_CLICK","POINT_DATA","SERIES_DATA","ARG_DATA","DELAY","HOLD_TIMEOUT","NONE_MODE","ALL_ARGUMENT_POINTS_MODE","INCLUDE_POINTS_MODE","EXLUDE_POINTS_MODE","LEGEND_HOVER_MODES","getData","event","dataKey","tryCheckParent","target","tagName","parentNode","data","getParentData","node","eventCanceled","cancel","getOptions","correctLegendHoverMode","mode","indexOf","correctHoverMode","hoverMode","baseTrackerPrototype","ctor","options","that","tracker","_renderer","renderer","_legend","legend","_tooltip","tooltip","_eventTrigger","eventTrigger","_seriesGroup","seriesGroup","off","on","showPointTooltip","_showPointTooltip","hidePointTooltip","_hidePointTooltip","root","_pointerHandler","up","clearTimeout","_holdTimer","_clickHandler","update","_chart","chart","updateSeries","series","resetDecorations","noHoveredSeries","some","s","hoveredSeries","_hoveredPoint","_storedSeries","_clean","initHatching","clearSelection","_hideTooltip","pointAtShownTooltip","clearHover","setCanvases","mainCanvas","paneCanvases","_mainCanvas","_canvases","repairTooltip","point","isVisible","_showTooltip","_setHoveredPoint","_releaseHoveredPoint","hover","isEnabled","_setHoveredSeries","_releaseHoveredSeries","forEach","getPoints","hoveredPoint","_hoveredArgumentPoints","_resetHoveredArgument","silent","hide","tooltipFormatObject","eventData","getTooltipFormatObject","isShared","getStackedPoints","valueText","points","coords","getTooltipParams","getLocation","rootOffset","getRootOffset","x","left","y","top","callback","result","show","pointWithTooltip","_enableOutHandler","_outHandler","handler","e","pageX","pageY","_isCursorOnTooltip","_pointerOut","_disableOutHandler","getDocument","isCursorOnTooltip","stopCurrentHandling","force","_triggerLegendClick","eventArgs","elementClick","_hoverLegendItem","item","getItemByCoord","legendHoverMode","id","isHovered","lastHoverMode","_hoverArgument","argument","argumentIndex","_getArgumentHoverMode","_hoveredArgument","_argumentIndex","_notifySeries","action","notifyLegend","_notifyLegendOnHoverArgument","fullState","notify","_series","canvas","_getCanvas","getPointByCoord","_isHolding","type","setTimeout","getMarkerVisibility","coordsIn","_stuckSeries","_hoverArgumentAxis","_isPointerOut","getNeighborPoint","_stickyHovering","_setTimeout","_setStuckSeries","_pointerComplete","pointerType","_pointerOnPoint","_point","_point2","axis","_argumentAxis","_legendClick","_point3","_pointClick","dispose","ChartTracker","prototype","call","argumentAxis","_axisHoverEnabled","_rotated","rotated","_crosshair","crosshair","stickyHovering","canvases","i","length","c","_hideCrosshair","_this$_crosshair","_moveCrosshair","_resetTimer","_getSeriesForShared","_point4","distance","_","push","p","getCrosshairData","d","keeper","_timeoutKeeper","_hoverTimeout","_stopEvent","cancelable","preventDefault","stopPropagation","apply","arguments","updateHover","PieTracker","getPointsByKeys"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/chart_components/tracker.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../events/click\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each as _each\r\n} from \"../../core/utils/iterator\";\r\nimport consts from \"../components/consts\";\r\nimport {\r\n    getDistance,\r\n    pointInCanvas as inCanvas,\r\n    normalizeEnum as _normalizeEnum\r\n} from \"../core/utils\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    noop as _noop\r\n} from \"../../core/utils/common\";\r\nvar _floor = Math.floor;\r\nvar eventsConsts = consts.events;\r\nvar statesConsts = consts.states;\r\nvar HOVER_STATE = statesConsts.hoverMark;\r\nvar NORMAL_STATE = statesConsts.normalMark;\r\nvar EVENT_NS = \"dxChartTracker\";\r\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\r\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\r\nvar LEGEND_CLICK = \"legendClick\";\r\nvar SERIES_CLICK = \"seriesClick\";\r\nvar POINT_CLICK = \"pointClick\";\r\nvar POINT_DATA = \"chart-data-point\";\r\nvar SERIES_DATA = \"chart-data-series\";\r\nvar ARG_DATA = \"chart-data-argument\";\r\nvar DELAY = 100;\r\nvar HOLD_TIMEOUT = 300;\r\nvar NONE_MODE = \"none\";\r\nvar ALL_ARGUMENT_POINTS_MODE = \"allargumentpoints\";\r\nvar INCLUDE_POINTS_MODE = \"includepoints\";\r\nvar EXLUDE_POINTS_MODE = \"excludepoints\";\r\nvar LEGEND_HOVER_MODES = [INCLUDE_POINTS_MODE, EXLUDE_POINTS_MODE, NONE_MODE];\r\n\r\nfunction getData(event, dataKey, tryCheckParent) {\r\n    var target = event.target;\r\n    if (\"tspan\" === target.tagName) {\r\n        return target.parentNode[dataKey]\r\n    }\r\n    var data = target[dataKey];\r\n    if (tryCheckParent && !isDefined(data)) {\r\n        return function getParentData(node) {\r\n            if (node.parentNode) {\r\n                if (isDefined(node.parentNode[dataKey])) {\r\n                    return node.parentNode[dataKey]\r\n                } else {\r\n                    return getParentData(node.parentNode)\r\n                }\r\n            }\r\n            return\r\n        }(target)\r\n    }\r\n    return data\r\n}\r\n\r\nfunction eventCanceled(event, target) {\r\n    return event.cancel || !target.getOptions()\r\n}\r\n\r\nfunction correctLegendHoverMode(mode) {\r\n    if (LEGEND_HOVER_MODES.indexOf(mode) > -1) {\r\n        return mode\r\n    } else {\r\n        return INCLUDE_POINTS_MODE\r\n    }\r\n}\r\n\r\nfunction correctHoverMode(target) {\r\n    var mode = target.getOptions().hoverMode;\r\n    return mode === NONE_MODE ? mode : ALL_ARGUMENT_POINTS_MODE\r\n}\r\nvar baseTrackerPrototype = {\r\n    ctor: function(options) {\r\n        var that = this;\r\n        var data = {\r\n            tracker: that\r\n        };\r\n        that._renderer = options.renderer;\r\n        that._legend = options.legend;\r\n        that._tooltip = options.tooltip;\r\n        that._eventTrigger = options.eventTrigger;\r\n        that._seriesGroup = options.seriesGroup;\r\n        options.seriesGroup.off(DOT_EVENT_NS).on(addNamespace(eventsConsts.showPointTooltip, EVENT_NS), data, that._showPointTooltip).on(addNamespace(eventsConsts.hidePointTooltip, EVENT_NS), data, that._hidePointTooltip);\r\n        that._renderer.root.off(DOT_EVENT_NS).on(POINTER_ACTION, data, that._pointerHandler).on(addNamespace(pointerEvents.up, EVENT_NS), () => clearTimeout(that._holdTimer)).on(addNamespace(clickEventName, EVENT_NS), data, that._clickHandler)\r\n    },\r\n    update: function(options) {\r\n        this._chart = options.chart\r\n    },\r\n    updateSeries(series, resetDecorations) {\r\n        var that = this;\r\n        var noHoveredSeries = !(null !== series && void 0 !== series && series.some(s => s === that.hoveredSeries) || that._hoveredPoint && that._hoveredPoint.series);\r\n        if (that._storedSeries !== series) {\r\n            that._storedSeries = series || []\r\n        }\r\n        if (noHoveredSeries) {\r\n            that._clean();\r\n            that._renderer.initHatching()\r\n        }\r\n        if (resetDecorations) {\r\n            that.clearSelection();\r\n            if (!noHoveredSeries) {\r\n                that._hideTooltip(that.pointAtShownTooltip);\r\n                that.clearHover()\r\n            }\r\n        }\r\n    },\r\n    setCanvases: function(mainCanvas, paneCanvases) {\r\n        this._mainCanvas = mainCanvas;\r\n        this._canvases = paneCanvases\r\n    },\r\n    repairTooltip: function() {\r\n        var point = this.pointAtShownTooltip;\r\n        if (!point || !point.series || !point.isVisible()) {\r\n            this._hideTooltip(point, true)\r\n        } else {\r\n            this._showTooltip(point)\r\n        }\r\n    },\r\n    _setHoveredPoint: function(point) {\r\n        if (point === this._hoveredPoint) {\r\n            return\r\n        }\r\n        this._releaseHoveredPoint();\r\n        point.hover();\r\n        this._hoveredPoint = point\r\n    },\r\n    _releaseHoveredPoint: function() {\r\n        if (this._hoveredPoint && this._hoveredPoint.getOptions()) {\r\n            this._hoveredPoint.clearHover();\r\n            this._hoveredPoint = null;\r\n            if (this._tooltip.isEnabled()) {\r\n                this._hideTooltip(this._hoveredPoint)\r\n            }\r\n        }\r\n    },\r\n    _setHoveredSeries: function(series, mode) {\r\n        this._releaseHoveredSeries();\r\n        this._releaseHoveredPoint();\r\n        series.hover(mode);\r\n        this.hoveredSeries = series\r\n    },\r\n    _releaseHoveredSeries() {\r\n        if (this.hoveredSeries) {\r\n            this.hoveredSeries.clearHover();\r\n            this.hoveredSeries = null\r\n        }\r\n    },\r\n    clearSelection() {\r\n        this._storedSeries.forEach(series => {\r\n            if (series) {\r\n                series.clearSelection();\r\n                series.getPoints().forEach(point => point.clearSelection())\r\n            }\r\n        })\r\n    },\r\n    _clean: function() {\r\n        this.hoveredPoint = this.hoveredSeries = this._hoveredArgumentPoints = null;\r\n        this._hideTooltip(this.pointAtShownTooltip)\r\n    },\r\n    clearHover: function() {\r\n        this._resetHoveredArgument();\r\n        this._releaseHoveredSeries();\r\n        this._releaseHoveredPoint()\r\n    },\r\n    _hideTooltip: function(point, silent) {\r\n        if (!this._tooltip || point && this.pointAtShownTooltip !== point) {\r\n            return\r\n        }\r\n        if (!silent && this.pointAtShownTooltip) {\r\n            this.pointAtShownTooltip = null\r\n        }\r\n        this._tooltip.hide()\r\n    },\r\n    _showTooltip: function(point) {\r\n        var that = this;\r\n        var tooltipFormatObject;\r\n        var eventData = {\r\n            target: point\r\n        };\r\n        if (null !== point && void 0 !== point && point.getOptions()) {\r\n            tooltipFormatObject = point.getTooltipFormatObject(that._tooltip, that._tooltip.isShared() && that._chart.getStackedPoints(point));\r\n            if (!isDefined(tooltipFormatObject.valueText) && !tooltipFormatObject.points || !point.isVisible()) {\r\n                return\r\n            }\r\n            var coords = point.getTooltipParams(that._tooltip.getLocation());\r\n            var rootOffset = that._renderer.getRootOffset();\r\n            coords.x += rootOffset.left;\r\n            coords.y += rootOffset.top;\r\n            var callback = result => {\r\n                result && (that.pointAtShownTooltip = point)\r\n            };\r\n            callback(that._tooltip.show(tooltipFormatObject, coords, eventData, void 0, callback))\r\n        }\r\n    },\r\n    _showPointTooltip: function(event, point) {\r\n        var that = event.data.tracker;\r\n        var pointWithTooltip = that.pointAtShownTooltip;\r\n        if (pointWithTooltip && pointWithTooltip !== point) {\r\n            that._hideTooltip(pointWithTooltip)\r\n        }\r\n        that._showTooltip(point)\r\n    },\r\n    _hidePointTooltip: function(event, point) {\r\n        event.data.tracker._hideTooltip(point)\r\n    },\r\n    _enableOutHandler: function() {\r\n        if (this._outHandler) {\r\n            return\r\n        }\r\n        var that = this;\r\n        var handler = function(e) {\r\n            var rootOffset = that._renderer.getRootOffset();\r\n            var x = _floor(e.pageX - rootOffset.left);\r\n            var y = _floor(e.pageY - rootOffset.top);\r\n            if (!inCanvas(that._mainCanvas, x, y) && !that._isCursorOnTooltip(e)) {\r\n                that._pointerOut();\r\n                that._disableOutHandler()\r\n            }\r\n        };\r\n        eventsEngine.on(domAdapter.getDocument(), POINTER_ACTION, handler);\r\n        this._outHandler = handler\r\n    },\r\n    _isCursorOnTooltip: function(e) {\r\n        return this._tooltip.isEnabled() && this._tooltip.isCursorOnTooltip(e.pageX, e.pageY)\r\n    },\r\n    _disableOutHandler: function() {\r\n        this._outHandler && eventsEngine.off(domAdapter.getDocument(), POINTER_ACTION, this._outHandler);\r\n        this._outHandler = null\r\n    },\r\n    stopCurrentHandling: function() {\r\n        this._pointerOut(true)\r\n    },\r\n    _pointerOut: function(force) {\r\n        this.clearHover();\r\n        (force || this._tooltip.isEnabled()) && this._hideTooltip(this.pointAtShownTooltip)\r\n    },\r\n    _triggerLegendClick: function(eventArgs, elementClick) {\r\n        var eventTrigger = this._eventTrigger;\r\n        eventTrigger(LEGEND_CLICK, eventArgs, (function() {\r\n            !eventCanceled(eventArgs.event, eventArgs.target) && eventTrigger(elementClick, eventArgs)\r\n        }))\r\n    },\r\n    _hoverLegendItem: function(x, y) {\r\n        var item = this._legend.getItemByCoord(x, y);\r\n        var series;\r\n        var legendHoverMode = correctLegendHoverMode(this._legend.getOptions().hoverMode);\r\n        if (item) {\r\n            series = this._storedSeries[item.id];\r\n            if (!series.isHovered() || series.lastHoverMode !== legendHoverMode) {\r\n                this._setHoveredSeries(series, legendHoverMode)\r\n            }\r\n            this._tooltip.isEnabled() && this._hideTooltip(this.pointAtShownTooltip)\r\n        } else {\r\n            this.clearHover()\r\n        }\r\n    },\r\n    _hoverArgument: function(argument, argumentIndex) {\r\n        var hoverMode = this._getArgumentHoverMode();\r\n        if (isDefined(argument)) {\r\n            this._releaseHoveredPoint();\r\n            this._hoveredArgument = argument;\r\n            this._argumentIndex = argumentIndex;\r\n            this._notifySeries({\r\n                action: \"pointHover\",\r\n                notifyLegend: this._notifyLegendOnHoverArgument,\r\n                target: {\r\n                    argument: argument,\r\n                    fullState: HOVER_STATE,\r\n                    argumentIndex: argumentIndex,\r\n                    getOptions: function() {\r\n                        return {\r\n                            hoverMode: hoverMode\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _resetHoveredArgument: function() {\r\n        var hoverMode;\r\n        if (isDefined(this._hoveredArgument)) {\r\n            hoverMode = this._getArgumentHoverMode();\r\n            this._notifySeries({\r\n                action: \"clearPointHover\",\r\n                notifyLegend: this._notifyLegendOnHoverArgument,\r\n                target: {\r\n                    fullState: NORMAL_STATE,\r\n                    argumentIndex: this._argumentIndex,\r\n                    argument: this._hoveredArgument,\r\n                    getOptions: function() {\r\n                        return {\r\n                            hoverMode: hoverMode\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            this._hoveredArgument = null\r\n        }\r\n    },\r\n    _notifySeries: function(data) {\r\n        this._storedSeries.forEach((function(series) {\r\n            series.notify(data)\r\n        }))\r\n    },\r\n    _pointerHandler: function(e) {\r\n        var _series;\r\n        var that = e.data.tracker;\r\n        var rootOffset = that._renderer.getRootOffset();\r\n        var x = _floor(e.pageX - rootOffset.left);\r\n        var y = _floor(e.pageY - rootOffset.top);\r\n        var canvas = that._getCanvas(x, y);\r\n        var series = getData(e, SERIES_DATA);\r\n        var point = getData(e, POINT_DATA) || (null === (_series = series) || void 0 === _series ? void 0 : _series.getPointByCoord(x, y));\r\n        that._isHolding = false;\r\n        clearTimeout(that._holdTimer);\r\n        if (e.type === pointerEvents.down) {\r\n            that._holdTimer = setTimeout(() => that._isHolding = true, HOLD_TIMEOUT)\r\n        }\r\n        if (point && !point.getMarkerVisibility()) {\r\n            point = void 0\r\n        }\r\n        that._enableOutHandler();\r\n        if (that._legend.coordsIn(x, y)) {\r\n            that._hoverLegendItem(x, y);\r\n            return\r\n        }\r\n        if (that.hoveredSeries && that.hoveredSeries !== that._stuckSeries) {\r\n            that._releaseHoveredSeries()\r\n        }\r\n        if (that._hoverArgumentAxis(x, y, e)) {\r\n            return\r\n        }\r\n        if (that._isPointerOut(canvas, point)) {\r\n            that._pointerOut()\r\n        }\r\n        if (!canvas && !point) {\r\n            return\r\n        }\r\n        if (series && !point) {\r\n            point = series.getNeighborPoint(x, y);\r\n            if (!that._stickyHovering && point && !point.coordsIn(x, y)) {\r\n                point = null\r\n            }\r\n            if (series !== that.hoveredSeries) {\r\n                that._setTimeout((function() {\r\n                    that._setHoveredSeries(series);\r\n                    that._setStuckSeries(e, series, x, y);\r\n                    that._pointerComplete(point, x, y)\r\n                }), series);\r\n                return\r\n            }\r\n        } else if (point) {\r\n            if (e.type !== pointerEvents.move && \"touch\" !== e.pointerType) {\r\n                return\r\n            }\r\n            if (that.hoveredSeries) {\r\n                that._setTimeout(() => that._pointerOnPoint(point, x, y, e), point)\r\n            } else {\r\n                that._pointerOnPoint(point, x, y, e)\r\n            }\r\n            return\r\n        } else if (that._setStuckSeries(e, void 0, x, y) && that._stickyHovering) {\r\n            var _point;\r\n            series = that._stuckSeries;\r\n            point = series.getNeighborPoint(x, y);\r\n            that._releaseHoveredSeries();\r\n            (null === (_point = point) || void 0 === _point ? void 0 : _point.getMarkerVisibility()) && that._setHoveredPoint(point)\r\n        } else if (!that._stickyHovering) {\r\n            that._pointerOut()\r\n        }\r\n        that._pointerComplete(point, x, y)\r\n    },\r\n    _pointerOnPoint: function(point, x, y) {\r\n        this._resetHoveredArgument();\r\n        this._setHoveredPoint(point);\r\n        this._pointerComplete(point, x, y)\r\n    },\r\n    _pointerComplete: function(point) {\r\n        this.pointAtShownTooltip !== point && this._tooltip.isEnabled() && this._showTooltip(point)\r\n    },\r\n    _clickHandler: function(e) {\r\n        var _point2;\r\n        var that = e.data.tracker;\r\n        if (that._isHolding) {\r\n            return\r\n        }\r\n        var rootOffset = that._renderer.getRootOffset();\r\n        var x = _floor(e.pageX - rootOffset.left);\r\n        var y = _floor(e.pageY - rootOffset.top);\r\n        var point = getData(e, POINT_DATA);\r\n        var series = that._stuckSeries || getData(e, SERIES_DATA) || (null === (_point2 = point) || void 0 === _point2 ? void 0 : _point2.series);\r\n        var axis = that._argumentAxis;\r\n        if (that._legend.coordsIn(x, y)) {\r\n            var item = that._legend.getItemByCoord(x, y);\r\n            if (item) {\r\n                that._legendClick(item, e)\r\n            }\r\n        } else if (null !== axis && void 0 !== axis && axis.coordsIn(x, y)) {\r\n            var argument = getData(e, ARG_DATA, true);\r\n            if (isDefined(argument)) {\r\n                that._eventTrigger(\"argumentAxisClick\", {\r\n                    argument: argument,\r\n                    event: e\r\n                })\r\n            }\r\n        } else if (series) {\r\n            var _point3;\r\n            point = point || series.getPointByCoord(x, y);\r\n            if (null !== (_point3 = point) && void 0 !== _point3 && _point3.getMarkerVisibility()) {\r\n                that._pointClick(point, e)\r\n            } else {\r\n                getData(e, SERIES_DATA) && that._eventTrigger(SERIES_CLICK, {\r\n                    target: series,\r\n                    event: e\r\n                })\r\n            }\r\n        }\r\n    },\r\n    dispose: function() {\r\n        this._disableOutHandler();\r\n        this._renderer.root.off(DOT_EVENT_NS);\r\n        this._seriesGroup.off(DOT_EVENT_NS)\r\n    }\r\n};\r\nexport var ChartTracker = function(options) {\r\n    this.ctor(options)\r\n};\r\nextend(ChartTracker.prototype, baseTrackerPrototype, {\r\n    _pointClick: function(point, event) {\r\n        var eventTrigger = this._eventTrigger;\r\n        var series = point.series;\r\n        eventTrigger(POINT_CLICK, {\r\n            target: point,\r\n            event: event\r\n        }, (function() {\r\n            !eventCanceled(event, series) && eventTrigger(SERIES_CLICK, {\r\n                target: series,\r\n                event: event\r\n            })\r\n        }))\r\n    },\r\n    update: function(options) {\r\n        baseTrackerPrototype.update.call(this, options);\r\n        this._argumentAxis = options.argumentAxis || {};\r\n        this._axisHoverEnabled = this._argumentAxis && _normalizeEnum(this._argumentAxis.getOptions().hoverMode) === ALL_ARGUMENT_POINTS_MODE;\r\n        this._rotated = options.rotated;\r\n        this._crosshair = options.crosshair;\r\n        this._stickyHovering = options.stickyHovering\r\n    },\r\n    _getCanvas: function(x, y) {\r\n        var canvases = this._canvases || [];\r\n        for (var i = 0; i < canvases.length; i++) {\r\n            var c = canvases[i];\r\n            if (inCanvas(c, x, y)) {\r\n                return c\r\n            }\r\n        }\r\n        return null\r\n    },\r\n    _isPointerOut: function(canvas) {\r\n        return !canvas && this._stuckSeries\r\n    },\r\n    _hideCrosshair: function() {\r\n        var _this$_crosshair;\r\n        null === (_this$_crosshair = this._crosshair) || void 0 === _this$_crosshair ? void 0 : _this$_crosshair.hide()\r\n    },\r\n    _moveCrosshair: function(point, x, y) {\r\n        if (this._crosshair && null !== point && void 0 !== point && point.isVisible()) {\r\n            this._crosshair.show({\r\n                point: point,\r\n                x: x,\r\n                y: y\r\n            })\r\n        }\r\n    },\r\n    _clean: function() {\r\n        baseTrackerPrototype._clean.call(this);\r\n        this._resetTimer();\r\n        this._stuckSeries = null\r\n    },\r\n    _getSeriesForShared: function(x, y) {\r\n        var _point4;\r\n        var points = [];\r\n        var point = null;\r\n        var distance = 1 / 0;\r\n        if (this._tooltip.isShared() && !this.hoveredSeries) {\r\n            _each(this._storedSeries, (function(_, series) {\r\n                var point = series.getNeighborPoint(x, y);\r\n                point && points.push(point)\r\n            }));\r\n            _each(points, (function(_, p) {\r\n                var coords = p.getCrosshairData(x, y);\r\n                var d = getDistance(x, y, coords.x, coords.y);\r\n                if (d < distance) {\r\n                    point = p;\r\n                    distance = d\r\n                }\r\n            }))\r\n        }\r\n        return null === (_point4 = point) || void 0 === _point4 ? void 0 : _point4.series\r\n    },\r\n    _setTimeout: function(callback, keeper) {\r\n        var that = this;\r\n        if (that._timeoutKeeper !== keeper) {\r\n            that._resetTimer();\r\n            that._hoverTimeout = setTimeout((function() {\r\n                callback();\r\n                that._timeoutKeeper = null\r\n            }), DELAY);\r\n            that._timeoutKeeper = keeper\r\n        }\r\n    },\r\n    _resetTimer: function() {\r\n        clearTimeout(this._hoverTimeout);\r\n        this._timeoutKeeper = this._hoverTimeout = null\r\n    },\r\n    _stopEvent: function(e) {\r\n        if (!isDefined(e.cancelable) || e.cancelable) {\r\n            e.preventDefault();\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n    _setStuckSeries: function(e, series, x, y) {\r\n        if (\"mouse\" !== e.pointerType) {\r\n            this._stuckSeries = null\r\n        } else {\r\n            this._stuckSeries = series || this._stuckSeries || this._getSeriesForShared(x, y)\r\n        }\r\n        return !!this._stuckSeries\r\n    },\r\n    _pointerOut: function() {\r\n        var that = this;\r\n        that._stuckSeries = null;\r\n        that._hideCrosshair();\r\n        that._resetTimer();\r\n        baseTrackerPrototype._pointerOut.apply(that, arguments)\r\n    },\r\n    _hoverArgumentAxis: function(x, y, e) {\r\n        this._resetHoveredArgument();\r\n        if (this._axisHoverEnabled && this._argumentAxis.coordsIn(x, y)) {\r\n            this._hoverArgument(getData(e, ARG_DATA, true));\r\n            return true\r\n        }\r\n    },\r\n    _pointerComplete: function(point, x, y) {\r\n        this.hoveredSeries && this.hoveredSeries.updateHover(x, y);\r\n        this._resetTimer();\r\n        this._moveCrosshair(point, x, y);\r\n        baseTrackerPrototype._pointerComplete.call(this, point)\r\n    },\r\n    _legendClick: function(item, e) {\r\n        var series = this._storedSeries[item.id];\r\n        this._triggerLegendClick({\r\n            target: series,\r\n            event: e\r\n        }, SERIES_CLICK)\r\n    },\r\n    _hoverLegendItem: function(x, y) {\r\n        this._stuckSeries = null;\r\n        this._hideCrosshair();\r\n        baseTrackerPrototype._hoverLegendItem.call(this, x, y)\r\n    },\r\n    _pointerOnPoint: function(point, x, y, e) {\r\n        this._setStuckSeries(e, point.series, x, y);\r\n        this._releaseHoveredSeries();\r\n        baseTrackerPrototype._pointerOnPoint.call(this, point, x, y, e)\r\n    },\r\n    _notifyLegendOnHoverArgument: false,\r\n    _getArgumentHoverMode: function() {\r\n        return correctHoverMode(this._argumentAxis)\r\n    },\r\n    dispose: function() {\r\n        this._resetTimer();\r\n        baseTrackerPrototype.dispose.call(this)\r\n    }\r\n});\r\nexport var PieTracker = function(options) {\r\n    this.ctor(options)\r\n};\r\nextend(PieTracker.prototype, baseTrackerPrototype, {\r\n    _isPointerOut: function(_, point) {\r\n        return !point\r\n    },\r\n    _legendClick: function(item, e) {\r\n        var points = [];\r\n        this._storedSeries.forEach(s => points.push.apply(points, s.getPointsByKeys(item.argument, item.argumentIndex)));\r\n        this._eventTrigger(LEGEND_CLICK, {\r\n            target: item.argument,\r\n            points: points,\r\n            event: e\r\n        })\r\n    },\r\n    _pointClick: function(point, e) {\r\n        this._eventTrigger(POINT_CLICK, {\r\n            target: point,\r\n            event: e\r\n        })\r\n    },\r\n    _hoverLegendItem: function(x, y) {\r\n        var item = this._legend.getItemByCoord(x, y);\r\n        if (item && this._hoveredArgument !== item.argument) {\r\n            this._resetHoveredArgument();\r\n            this._hoverArgument(item.argument, item.argumentIndex)\r\n        } else if (!item) {\r\n            this.clearHover()\r\n        }\r\n    },\r\n    _getArgumentHoverMode: function() {\r\n        return correctHoverMode(this._legend)\r\n    },\r\n    _hoverArgumentAxis: _noop,\r\n    _setStuckSeries: _noop,\r\n    _getCanvas: _noop,\r\n    _notifyLegendOnHoverArgument: true\r\n});\r\n"]},"metadata":{},"sourceType":"module"}