{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/series/points/pie_point.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../../core/utils/extend\";\nimport symbolPoint from \"./symbol_point\";\nvar _extend = extend;\nvar _round = Math.round;\nvar _sqrt = Math.sqrt;\nvar _acos = Math.acos;\nvar DEG = 180 / Math.PI;\nvar _abs = Math.abs;\nimport { getVerticallyShiftedAngularCoords, normalizeAngle as _normalizeAngle, getCosAndSin as _getCosAndSin } from \"../../core/utils\";\nimport { isDefined as _isDefined } from \"../../../core/utils/type\";\nimport consts from \"../../components/consts\";\nvar RADIAL_LABEL_INDENT = consts.radialLabelIndent;\nexport default _extend({}, symbolPoint, {\n  _updateData: function (data, argumentChanged) {\n    symbolPoint._updateData.call(this, data);\n\n    if (argumentChanged || !_isDefined(this._visible)) {\n      this._visible = true;\n    }\n\n    this.minValue = this.initialMinValue = this.originalMinValue = _isDefined(data.minValue) ? data.minValue : 0;\n  },\n  animate: function (complete, duration, delay) {\n    this.graphic.animate({\n      x: this.centerX,\n      y: this.centerY,\n      outerRadius: this.radiusOuter,\n      innerRadius: this.radiusInner,\n      startAngle: this.toAngle,\n      endAngle: this.fromAngle\n    }, {\n      delay: delay,\n      partitionDuration: duration\n    }, complete);\n  },\n  correctPosition: function (correction) {\n    this.correctRadius(correction);\n    this.correctLabelRadius(correction.radiusOuter + RADIAL_LABEL_INDENT);\n    this.centerX = correction.centerX;\n    this.centerY = correction.centerY;\n  },\n  correctRadius: function (correction) {\n    this.radiusInner = correction.radiusInner;\n    this.radiusOuter = correction.radiusOuter;\n  },\n  correctLabelRadius: function (radiusLabels) {\n    this.radiusLabels = radiusLabels;\n  },\n  correctValue: function (correction, percent, base) {\n    this.value = (base || this.normalInitialValue) + correction;\n    this.minValue = correction;\n    this.percent = percent;\n\n    this._label.setDataField(\"percent\", percent);\n  },\n  _updateLabelData: function () {\n    this._label.setData(this._getLabelFormatObject());\n  },\n  _getShiftLabelCoords: function () {\n    var bBox = this._label.getBoundingRect();\n\n    var coord = this._getLabelCoords(this._label);\n\n    var visibleArea = this._getVisibleArea();\n\n    if (this._isLabelDrawingWithoutPoints) {\n      return this._checkLabelPosition(coord, bBox, visibleArea);\n    } else {\n      return this._getLabelExtraCoord(coord, this._checkVerticalLabelPosition(coord, bBox, visibleArea), bBox);\n    }\n  },\n  _getLabelPosition: function (options) {\n    return options.position;\n  },\n  getAnnotationCoords: function (location) {\n    return this._getElementCoords(\"edge\" !== location ? \"inside\" : \"outside\", this.radiusOuter, 0);\n  },\n  _getElementCoords: function (position, elementRadius, radialOffset) {\n    var bBox = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n    var that = this;\n\n    var angleFunctions = _getCosAndSin(that.middleAngle);\n\n    var radiusInner = that.radiusInner;\n    var radiusOuter = that.radiusOuter;\n    var columnsPosition = \"columns\" === position;\n    var rad;\n    var x;\n\n    if (\"inside\" === position) {\n      rad = radiusInner + (radiusOuter - radiusInner) / 2 + radialOffset;\n      x = that.centerX + rad * angleFunctions.cos - bBox.width / 2;\n    } else {\n      rad = elementRadius + radialOffset;\n\n      if (angleFunctions.cos > .1 || columnsPosition && angleFunctions.cos >= 0) {\n        x = that.centerX + rad * angleFunctions.cos;\n      } else if (angleFunctions.cos < -.1 || columnsPosition && angleFunctions.cos < 0) {\n        x = that.centerX + rad * angleFunctions.cos - bBox.width;\n      } else {\n        x = that.centerX + rad * angleFunctions.cos - bBox.width / 2;\n      }\n    }\n\n    return {\n      x: x,\n      y: _round(that.centerY - rad * angleFunctions.sin - bBox.height / 2)\n    };\n  },\n  _getLabelCoords: function (label) {\n    var bBox = label.getBoundingRect();\n    var options = label.getLayoutOptions();\n\n    var position = this._getLabelPosition(options);\n\n    return this._getElementCoords(position, this.radiusLabels, options.radialOffset, bBox);\n  },\n  _correctLabelCoord: function (coord, moveLabelsFromCenter) {\n    var label = this._label;\n    var bBox = label.getBoundingRect();\n    var labelWidth = bBox.width;\n    var options = label.getLayoutOptions();\n\n    var visibleArea = this._getVisibleArea();\n\n    var rightBorderX = visibleArea.maxX - labelWidth;\n    var leftBorderX = visibleArea.minX;\n\n    var angleOfPoint = _normalizeAngle(this.middleAngle);\n\n    var centerX = this.centerX;\n    var connectorOffset = options.connectorOffset;\n    var x = coord.x;\n\n    if (\"columns\" === options.position) {\n      if (angleOfPoint <= 90 || angleOfPoint >= 270) {\n        x = rightBorderX;\n      } else {\n        x = leftBorderX;\n      }\n\n      coord.x = x;\n    } else if (\"inside\" !== options.position && moveLabelsFromCenter) {\n      if (angleOfPoint <= 90 || angleOfPoint >= 270) {\n        if (x - connectorOffset < centerX) {\n          x = centerX + connectorOffset;\n        }\n      } else if (x + labelWidth + connectorOffset > centerX) {\n        x = centerX - labelWidth - connectorOffset;\n      }\n\n      coord.x = x;\n    }\n\n    return coord;\n  },\n  drawLabel: function () {\n    this.translate();\n    this._isLabelDrawingWithoutPoints = true;\n\n    this._drawLabel();\n\n    this._isLabelDrawingWithoutPoints = false;\n  },\n  updateLabelCoord: function (moveLabelsFromCenter) {\n    var bBox = this._label.getBoundingRect();\n\n    var coord = this._correctLabelCoord(bBox, moveLabelsFromCenter);\n\n    coord = this._checkHorizontalLabelPosition(coord, bBox, this._getVisibleArea());\n\n    this._label.shift(_round(coord.x), _round(bBox.y));\n  },\n  _checkVerticalLabelPosition: function (coord, box, visibleArea) {\n    var x = coord.x;\n    var y = coord.y;\n\n    if (coord.y + box.height > visibleArea.maxY) {\n      y = visibleArea.maxY - box.height;\n    } else if (coord.y < visibleArea.minY) {\n      y = visibleArea.minY;\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  },\n  _getLabelExtraCoord: function (coord, shiftCoord, box) {\n    return coord.y !== shiftCoord.y ? getVerticallyShiftedAngularCoords({\n      x: coord.x,\n      y: coord.y,\n      width: box.width,\n      height: box.height\n    }, shiftCoord.y - coord.y, {\n      x: this.centerX,\n      y: this.centerY\n    }) : coord;\n  },\n  _checkHorizontalLabelPosition: function (coord, box, visibleArea) {\n    var x = coord.x;\n    var y = coord.y;\n\n    if (coord.x + box.width > visibleArea.maxX) {\n      x = visibleArea.maxX - box.width;\n    } else if (coord.x < visibleArea.minX) {\n      x = visibleArea.minX;\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  },\n  applyWordWrap: function (moveLabelsFromCenter) {\n    var label = this._label;\n    var box = label.getBoundingRect();\n\n    var visibleArea = this._getVisibleArea();\n\n    var position = label.getLayoutOptions().position;\n    var width = box.width;\n    var rowCountChanged = false;\n\n    if (\"columns\" === position && this.series.index > 0) {\n      width = visibleArea.maxX - this.centerX - this.radiusLabels;\n    } else if (\"inside\" === position) {\n      if (width > visibleArea.maxX - visibleArea.minX) {\n        width = visibleArea.maxX - visibleArea.minX;\n      }\n    } else if (moveLabelsFromCenter && box.x < this.centerX && box.width + box.x > this.centerX) {\n      width = Math.floor((visibleArea.maxX - visibleArea.minX) / 2);\n    } else if (box.x + width > visibleArea.maxX) {\n      width = visibleArea.maxX - box.x;\n    } else if (box.x < visibleArea.minX) {\n      width = box.x + width - visibleArea.minX;\n    }\n\n    if (width < box.width) {\n      rowCountChanged = label.fit(width);\n    }\n\n    return rowCountChanged;\n  },\n  setLabelTrackerData: function () {\n    this._label.setTrackerData(this);\n  },\n  _checkLabelPosition: function (coord, bBox, visibleArea) {\n    coord = this._checkHorizontalLabelPosition(coord, bBox, visibleArea);\n    return this._checkVerticalLabelPosition(coord, bBox, visibleArea);\n  },\n  _getLabelConnector: function () {\n    var rad = this.radiusOuter;\n    var seriesStyle = this._options.styles.normal;\n    var strokeWidthBy2 = seriesStyle[\"stroke-width\"] / 2;\n    var borderWidth = this.series.getOptions().containerBackgroundColor === seriesStyle.stroke ? _round(strokeWidthBy2) : _round(-strokeWidthBy2);\n\n    var angleFunctions = _getCosAndSin(_round(this.middleAngle));\n\n    return {\n      x: _round(this.centerX + (rad - borderWidth) * angleFunctions.cos),\n      y: _round(this.centerY - (rad - borderWidth) * angleFunctions.sin),\n      angle: this.middleAngle\n    };\n  },\n  _drawMarker: function (renderer, group, animationEnabled, firstDrawing) {\n    var radiusOuter = this.radiusOuter;\n    var radiusInner = this.radiusInner;\n    var fromAngle = this.fromAngle;\n    var toAngle = this.toAngle;\n\n    if (animationEnabled) {\n      radiusInner = radiusOuter = 0;\n\n      if (!firstDrawing) {\n        fromAngle = toAngle = this.shiftedAngle;\n      }\n    }\n\n    this.graphic = renderer.arc(this.centerX, this.centerY, radiusInner, radiusOuter, toAngle, fromAngle).attr({\n      \"stroke-linejoin\": \"round\"\n    }).smartAttr(this._getStyle()).data({\n      \"chart-data-point\": this\n    }).sharp().append(group);\n  },\n  getTooltipParams: function () {\n    var angleFunctions = _getCosAndSin(this.middleAngle);\n\n    var radiusInner = this.radiusInner;\n    var radiusOuter = this.radiusOuter;\n    return {\n      x: this.centerX + (radiusInner + (radiusOuter - radiusInner) / 2) * angleFunctions.cos,\n      y: this.centerY - (radiusInner + (radiusOuter - radiusInner) / 2) * angleFunctions.sin,\n      offset: 0\n    };\n  },\n  _translate: function () {\n    var angle = this.shiftedAngle || 0;\n    var value = this.value;\n    var minValue = this.minValue;\n\n    var translator = this._getValTranslator();\n\n    this.fromAngle = translator.translate(minValue) + angle;\n    this.toAngle = translator.translate(value) + angle;\n    this.middleAngle = translator.translate((value - minValue) / 2 + minValue) + angle;\n\n    if (!this.isVisible()) {\n      this.middleAngle = this.toAngle = this.fromAngle = this.fromAngle || angle;\n    }\n  },\n  getMarkerVisibility: function () {\n    return true;\n  },\n  _updateMarker: function (animationEnabled, style, _, callback) {\n    if (!animationEnabled) {\n      style = _extend({\n        x: this.centerX,\n        y: this.centerY,\n        outerRadius: this.radiusOuter,\n        innerRadius: this.radiusInner,\n        startAngle: this.toAngle,\n        endAngle: this.fromAngle\n      }, style);\n    }\n\n    this.graphic.smartAttr(style).sharp();\n    callback && callback();\n  },\n  getLegendStyles: function () {\n    return this._styles.legendStyles;\n  },\n  isInVisibleArea: function () {\n    return true;\n  },\n  hide: function () {\n    if (this._visible) {\n      this._visible = false;\n      this.hideTooltip();\n\n      this._options.visibilityChanged();\n    }\n  },\n  show: function () {\n    if (!this._visible) {\n      this._visible = true;\n\n      this._options.visibilityChanged();\n    }\n  },\n  setInvisibility: function () {\n    this._label.draw(false);\n  },\n  isVisible: function () {\n    return this._visible;\n  },\n  _getFormatObject: function (tooltip) {\n    var formatObject = symbolPoint._getFormatObject.call(this, tooltip);\n\n    var percent = this.percent;\n    formatObject.percent = percent;\n    formatObject.percentText = tooltip.formatValue(percent, \"percent\");\n    return formatObject;\n  },\n  getColor: function () {\n    return this._styles.normal.fill;\n  },\n  coordsIn: function (x, y) {\n    var lx = x - this.centerX;\n    var ly = y - this.centerY;\n\n    var r = _sqrt(lx * lx + ly * ly);\n\n    var fromAngle = this.fromAngle % 360;\n    var toAngle = this.toAngle % 360;\n    var angle;\n\n    if (r < this.radiusInner || r > this.radiusOuter || 0 === r) {\n      return false;\n    }\n\n    angle = _acos(lx / r) * DEG * (ly > 0 ? -1 : 1);\n\n    if (angle < 0) {\n      angle += 360;\n    }\n\n    if (fromAngle === toAngle && _abs(this.toAngle - this.fromAngle) > 1e-4) {\n      return true;\n    } else {\n      return fromAngle >= toAngle ? angle <= fromAngle && angle >= toAngle : !(angle >= fromAngle && angle <= toAngle);\n    }\n  }\n});","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/viz/series/points/pie_point.js"],"names":["extend","symbolPoint","_extend","_round","Math","round","_sqrt","sqrt","_acos","acos","DEG","PI","_abs","abs","getVerticallyShiftedAngularCoords","normalizeAngle","_normalizeAngle","getCosAndSin","_getCosAndSin","isDefined","_isDefined","consts","RADIAL_LABEL_INDENT","radialLabelIndent","_updateData","data","argumentChanged","call","_visible","minValue","initialMinValue","originalMinValue","animate","complete","duration","delay","graphic","x","centerX","y","centerY","outerRadius","radiusOuter","innerRadius","radiusInner","startAngle","toAngle","endAngle","fromAngle","partitionDuration","correctPosition","correction","correctRadius","correctLabelRadius","radiusLabels","correctValue","percent","base","value","normalInitialValue","_label","setDataField","_updateLabelData","setData","_getLabelFormatObject","_getShiftLabelCoords","bBox","getBoundingRect","coord","_getLabelCoords","visibleArea","_getVisibleArea","_isLabelDrawingWithoutPoints","_checkLabelPosition","_getLabelExtraCoord","_checkVerticalLabelPosition","_getLabelPosition","options","position","getAnnotationCoords","location","_getElementCoords","elementRadius","radialOffset","arguments","length","width","height","that","angleFunctions","middleAngle","columnsPosition","rad","cos","sin","label","getLayoutOptions","_correctLabelCoord","moveLabelsFromCenter","labelWidth","rightBorderX","maxX","leftBorderX","minX","angleOfPoint","connectorOffset","drawLabel","translate","_drawLabel","updateLabelCoord","_checkHorizontalLabelPosition","shift","box","maxY","minY","shiftCoord","applyWordWrap","rowCountChanged","series","index","floor","fit","setLabelTrackerData","setTrackerData","_getLabelConnector","seriesStyle","_options","styles","normal","strokeWidthBy2","borderWidth","getOptions","containerBackgroundColor","stroke","angle","_drawMarker","renderer","group","animationEnabled","firstDrawing","shiftedAngle","arc","attr","smartAttr","_getStyle","sharp","append","getTooltipParams","offset","_translate","translator","_getValTranslator","isVisible","getMarkerVisibility","_updateMarker","style","_","callback","getLegendStyles","_styles","legendStyles","isInVisibleArea","hide","hideTooltip","visibilityChanged","show","setInvisibility","draw","_getFormatObject","tooltip","formatObject","percentText","formatValue","getColor","fill","coordsIn","lx","ly","r"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/series/points/pie_point.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport symbolPoint from \"./symbol_point\";\r\nvar _extend = extend;\r\nvar _round = Math.round;\r\nvar _sqrt = Math.sqrt;\r\nvar _acos = Math.acos;\r\nvar DEG = 180 / Math.PI;\r\nvar _abs = Math.abs;\r\nimport {\r\n    getVerticallyShiftedAngularCoords,\r\n    normalizeAngle as _normalizeAngle,\r\n    getCosAndSin as _getCosAndSin\r\n} from \"../../core/utils\";\r\nimport {\r\n    isDefined as _isDefined\r\n} from \"../../../core/utils/type\";\r\nimport consts from \"../../components/consts\";\r\nvar RADIAL_LABEL_INDENT = consts.radialLabelIndent;\r\nexport default _extend({}, symbolPoint, {\r\n    _updateData: function(data, argumentChanged) {\r\n        symbolPoint._updateData.call(this, data);\r\n        if (argumentChanged || !_isDefined(this._visible)) {\r\n            this._visible = true\r\n        }\r\n        this.minValue = this.initialMinValue = this.originalMinValue = _isDefined(data.minValue) ? data.minValue : 0\r\n    },\r\n    animate: function(complete, duration, delay) {\r\n        this.graphic.animate({\r\n            x: this.centerX,\r\n            y: this.centerY,\r\n            outerRadius: this.radiusOuter,\r\n            innerRadius: this.radiusInner,\r\n            startAngle: this.toAngle,\r\n            endAngle: this.fromAngle\r\n        }, {\r\n            delay: delay,\r\n            partitionDuration: duration\r\n        }, complete)\r\n    },\r\n    correctPosition: function(correction) {\r\n        this.correctRadius(correction);\r\n        this.correctLabelRadius(correction.radiusOuter + RADIAL_LABEL_INDENT);\r\n        this.centerX = correction.centerX;\r\n        this.centerY = correction.centerY\r\n    },\r\n    correctRadius: function(correction) {\r\n        this.radiusInner = correction.radiusInner;\r\n        this.radiusOuter = correction.radiusOuter\r\n    },\r\n    correctLabelRadius: function(radiusLabels) {\r\n        this.radiusLabels = radiusLabels\r\n    },\r\n    correctValue: function(correction, percent, base) {\r\n        this.value = (base || this.normalInitialValue) + correction;\r\n        this.minValue = correction;\r\n        this.percent = percent;\r\n        this._label.setDataField(\"percent\", percent)\r\n    },\r\n    _updateLabelData: function() {\r\n        this._label.setData(this._getLabelFormatObject())\r\n    },\r\n    _getShiftLabelCoords: function() {\r\n        var bBox = this._label.getBoundingRect();\r\n        var coord = this._getLabelCoords(this._label);\r\n        var visibleArea = this._getVisibleArea();\r\n        if (this._isLabelDrawingWithoutPoints) {\r\n            return this._checkLabelPosition(coord, bBox, visibleArea)\r\n        } else {\r\n            return this._getLabelExtraCoord(coord, this._checkVerticalLabelPosition(coord, bBox, visibleArea), bBox)\r\n        }\r\n    },\r\n    _getLabelPosition: function(options) {\r\n        return options.position\r\n    },\r\n    getAnnotationCoords: function(location) {\r\n        return this._getElementCoords(\"edge\" !== location ? \"inside\" : \"outside\", this.radiusOuter, 0)\r\n    },\r\n    _getElementCoords: function(position, elementRadius, radialOffset) {\r\n        var bBox = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        };\r\n        var that = this;\r\n        var angleFunctions = _getCosAndSin(that.middleAngle);\r\n        var radiusInner = that.radiusInner;\r\n        var radiusOuter = that.radiusOuter;\r\n        var columnsPosition = \"columns\" === position;\r\n        var rad;\r\n        var x;\r\n        if (\"inside\" === position) {\r\n            rad = radiusInner + (radiusOuter - radiusInner) / 2 + radialOffset;\r\n            x = that.centerX + rad * angleFunctions.cos - bBox.width / 2\r\n        } else {\r\n            rad = elementRadius + radialOffset;\r\n            if (angleFunctions.cos > .1 || columnsPosition && angleFunctions.cos >= 0) {\r\n                x = that.centerX + rad * angleFunctions.cos\r\n            } else if (angleFunctions.cos < -.1 || columnsPosition && angleFunctions.cos < 0) {\r\n                x = that.centerX + rad * angleFunctions.cos - bBox.width\r\n            } else {\r\n                x = that.centerX + rad * angleFunctions.cos - bBox.width / 2\r\n            }\r\n        }\r\n        return {\r\n            x: x,\r\n            y: _round(that.centerY - rad * angleFunctions.sin - bBox.height / 2)\r\n        }\r\n    },\r\n    _getLabelCoords: function(label) {\r\n        var bBox = label.getBoundingRect();\r\n        var options = label.getLayoutOptions();\r\n        var position = this._getLabelPosition(options);\r\n        return this._getElementCoords(position, this.radiusLabels, options.radialOffset, bBox)\r\n    },\r\n    _correctLabelCoord: function(coord, moveLabelsFromCenter) {\r\n        var label = this._label;\r\n        var bBox = label.getBoundingRect();\r\n        var labelWidth = bBox.width;\r\n        var options = label.getLayoutOptions();\r\n        var visibleArea = this._getVisibleArea();\r\n        var rightBorderX = visibleArea.maxX - labelWidth;\r\n        var leftBorderX = visibleArea.minX;\r\n        var angleOfPoint = _normalizeAngle(this.middleAngle);\r\n        var centerX = this.centerX;\r\n        var connectorOffset = options.connectorOffset;\r\n        var x = coord.x;\r\n        if (\"columns\" === options.position) {\r\n            if (angleOfPoint <= 90 || angleOfPoint >= 270) {\r\n                x = rightBorderX\r\n            } else {\r\n                x = leftBorderX\r\n            }\r\n            coord.x = x\r\n        } else if (\"inside\" !== options.position && moveLabelsFromCenter) {\r\n            if (angleOfPoint <= 90 || angleOfPoint >= 270) {\r\n                if (x - connectorOffset < centerX) {\r\n                    x = centerX + connectorOffset\r\n                }\r\n            } else if (x + labelWidth + connectorOffset > centerX) {\r\n                x = centerX - labelWidth - connectorOffset\r\n            }\r\n            coord.x = x\r\n        }\r\n        return coord\r\n    },\r\n    drawLabel: function() {\r\n        this.translate();\r\n        this._isLabelDrawingWithoutPoints = true;\r\n        this._drawLabel();\r\n        this._isLabelDrawingWithoutPoints = false\r\n    },\r\n    updateLabelCoord: function(moveLabelsFromCenter) {\r\n        var bBox = this._label.getBoundingRect();\r\n        var coord = this._correctLabelCoord(bBox, moveLabelsFromCenter);\r\n        coord = this._checkHorizontalLabelPosition(coord, bBox, this._getVisibleArea());\r\n        this._label.shift(_round(coord.x), _round(bBox.y))\r\n    },\r\n    _checkVerticalLabelPosition: function(coord, box, visibleArea) {\r\n        var x = coord.x;\r\n        var y = coord.y;\r\n        if (coord.y + box.height > visibleArea.maxY) {\r\n            y = visibleArea.maxY - box.height\r\n        } else if (coord.y < visibleArea.minY) {\r\n            y = visibleArea.minY\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    },\r\n    _getLabelExtraCoord: function(coord, shiftCoord, box) {\r\n        return coord.y !== shiftCoord.y ? getVerticallyShiftedAngularCoords({\r\n            x: coord.x,\r\n            y: coord.y,\r\n            width: box.width,\r\n            height: box.height\r\n        }, shiftCoord.y - coord.y, {\r\n            x: this.centerX,\r\n            y: this.centerY\r\n        }) : coord\r\n    },\r\n    _checkHorizontalLabelPosition: function(coord, box, visibleArea) {\r\n        var x = coord.x;\r\n        var y = coord.y;\r\n        if (coord.x + box.width > visibleArea.maxX) {\r\n            x = visibleArea.maxX - box.width\r\n        } else if (coord.x < visibleArea.minX) {\r\n            x = visibleArea.minX\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    },\r\n    applyWordWrap: function(moveLabelsFromCenter) {\r\n        var label = this._label;\r\n        var box = label.getBoundingRect();\r\n        var visibleArea = this._getVisibleArea();\r\n        var position = label.getLayoutOptions().position;\r\n        var width = box.width;\r\n        var rowCountChanged = false;\r\n        if (\"columns\" === position && this.series.index > 0) {\r\n            width = visibleArea.maxX - this.centerX - this.radiusLabels\r\n        } else if (\"inside\" === position) {\r\n            if (width > visibleArea.maxX - visibleArea.minX) {\r\n                width = visibleArea.maxX - visibleArea.minX\r\n            }\r\n        } else if (moveLabelsFromCenter && box.x < this.centerX && box.width + box.x > this.centerX) {\r\n            width = Math.floor((visibleArea.maxX - visibleArea.minX) / 2)\r\n        } else if (box.x + width > visibleArea.maxX) {\r\n            width = visibleArea.maxX - box.x\r\n        } else if (box.x < visibleArea.minX) {\r\n            width = box.x + width - visibleArea.minX\r\n        }\r\n        if (width < box.width) {\r\n            rowCountChanged = label.fit(width)\r\n        }\r\n        return rowCountChanged\r\n    },\r\n    setLabelTrackerData: function() {\r\n        this._label.setTrackerData(this)\r\n    },\r\n    _checkLabelPosition: function(coord, bBox, visibleArea) {\r\n        coord = this._checkHorizontalLabelPosition(coord, bBox, visibleArea);\r\n        return this._checkVerticalLabelPosition(coord, bBox, visibleArea)\r\n    },\r\n    _getLabelConnector: function() {\r\n        var rad = this.radiusOuter;\r\n        var seriesStyle = this._options.styles.normal;\r\n        var strokeWidthBy2 = seriesStyle[\"stroke-width\"] / 2;\r\n        var borderWidth = this.series.getOptions().containerBackgroundColor === seriesStyle.stroke ? _round(strokeWidthBy2) : _round(-strokeWidthBy2);\r\n        var angleFunctions = _getCosAndSin(_round(this.middleAngle));\r\n        return {\r\n            x: _round(this.centerX + (rad - borderWidth) * angleFunctions.cos),\r\n            y: _round(this.centerY - (rad - borderWidth) * angleFunctions.sin),\r\n            angle: this.middleAngle\r\n        }\r\n    },\r\n    _drawMarker: function(renderer, group, animationEnabled, firstDrawing) {\r\n        var radiusOuter = this.radiusOuter;\r\n        var radiusInner = this.radiusInner;\r\n        var fromAngle = this.fromAngle;\r\n        var toAngle = this.toAngle;\r\n        if (animationEnabled) {\r\n            radiusInner = radiusOuter = 0;\r\n            if (!firstDrawing) {\r\n                fromAngle = toAngle = this.shiftedAngle\r\n            }\r\n        }\r\n        this.graphic = renderer.arc(this.centerX, this.centerY, radiusInner, radiusOuter, toAngle, fromAngle).attr({\r\n            \"stroke-linejoin\": \"round\"\r\n        }).smartAttr(this._getStyle()).data({\r\n            \"chart-data-point\": this\r\n        }).sharp().append(group)\r\n    },\r\n    getTooltipParams: function() {\r\n        var angleFunctions = _getCosAndSin(this.middleAngle);\r\n        var radiusInner = this.radiusInner;\r\n        var radiusOuter = this.radiusOuter;\r\n        return {\r\n            x: this.centerX + (radiusInner + (radiusOuter - radiusInner) / 2) * angleFunctions.cos,\r\n            y: this.centerY - (radiusInner + (radiusOuter - radiusInner) / 2) * angleFunctions.sin,\r\n            offset: 0\r\n        }\r\n    },\r\n    _translate: function() {\r\n        var angle = this.shiftedAngle || 0;\r\n        var value = this.value;\r\n        var minValue = this.minValue;\r\n        var translator = this._getValTranslator();\r\n        this.fromAngle = translator.translate(minValue) + angle;\r\n        this.toAngle = translator.translate(value) + angle;\r\n        this.middleAngle = translator.translate((value - minValue) / 2 + minValue) + angle;\r\n        if (!this.isVisible()) {\r\n            this.middleAngle = this.toAngle = this.fromAngle = this.fromAngle || angle\r\n        }\r\n    },\r\n    getMarkerVisibility: function() {\r\n        return true\r\n    },\r\n    _updateMarker: function(animationEnabled, style, _, callback) {\r\n        if (!animationEnabled) {\r\n            style = _extend({\r\n                x: this.centerX,\r\n                y: this.centerY,\r\n                outerRadius: this.radiusOuter,\r\n                innerRadius: this.radiusInner,\r\n                startAngle: this.toAngle,\r\n                endAngle: this.fromAngle\r\n            }, style)\r\n        }\r\n        this.graphic.smartAttr(style).sharp();\r\n        callback && callback()\r\n    },\r\n    getLegendStyles: function() {\r\n        return this._styles.legendStyles\r\n    },\r\n    isInVisibleArea: function() {\r\n        return true\r\n    },\r\n    hide: function() {\r\n        if (this._visible) {\r\n            this._visible = false;\r\n            this.hideTooltip();\r\n            this._options.visibilityChanged()\r\n        }\r\n    },\r\n    show: function() {\r\n        if (!this._visible) {\r\n            this._visible = true;\r\n            this._options.visibilityChanged()\r\n        }\r\n    },\r\n    setInvisibility: function() {\r\n        this._label.draw(false)\r\n    },\r\n    isVisible: function() {\r\n        return this._visible\r\n    },\r\n    _getFormatObject: function(tooltip) {\r\n        var formatObject = symbolPoint._getFormatObject.call(this, tooltip);\r\n        var percent = this.percent;\r\n        formatObject.percent = percent;\r\n        formatObject.percentText = tooltip.formatValue(percent, \"percent\");\r\n        return formatObject\r\n    },\r\n    getColor: function() {\r\n        return this._styles.normal.fill\r\n    },\r\n    coordsIn: function(x, y) {\r\n        var lx = x - this.centerX;\r\n        var ly = y - this.centerY;\r\n        var r = _sqrt(lx * lx + ly * ly);\r\n        var fromAngle = this.fromAngle % 360;\r\n        var toAngle = this.toAngle % 360;\r\n        var angle;\r\n        if (r < this.radiusInner || r > this.radiusOuter || 0 === r) {\r\n            return false\r\n        }\r\n        angle = _acos(lx / r) * DEG * (ly > 0 ? -1 : 1);\r\n        if (angle < 0) {\r\n            angle += 360\r\n        }\r\n        if (fromAngle === toAngle && _abs(this.toAngle - this.fromAngle) > 1e-4) {\r\n            return true\r\n        } else {\r\n            return fromAngle >= toAngle ? angle <= fromAngle && angle >= toAngle : !(angle >= fromAngle && angle <= toAngle)\r\n        }\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}