{"ast":null,"code":"/**\r\n * DevExtreme (esm/events/gesture/emitter.gesture.scroll.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport eventsEngine from \"../../events/core/events_engine\";\nimport Class from \"../../core/class\";\nvar abstract = Class.abstract;\nimport { addNamespace, isDxMouseWheelEvent, isMouseEvent, eventData, eventDelta } from \"../../events/utils/index\";\nimport GestureEmitter from \"../../events/gesture/emitter.gesture\";\nimport registerEmitter from \"../../events/core/emitter_registrator\";\nimport { requestAnimationFrame, cancelAnimationFrame } from \"../../animation/frame\";\nimport devices from \"../../core/devices\";\nimport { compare as compareVersions } from \"../../core/utils/version\";\nvar realDevice = devices.real();\nvar SCROLL_EVENT = \"scroll\";\nvar SCROLL_INIT_EVENT = \"dxscrollinit\";\nvar SCROLL_START_EVENT = \"dxscrollstart\";\nvar SCROLL_MOVE_EVENT = \"dxscroll\";\nvar SCROLL_END_EVENT = \"dxscrollend\";\nvar SCROLL_STOP_EVENT = \"dxscrollstop\";\nvar SCROLL_CANCEL_EVENT = \"dxscrollcancel\";\nvar Locker = Class.inherit(function () {\n  var NAMESPACED_SCROLL_EVENT = addNamespace(SCROLL_EVENT, \"dxScrollEmitter\");\n  return {\n    ctor: function (element) {\n      this._element = element;\n      this._locked = false;\n\n      this._proxiedScroll = e => {\n        if (!this._disposed) {\n          this._scroll(e);\n        }\n      };\n\n      eventsEngine.on(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll);\n    },\n    _scroll: abstract,\n    check: function (e, callback) {\n      if (this._locked) {\n        callback();\n      }\n    },\n    dispose: function () {\n      this._disposed = true;\n      eventsEngine.off(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll);\n    }\n  };\n}());\nvar TimeoutLocker = Locker.inherit({\n  ctor: function (element, timeout) {\n    this.callBase(element);\n    this._timeout = timeout;\n  },\n  _scroll: function () {\n    this._prepare();\n\n    this._forget();\n  },\n  _prepare: function () {\n    if (this._timer) {\n      this._clearTimer();\n    }\n\n    this._locked = true;\n  },\n  _clearTimer: function () {\n    clearTimeout(this._timer);\n    this._locked = false;\n    this._timer = null;\n  },\n  _forget: function () {\n    var that = this;\n    this._timer = setTimeout(function () {\n      that._clearTimer();\n    }, this._timeout);\n  },\n  dispose: function () {\n    this.callBase();\n\n    this._clearTimer();\n  }\n});\nvar WheelLocker = TimeoutLocker.inherit({\n  ctor: function (element) {\n    this.callBase(element, 400);\n    this._lastWheelDirection = null;\n  },\n  check: function (e, callback) {\n    this._checkDirectionChanged(e);\n\n    this.callBase(e, callback);\n  },\n  _checkDirectionChanged: function (e) {\n    if (!isDxMouseWheelEvent(e)) {\n      this._lastWheelDirection = null;\n      return;\n    }\n\n    var direction = e.shiftKey || false;\n    var directionChange = null !== this._lastWheelDirection && direction !== this._lastWheelDirection;\n    this._lastWheelDirection = direction;\n    this._locked = this._locked && !directionChange;\n  }\n});\nvar PointerLocker = TimeoutLocker.inherit({\n  ctor: function (element) {\n    this.callBase(element, 400);\n  }\n});\n!function () {\n  var ios8_greater = realDevice.ios && compareVersions(realDevice.version, [8]) >= 0;\n  var android5_greater = realDevice.android && compareVersions(realDevice.version, [5]) >= 0;\n\n  if (!(ios8_greater || android5_greater)) {\n    return;\n  }\n\n  PointerLocker = Locker.inherit({\n    _scroll: function () {\n      this._locked = true;\n      var that = this;\n      cancelAnimationFrame(this._scrollFrame);\n      this._scrollFrame = requestAnimationFrame(function () {\n        that._locked = false;\n      });\n    },\n    check: function (e, callback) {\n      cancelAnimationFrame(this._scrollFrame);\n      cancelAnimationFrame(this._checkFrame);\n      var that = this;\n      var callBase = this.callBase;\n      this._checkFrame = requestAnimationFrame(function () {\n        callBase.call(that, e, callback);\n        that._locked = false;\n      });\n    },\n    dispose: function () {\n      this.callBase();\n      cancelAnimationFrame(this._scrollFrame);\n      cancelAnimationFrame(this._checkFrame);\n    }\n  });\n}();\nvar ScrollEmitter = GestureEmitter.inherit(function () {\n  var FRAME_DURATION = Math.round(1e3 / 60);\n  return {\n    ctor: function (element) {\n      this.callBase.apply(this, arguments);\n      this.direction = \"both\";\n      this._pointerLocker = new PointerLocker(element);\n      this._wheelLocker = new WheelLocker(element);\n    },\n    validate: function () {\n      return true;\n    },\n    configure: function (data) {\n      if (data.scrollTarget) {\n        this._pointerLocker.dispose();\n\n        this._wheelLocker.dispose();\n\n        this._pointerLocker = new PointerLocker(data.scrollTarget);\n        this._wheelLocker = new WheelLocker(data.scrollTarget);\n      }\n\n      this.callBase(data);\n    },\n    _init: function (e) {\n      this._wheelLocker.check(e, function () {\n        if (isDxMouseWheelEvent(e)) {\n          this._accept(e);\n        }\n      }.bind(this));\n\n      this._pointerLocker.check(e, function () {\n        var skipCheck = this.isNative && isMouseEvent(e);\n\n        if (!isDxMouseWheelEvent(e) && !skipCheck) {\n          this._accept(e);\n        }\n      }.bind(this));\n\n      this._fireEvent(SCROLL_INIT_EVENT, e);\n\n      this._prevEventData = eventData(e);\n    },\n    move: function (e) {\n      this.callBase.apply(this, arguments);\n      e.isScrollingEvent = this.isNative || e.isScrollingEvent;\n    },\n    _start: function (e) {\n      this._savedEventData = eventData(e);\n\n      this._fireEvent(SCROLL_START_EVENT, e);\n\n      this._prevEventData = eventData(e);\n    },\n    _move: function (e) {\n      var currentEventData = eventData(e);\n\n      this._fireEvent(SCROLL_MOVE_EVENT, e, {\n        delta: eventDelta(this._prevEventData, currentEventData)\n      });\n\n      var delta = eventDelta(this._savedEventData, currentEventData);\n\n      if (delta.time > 200) {\n        this._savedEventData = this._prevEventData;\n      }\n\n      this._prevEventData = eventData(e);\n    },\n    _end: function (e) {\n      var endEventDelta = eventDelta(this._prevEventData, eventData(e));\n      var velocity = {\n        x: 0,\n        y: 0\n      };\n\n      if (!isDxMouseWheelEvent(e) && endEventDelta.time < 100) {\n        var delta = eventDelta(this._savedEventData, this._prevEventData);\n        var velocityMultiplier = FRAME_DURATION / delta.time;\n        velocity = {\n          x: delta.x * velocityMultiplier,\n          y: delta.y * velocityMultiplier\n        };\n      }\n\n      this._fireEvent(SCROLL_END_EVENT, e, {\n        velocity: velocity\n      });\n    },\n    _stop: function (e) {\n      this._fireEvent(SCROLL_STOP_EVENT, e);\n    },\n    cancel: function (e) {\n      this.callBase.apply(this, arguments);\n\n      this._fireEvent(SCROLL_CANCEL_EVENT, e);\n    },\n    dispose: function () {\n      this.callBase.apply(this, arguments);\n\n      this._pointerLocker.dispose();\n\n      this._wheelLocker.dispose();\n    },\n    _clearSelection: function () {\n      if (this.isNative) {\n        return;\n      }\n\n      return this.callBase.apply(this, arguments);\n    },\n    _toggleGestureCover: function () {\n      if (this.isNative) {\n        return;\n      }\n\n      return this.callBase.apply(this, arguments);\n    }\n  };\n}());\nregisterEmitter({\n  emitter: ScrollEmitter,\n  events: [SCROLL_INIT_EVENT, SCROLL_START_EVENT, SCROLL_MOVE_EVENT, SCROLL_END_EVENT, SCROLL_STOP_EVENT, SCROLL_CANCEL_EVENT]\n});\nexport default {\n  init: SCROLL_INIT_EVENT,\n  start: SCROLL_START_EVENT,\n  move: SCROLL_MOVE_EVENT,\n  end: SCROLL_END_EVENT,\n  stop: SCROLL_STOP_EVENT,\n  cancel: SCROLL_CANCEL_EVENT,\n  scroll: SCROLL_EVENT\n};","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/events/gesture/emitter.gesture.scroll.js"],"names":["eventsEngine","Class","abstract","addNamespace","isDxMouseWheelEvent","isMouseEvent","eventData","eventDelta","GestureEmitter","registerEmitter","requestAnimationFrame","cancelAnimationFrame","devices","compare","compareVersions","realDevice","real","SCROLL_EVENT","SCROLL_INIT_EVENT","SCROLL_START_EVENT","SCROLL_MOVE_EVENT","SCROLL_END_EVENT","SCROLL_STOP_EVENT","SCROLL_CANCEL_EVENT","Locker","inherit","NAMESPACED_SCROLL_EVENT","ctor","element","_element","_locked","_proxiedScroll","e","_disposed","_scroll","on","check","callback","dispose","off","TimeoutLocker","timeout","callBase","_timeout","_prepare","_forget","_timer","_clearTimer","clearTimeout","that","setTimeout","WheelLocker","_lastWheelDirection","_checkDirectionChanged","direction","shiftKey","directionChange","PointerLocker","ios8_greater","ios","version","android5_greater","android","_scrollFrame","_checkFrame","call","ScrollEmitter","FRAME_DURATION","Math","round","apply","arguments","_pointerLocker","_wheelLocker","validate","configure","data","scrollTarget","_init","_accept","bind","skipCheck","isNative","_fireEvent","_prevEventData","move","isScrollingEvent","_start","_savedEventData","_move","currentEventData","delta","time","_end","endEventDelta","velocity","x","y","velocityMultiplier","_stop","cancel","_clearSelection","_toggleGestureCover","emitter","events","init","start","end","stop","scroll"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/events/gesture/emitter.gesture.scroll.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport Class from \"../../core/class\";\r\nvar abstract = Class.abstract;\r\nimport {\r\n    addNamespace,\r\n    isDxMouseWheelEvent,\r\n    isMouseEvent,\r\n    eventData,\r\n    eventDelta\r\n} from \"../../events/utils/index\";\r\nimport GestureEmitter from \"../../events/gesture/emitter.gesture\";\r\nimport registerEmitter from \"../../events/core/emitter_registrator\";\r\nimport {\r\n    requestAnimationFrame,\r\n    cancelAnimationFrame\r\n} from \"../../animation/frame\";\r\nimport devices from \"../../core/devices\";\r\nimport {\r\n    compare as compareVersions\r\n} from \"../../core/utils/version\";\r\nvar realDevice = devices.real();\r\nvar SCROLL_EVENT = \"scroll\";\r\nvar SCROLL_INIT_EVENT = \"dxscrollinit\";\r\nvar SCROLL_START_EVENT = \"dxscrollstart\";\r\nvar SCROLL_MOVE_EVENT = \"dxscroll\";\r\nvar SCROLL_END_EVENT = \"dxscrollend\";\r\nvar SCROLL_STOP_EVENT = \"dxscrollstop\";\r\nvar SCROLL_CANCEL_EVENT = \"dxscrollcancel\";\r\nvar Locker = Class.inherit(function() {\r\n    var NAMESPACED_SCROLL_EVENT = addNamespace(SCROLL_EVENT, \"dxScrollEmitter\");\r\n    return {\r\n        ctor: function(element) {\r\n            this._element = element;\r\n            this._locked = false;\r\n            this._proxiedScroll = e => {\r\n                if (!this._disposed) {\r\n                    this._scroll(e)\r\n                }\r\n            };\r\n            eventsEngine.on(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll)\r\n        },\r\n        _scroll: abstract,\r\n        check: function(e, callback) {\r\n            if (this._locked) {\r\n                callback()\r\n            }\r\n        },\r\n        dispose: function() {\r\n            this._disposed = true;\r\n            eventsEngine.off(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll)\r\n        }\r\n    }\r\n}());\r\nvar TimeoutLocker = Locker.inherit({\r\n    ctor: function(element, timeout) {\r\n        this.callBase(element);\r\n        this._timeout = timeout\r\n    },\r\n    _scroll: function() {\r\n        this._prepare();\r\n        this._forget()\r\n    },\r\n    _prepare: function() {\r\n        if (this._timer) {\r\n            this._clearTimer()\r\n        }\r\n        this._locked = true\r\n    },\r\n    _clearTimer: function() {\r\n        clearTimeout(this._timer);\r\n        this._locked = false;\r\n        this._timer = null\r\n    },\r\n    _forget: function() {\r\n        var that = this;\r\n        this._timer = setTimeout((function() {\r\n            that._clearTimer()\r\n        }), this._timeout)\r\n    },\r\n    dispose: function() {\r\n        this.callBase();\r\n        this._clearTimer()\r\n    }\r\n});\r\nvar WheelLocker = TimeoutLocker.inherit({\r\n    ctor: function(element) {\r\n        this.callBase(element, 400);\r\n        this._lastWheelDirection = null\r\n    },\r\n    check: function(e, callback) {\r\n        this._checkDirectionChanged(e);\r\n        this.callBase(e, callback)\r\n    },\r\n    _checkDirectionChanged: function(e) {\r\n        if (!isDxMouseWheelEvent(e)) {\r\n            this._lastWheelDirection = null;\r\n            return\r\n        }\r\n        var direction = e.shiftKey || false;\r\n        var directionChange = null !== this._lastWheelDirection && direction !== this._lastWheelDirection;\r\n        this._lastWheelDirection = direction;\r\n        this._locked = this._locked && !directionChange\r\n    }\r\n});\r\nvar PointerLocker = TimeoutLocker.inherit({\r\n    ctor: function(element) {\r\n        this.callBase(element, 400)\r\n    }\r\n});\r\n! function() {\r\n    var ios8_greater = realDevice.ios && compareVersions(realDevice.version, [8]) >= 0;\r\n    var android5_greater = realDevice.android && compareVersions(realDevice.version, [5]) >= 0;\r\n    if (!(ios8_greater || android5_greater)) {\r\n        return\r\n    }\r\n    PointerLocker = Locker.inherit({\r\n        _scroll: function() {\r\n            this._locked = true;\r\n            var that = this;\r\n            cancelAnimationFrame(this._scrollFrame);\r\n            this._scrollFrame = requestAnimationFrame((function() {\r\n                that._locked = false\r\n            }))\r\n        },\r\n        check: function(e, callback) {\r\n            cancelAnimationFrame(this._scrollFrame);\r\n            cancelAnimationFrame(this._checkFrame);\r\n            var that = this;\r\n            var callBase = this.callBase;\r\n            this._checkFrame = requestAnimationFrame((function() {\r\n                callBase.call(that, e, callback);\r\n                that._locked = false\r\n            }))\r\n        },\r\n        dispose: function() {\r\n            this.callBase();\r\n            cancelAnimationFrame(this._scrollFrame);\r\n            cancelAnimationFrame(this._checkFrame)\r\n        }\r\n    })\r\n}();\r\nvar ScrollEmitter = GestureEmitter.inherit(function() {\r\n    var FRAME_DURATION = Math.round(1e3 / 60);\r\n    return {\r\n        ctor: function(element) {\r\n            this.callBase.apply(this, arguments);\r\n            this.direction = \"both\";\r\n            this._pointerLocker = new PointerLocker(element);\r\n            this._wheelLocker = new WheelLocker(element)\r\n        },\r\n        validate: function() {\r\n            return true\r\n        },\r\n        configure: function(data) {\r\n            if (data.scrollTarget) {\r\n                this._pointerLocker.dispose();\r\n                this._wheelLocker.dispose();\r\n                this._pointerLocker = new PointerLocker(data.scrollTarget);\r\n                this._wheelLocker = new WheelLocker(data.scrollTarget)\r\n            }\r\n            this.callBase(data)\r\n        },\r\n        _init: function(e) {\r\n            this._wheelLocker.check(e, function() {\r\n                if (isDxMouseWheelEvent(e)) {\r\n                    this._accept(e)\r\n                }\r\n            }.bind(this));\r\n            this._pointerLocker.check(e, function() {\r\n                var skipCheck = this.isNative && isMouseEvent(e);\r\n                if (!isDxMouseWheelEvent(e) && !skipCheck) {\r\n                    this._accept(e)\r\n                }\r\n            }.bind(this));\r\n            this._fireEvent(SCROLL_INIT_EVENT, e);\r\n            this._prevEventData = eventData(e)\r\n        },\r\n        move: function(e) {\r\n            this.callBase.apply(this, arguments);\r\n            e.isScrollingEvent = this.isNative || e.isScrollingEvent\r\n        },\r\n        _start: function(e) {\r\n            this._savedEventData = eventData(e);\r\n            this._fireEvent(SCROLL_START_EVENT, e);\r\n            this._prevEventData = eventData(e)\r\n        },\r\n        _move: function(e) {\r\n            var currentEventData = eventData(e);\r\n            this._fireEvent(SCROLL_MOVE_EVENT, e, {\r\n                delta: eventDelta(this._prevEventData, currentEventData)\r\n            });\r\n            var delta = eventDelta(this._savedEventData, currentEventData);\r\n            if (delta.time > 200) {\r\n                this._savedEventData = this._prevEventData\r\n            }\r\n            this._prevEventData = eventData(e)\r\n        },\r\n        _end: function(e) {\r\n            var endEventDelta = eventDelta(this._prevEventData, eventData(e));\r\n            var velocity = {\r\n                x: 0,\r\n                y: 0\r\n            };\r\n            if (!isDxMouseWheelEvent(e) && endEventDelta.time < 100) {\r\n                var delta = eventDelta(this._savedEventData, this._prevEventData);\r\n                var velocityMultiplier = FRAME_DURATION / delta.time;\r\n                velocity = {\r\n                    x: delta.x * velocityMultiplier,\r\n                    y: delta.y * velocityMultiplier\r\n                }\r\n            }\r\n            this._fireEvent(SCROLL_END_EVENT, e, {\r\n                velocity: velocity\r\n            })\r\n        },\r\n        _stop: function(e) {\r\n            this._fireEvent(SCROLL_STOP_EVENT, e)\r\n        },\r\n        cancel: function(e) {\r\n            this.callBase.apply(this, arguments);\r\n            this._fireEvent(SCROLL_CANCEL_EVENT, e)\r\n        },\r\n        dispose: function() {\r\n            this.callBase.apply(this, arguments);\r\n            this._pointerLocker.dispose();\r\n            this._wheelLocker.dispose()\r\n        },\r\n        _clearSelection: function() {\r\n            if (this.isNative) {\r\n                return\r\n            }\r\n            return this.callBase.apply(this, arguments)\r\n        },\r\n        _toggleGestureCover: function() {\r\n            if (this.isNative) {\r\n                return\r\n            }\r\n            return this.callBase.apply(this, arguments)\r\n        }\r\n    }\r\n}());\r\nregisterEmitter({\r\n    emitter: ScrollEmitter,\r\n    events: [SCROLL_INIT_EVENT, SCROLL_START_EVENT, SCROLL_MOVE_EVENT, SCROLL_END_EVENT, SCROLL_STOP_EVENT, SCROLL_CANCEL_EVENT]\r\n});\r\nexport default {\r\n    init: SCROLL_INIT_EVENT,\r\n    start: SCROLL_START_EVENT,\r\n    move: SCROLL_MOVE_EVENT,\r\n    end: SCROLL_END_EVENT,\r\n    stop: SCROLL_STOP_EVENT,\r\n    cancel: SCROLL_CANCEL_EVENT,\r\n    scroll: SCROLL_EVENT\r\n};\r\n"]},"metadata":{},"sourceType":"module"}