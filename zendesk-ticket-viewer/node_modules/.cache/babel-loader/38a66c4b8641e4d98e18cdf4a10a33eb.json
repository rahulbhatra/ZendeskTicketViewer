{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/core/utils.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { noop } from \"../../core/utils/common\";\nimport { isDefined, isNumeric, isExponential, isFunction, isString } from \"../../core/utils/type\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { adjust, sign } from \"../../core/utils/math\";\nimport dateUtils from \"../../core/utils/date\";\nimport Color from \"../../color\";\nvar {\n  PI: PI,\n  LN10: LN10,\n  abs: abs,\n  log: log,\n  floor: floor,\n  ceil: ceil,\n  pow: pow,\n  sqrt: sqrt,\n  atan2: atan2\n} = Math;\nvar _min = Math.min;\nvar _max = Math.max;\nvar _cos = Math.cos;\nvar _sin = Math.sin;\nvar _round = Math.round;\nvar dateToMilliseconds = dateUtils.dateToMilliseconds;\nvar MAX_PIXEL_COUNT = 1e10;\nvar PI_DIV_180 = PI / 180;\nvar _isNaN = isNaN;\nvar _Number = Number;\nvar _NaN = NaN;\nexport var PANE_PADDING = 10;\nexport var getLog = function (value, base) {\n  if (!value) {\n    return _NaN;\n  }\n\n  return log(value) / log(base);\n};\nexport var getAdjustedLog10 = function (value) {\n  return adjust(getLog(value, 10));\n};\nexport var raiseTo = function (power, base) {\n  return pow(base, power);\n};\nexport var normalizeAngle = function (angle) {\n  return (angle % 360 + 360) % 360;\n};\nexport var convertAngleToRendererSpace = function (angle) {\n  return 90 - angle;\n};\nexport var degreesToRadians = function (value) {\n  return PI * value / 180;\n};\nexport var getCosAndSin = function (angle) {\n  var angleInRadians = degreesToRadians(angle);\n  return {\n    cos: _cos(angleInRadians),\n    sin: _sin(angleInRadians)\n  };\n};\nvar DECIMAL_ORDER_THRESHOLD = 1e-14;\nexport var getDistance = function (x1, y1, x2, y2) {\n  var diffX = x2 - x1;\n  var diffY = y2 - y1;\n  return sqrt(diffY * diffY + diffX * diffX);\n};\nexport var getDecimalOrder = function (number) {\n  var n = abs(number);\n  var cn;\n\n  if (!_isNaN(n)) {\n    if (n > 0) {\n      n = log(n) / LN10;\n      cn = ceil(n);\n      return cn - n < DECIMAL_ORDER_THRESHOLD ? cn : floor(n);\n    }\n\n    return 0;\n  }\n\n  return _NaN;\n};\nexport var getAppropriateFormat = function (start, end, count) {\n  var order = _max(getDecimalOrder(start), getDecimalOrder(end));\n\n  var precision = -getDecimalOrder(abs(end - start) / count);\n  var format;\n\n  if (!_isNaN(order) && !_isNaN(precision)) {\n    if (abs(order) <= 4) {\n      format = \"fixedPoint\";\n      precision < 0 && (precision = 0);\n      precision > 4 && (precision = 4);\n    } else {\n      format = \"exponential\";\n      precision += order - 1;\n      precision > 3 && (precision = 3);\n    }\n\n    return {\n      type: format,\n      precision: precision\n    };\n  }\n\n  return null;\n};\nexport var roundValue = function (value, precision) {\n  if (precision > 20) {\n    precision = 20;\n  }\n\n  if (isNumeric(value)) {\n    if (isExponential(value)) {\n      return _Number(value.toExponential(precision));\n    } else {\n      return _Number(value.toFixed(precision));\n    }\n  }\n};\nexport var getPower = function (value) {\n  return value.toExponential().split(\"e\")[1];\n};\nexport function map(array, callback) {\n  var i = 0;\n  var len = array.length;\n  var result = [];\n  var value;\n\n  while (i < len) {\n    value = callback(array[i], i);\n\n    if (null !== value) {\n      result.push(value);\n    }\n\n    i++;\n  }\n\n  return result;\n}\n\nfunction selectByKeys(object, keys) {\n  return map(keys, key => object[key] ? object[key] : null);\n}\n\nfunction decreaseFields(object, keys, eachDecrease, decrease) {\n  var dec = decrease;\n  each(keys, (_, key) => {\n    if (object[key]) {\n      object[key] -= eachDecrease;\n      dec -= eachDecrease;\n    }\n  });\n  return dec;\n}\n\nexport function normalizeEnum(value) {\n  return String(value).toLowerCase();\n}\nexport function setCanvasValues(canvas) {\n  if (canvas) {\n    canvas.originalTop = canvas.top;\n    canvas.originalBottom = canvas.bottom;\n    canvas.originalLeft = canvas.left;\n    canvas.originalRight = canvas.right;\n  }\n\n  return canvas;\n}\n\nfunction normalizeBBoxField(value) {\n  return -MAX_PIXEL_COUNT < value && value < +MAX_PIXEL_COUNT ? value : 0;\n}\n\nexport function normalizeBBox(bBox) {\n  var xl = normalizeBBoxField(floor(bBox.x));\n  var yt = normalizeBBoxField(floor(bBox.y));\n  var xr = normalizeBBoxField(ceil(bBox.width + bBox.x));\n  var yb = normalizeBBoxField(ceil(bBox.height + bBox.y));\n  var result = {\n    x: xl,\n    y: yt,\n    width: xr - xl,\n    height: yb - yt\n  };\n  result.isEmpty = !result.x && !result.y && !result.width && !result.height;\n  return result;\n}\nexport function rotateBBox(bBox, center, angle) {\n  var cos = _Number(_cos(angle * PI_DIV_180).toFixed(3));\n\n  var sin = _Number(_sin(angle * PI_DIV_180).toFixed(3));\n\n  var w2 = bBox.width / 2;\n  var h2 = bBox.height / 2;\n  var centerX = bBox.x + w2;\n  var centerY = bBox.y + h2;\n  var w2_ = abs(w2 * cos) + abs(h2 * sin);\n  var h2_ = abs(w2 * sin) + abs(h2 * cos);\n  var centerX_ = center[0] + (centerX - center[0]) * cos + (centerY - center[1]) * sin;\n  var centerY_ = center[1] - (centerX - center[0]) * sin + (centerY - center[1]) * cos;\n  return normalizeBBox({\n    x: centerX_ - w2_,\n    y: centerY_ - h2_,\n    width: 2 * w2_,\n    height: 2 * h2_\n  });\n}\nexport var decreaseGaps = function (object, keys, decrease) {\n  var arrayGaps;\n\n  do {\n    arrayGaps = selectByKeys(object, keys);\n    arrayGaps.push(ceil(decrease / arrayGaps.length));\n    decrease = decreaseFields(object, keys, _min.apply(null, arrayGaps), decrease);\n  } while (decrease > 0 && arrayGaps.length > 1);\n\n  return decrease;\n};\nexport var parseScalar = function (value, defaultValue) {\n  return void 0 !== value ? value : defaultValue;\n};\nexport var enumParser = function (values) {\n  var stored = {};\n  var i;\n  var ii;\n\n  for (i = 0, ii = values.length; i < ii; ++i) {\n    stored[normalizeEnum(values[i])] = 1;\n  }\n\n  return function (value, defaultValue) {\n    var _value = normalizeEnum(value);\n\n    return stored[_value] ? _value : defaultValue;\n  };\n};\nexport var patchFontOptions = function (options) {\n  var fontOptions = {};\n  each(options || {}, function (key, value) {\n    if (/^(cursor)$/i.test(key)) {} else if (\"opacity\" === key) {\n      value = null;\n    } else if (\"color\" === key) {\n      key = \"fill\";\n\n      if (\"opacity\" in options) {\n        var color = new Color(value);\n        value = \"rgba(\".concat(color.r, \",\").concat(color.g, \",\").concat(color.b, \",\").concat(options.opacity, \")\");\n      }\n    } else {\n      key = \"font-\" + key;\n    }\n\n    fontOptions[key] = value;\n  });\n  return fontOptions;\n};\nexport function convertPolarToXY(centerCoords, startAngle, angle, radius) {\n  var normalizedRadius = radius > 0 ? radius : 0;\n  angle = isDefined(angle) ? angle + startAngle - 90 : 0;\n  var cosSin = getCosAndSin(angle);\n  return {\n    x: _round(centerCoords.x + normalizedRadius * cosSin.cos),\n    y: _round(centerCoords.y + normalizedRadius * cosSin.sin)\n  };\n}\nexport var convertXYToPolar = function (centerCoords, x, y) {\n  var radius = getDistance(centerCoords.x, centerCoords.y, x, y);\n  var angle = atan2(y - centerCoords.y, x - centerCoords.x);\n  return {\n    phi: _round(normalizeAngle(180 * angle / PI)),\n    r: _round(radius)\n  };\n};\nexport var processSeriesTemplate = function (seriesTemplate, items) {\n  var customizeSeries = isFunction(seriesTemplate.customizeSeries) ? seriesTemplate.customizeSeries : noop;\n  var nameField = seriesTemplate.nameField;\n  var generatedSeries = {};\n  var seriesOrder = [];\n  var series;\n  var i = 0;\n  var length;\n  var data;\n  items = items || [];\n\n  for (length = items.length; i < length; i++) {\n    data = items[i];\n\n    if (nameField in data) {\n      series = generatedSeries[data[nameField]];\n\n      if (!series) {\n        series = generatedSeries[data[nameField]] = {\n          name: data[nameField],\n          nameFieldValue: data[nameField]\n        };\n        seriesOrder.push(series.name);\n      }\n    }\n  }\n\n  return map(seriesOrder, function (orderedName) {\n    var group = generatedSeries[orderedName];\n    return extend(group, customizeSeries.call(null, group.name));\n  });\n};\nexport var getCategoriesInfo = function (categories, startValue, endValue) {\n  if (0 === categories.length) {\n    return {\n      categories: []\n    };\n  }\n\n  startValue = isDefined(startValue) ? startValue : categories[0];\n  endValue = isDefined(endValue) ? endValue : categories[categories.length - 1];\n  var categoriesValue = map(categories, category => null === category || void 0 === category ? void 0 : category.valueOf());\n  var indexStartValue = categoriesValue.indexOf(startValue.valueOf());\n  var indexEndValue = categoriesValue.indexOf(endValue.valueOf());\n  var swapBuf;\n  var inverted = false;\n  indexStartValue < 0 && (indexStartValue = 0);\n  indexEndValue < 0 && (indexEndValue = categories.length - 1);\n\n  if (indexEndValue < indexStartValue) {\n    swapBuf = indexEndValue;\n    indexEndValue = indexStartValue;\n    indexStartValue = swapBuf;\n    inverted = true;\n  }\n\n  var visibleCategories = categories.slice(indexStartValue, indexEndValue + 1);\n  var lastIdx = visibleCategories.length - 1;\n  return {\n    categories: visibleCategories,\n    start: visibleCategories[inverted ? lastIdx : 0],\n    end: visibleCategories[inverted ? 0 : lastIdx],\n    inverted: inverted\n  };\n};\nexport function isRelativeHeightPane(pane) {\n  return !(pane.unit % 2);\n}\nexport function normalizePanesHeight(panes) {\n  panes.forEach(pane => {\n    var height = pane.height;\n    var unit = 0;\n    var parsedHeight = parseFloat(height) || void 0;\n\n    if (isString(height) && height.indexOf(\"px\") > -1 || isNumeric(height) && height > 1) {\n      parsedHeight = _round(parsedHeight);\n      unit = 1;\n    }\n\n    if (!unit && parsedHeight) {\n      if (isString(height) && height.indexOf(\"%\") > -1) {\n        parsedHeight /= 100;\n        unit = 2;\n      } else if (parsedHeight < 0) {\n        parsedHeight = parsedHeight < -1 ? 1 : abs(parsedHeight);\n      }\n    }\n\n    pane.height = parsedHeight;\n    pane.unit = unit;\n  });\n  var relativeHeightPanes = panes.filter(isRelativeHeightPane);\n  var weightSum = relativeHeightPanes.reduce((prev, next) => prev + (next.height || 0), 0);\n  var weightHeightCount = relativeHeightPanes.length;\n  var emptyHeightPanes = relativeHeightPanes.filter(pane => !pane.height);\n  var emptyHeightCount = emptyHeightPanes.length;\n\n  if (weightSum < 1 && emptyHeightCount) {\n    emptyHeightPanes.forEach(pane => pane.height = (1 - weightSum) / emptyHeightCount);\n  } else if (weightSum > 1 || weightSum < 1 && !emptyHeightCount || 1 === weightSum && emptyHeightCount) {\n    if (emptyHeightCount) {\n      var weightForEmpty = weightSum / weightHeightCount;\n      var emptyWeightSum = emptyHeightCount * weightForEmpty;\n      relativeHeightPanes.filter(pane => pane.height).forEach(pane => pane.height *= (weightSum - emptyWeightSum) / weightSum);\n      emptyHeightPanes.forEach(pane => pane.height = weightForEmpty);\n    }\n\n    relativeHeightPanes.forEach(pane => pane.height *= 1 / weightSum);\n  }\n}\nexport function updatePanesCanvases(panes, canvas, rotated) {\n  var distributedSpace = 0;\n  var padding = PANE_PADDING;\n  var paneSpace = rotated ? canvas.width - canvas.left - canvas.right : canvas.height - canvas.top - canvas.bottom;\n  var totalCustomSpace = panes.reduce((prev, cur) => prev + (!isRelativeHeightPane(cur) ? cur.height : 0), 0);\n  var usefulSpace = paneSpace - padding * (panes.length - 1) - totalCustomSpace;\n  var startName = rotated ? \"left\" : \"top\";\n  var endName = rotated ? \"right\" : \"bottom\";\n  panes.forEach(pane => {\n    var calcLength = !isRelativeHeightPane(pane) ? pane.height : _round(pane.height * usefulSpace);\n    pane.canvas = pane.canvas || {};\n    extend(pane.canvas, canvas);\n    pane.canvas[startName] = canvas[startName] + distributedSpace;\n    pane.canvas[endName] = canvas[endName] + (paneSpace - calcLength - distributedSpace);\n    distributedSpace = distributedSpace + calcLength + padding;\n    setCanvasValues(pane.canvas);\n  });\n}\nexport var unique = function (array) {\n  var values = {};\n  return map(array, function (item) {\n    var result = !values[item] ? item : null;\n    values[item] = true;\n    return result;\n  });\n};\nexport var getVerticallyShiftedAngularCoords = function (bBox, dy, center) {\n  var isPositive = bBox.x + bBox.width / 2 >= center.x;\n  var horizontalOffset1 = (isPositive ? bBox.x : bBox.x + bBox.width) - center.x;\n  var verticalOffset1 = bBox.y - center.y;\n  var verticalOffset2 = verticalOffset1 + dy;\n\n  var horizontalOffset2 = _round(sqrt(horizontalOffset1 * horizontalOffset1 + verticalOffset1 * verticalOffset1 - verticalOffset2 * verticalOffset2));\n\n  var dx = (isPositive ? +horizontalOffset2 : -horizontalOffset2) || horizontalOffset1;\n  return {\n    x: center.x + (isPositive ? dx : dx - bBox.width),\n    y: bBox.y + dy\n  };\n};\nexport function mergeMarginOptions(opt1, opt2) {\n  return {\n    checkInterval: opt1.checkInterval || opt2.checkInterval,\n    size: _max(opt1.size || 0, opt2.size || 0),\n    percentStick: opt1.percentStick || opt2.percentStick,\n    sizePointNormalState: _max(opt1.sizePointNormalState || 0, opt2.sizePointNormalState || 0)\n  };\n}\nexport function getVizRangeObject(value) {\n  if (Array.isArray(value)) {\n    return {\n      startValue: value[0],\n      endValue: value[1]\n    };\n  } else {\n    return value || {};\n  }\n}\nexport function convertVisualRangeObject(visualRange, convertToVisualRange) {\n  if (convertToVisualRange) {\n    return visualRange;\n  }\n\n  return [visualRange.startValue, visualRange.endValue];\n}\nexport function getAddFunction(range, correctZeroLevel) {\n  if (\"datetime\" === range.dataType) {\n    return function (rangeValue, marginValue) {\n      var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\n      return new Date(rangeValue.getTime() + sign * marginValue);\n    };\n  }\n\n  if (\"logarithmic\" === range.axisType) {\n    return function (rangeValue, marginValue) {\n      var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\n      var log = getLogExt(rangeValue, range.base) + sign * marginValue;\n      return raiseToExt(log, range.base);\n    };\n  }\n\n  return function (rangeValue, marginValue) {\n    var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\n    var newValue = rangeValue + sign * marginValue;\n    return correctZeroLevel && newValue * rangeValue <= 0 ? 0 : newValue;\n  };\n}\nexport function adjustVisualRange(options, visualRange, wholeRange, dataRange) {\n  var minDefined = isDefined(visualRange.startValue);\n  var maxDefined = isDefined(visualRange.endValue);\n  var nonDiscrete = \"discrete\" !== options.axisType;\n  dataRange = dataRange || wholeRange;\n  var add = getAddFunction(options, false);\n  var min = minDefined ? visualRange.startValue : dataRange.min;\n  var max = maxDefined ? visualRange.endValue : dataRange.max;\n  var rangeLength = visualRange.length;\n  var categories = dataRange.categories;\n\n  if (nonDiscrete && !isDefined(min) && !isDefined(max)) {\n    return {\n      startValue: min,\n      endValue: max\n    };\n  }\n\n  if (isDefined(rangeLength)) {\n    if (nonDiscrete) {\n      if (\"datetime\" === options.dataType && !isNumeric(rangeLength)) {\n        rangeLength = dateToMilliseconds(rangeLength);\n      }\n\n      if (maxDefined && !minDefined || !maxDefined && !minDefined) {\n        isDefined(wholeRange.max) && (max = max > wholeRange.max ? wholeRange.max : max);\n        min = add(max, rangeLength, -1);\n      } else if (minDefined && !maxDefined) {\n        isDefined(wholeRange.min) && (min = min < wholeRange.min ? wholeRange.min : min);\n        max = add(min, rangeLength);\n      }\n    } else {\n      rangeLength = parseInt(rangeLength);\n\n      if (!isNaN(rangeLength) && isFinite(rangeLength)) {\n        rangeLength--;\n\n        if (!maxDefined && !minDefined) {\n          max = categories[categories.length - 1];\n          min = categories[categories.length - 1 - rangeLength];\n        } else if (minDefined && !maxDefined) {\n          var categoriesInfo = getCategoriesInfo(categories, min, void 0);\n          max = categoriesInfo.categories[rangeLength];\n        } else if (!minDefined && maxDefined) {\n          var _categoriesInfo = getCategoriesInfo(categories, void 0, max);\n\n          min = _categoriesInfo.categories[_categoriesInfo.categories.length - 1 - rangeLength];\n        }\n      }\n    }\n  }\n\n  if (nonDiscrete) {\n    if (isDefined(wholeRange.max) && max > wholeRange.max) {\n      max = wholeRange.max;\n    }\n\n    if (isDefined(wholeRange.min) && min < wholeRange.min) {\n      min = wholeRange.min;\n    }\n  }\n\n  return {\n    startValue: min,\n    endValue: max\n  };\n}\nexport function getLogExt(value, base) {\n  var allowNegatives = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\n  var linearThreshold = arguments.length > 3 ? arguments[3] : void 0;\n\n  if (!allowNegatives) {\n    return getLog(value, base);\n  }\n\n  if (0 === value) {\n    return 0;\n  }\n\n  var transformValue = getLog(abs(value), base) - (linearThreshold - 1);\n\n  if (transformValue < 0) {\n    return 0;\n  }\n\n  return adjust(sign(value) * transformValue, Number(pow(base, linearThreshold - 1).toFixed(abs(linearThreshold))));\n}\nexport function raiseToExt(value, base) {\n  var allowNegatives = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\n  var linearThreshold = arguments.length > 3 ? arguments[3] : void 0;\n\n  if (!allowNegatives) {\n    return raiseTo(value, base);\n  }\n\n  if (0 === value) {\n    return 0;\n  }\n\n  var transformValue = raiseTo(abs(value) + (linearThreshold - 1), base);\n\n  if (transformValue < 0) {\n    return 0;\n  }\n\n  return adjust(sign(value) * transformValue, Number(pow(base, linearThreshold).toFixed(abs(linearThreshold))));\n}\nexport function rangesAreEqual(range, rangeFromOptions) {\n  if (Array.isArray(rangeFromOptions)) {\n    return range.length === rangeFromOptions.length && range.every((item, i) => valueOf(item) === valueOf(rangeFromOptions[i]));\n  } else {\n    return valueOf(range.startValue) === valueOf(rangeFromOptions.startValue) && valueOf(range.endValue) === valueOf(rangeFromOptions.endValue);\n  }\n}\nexport function valueOf(value) {\n  return value && value.valueOf();\n}\nexport function pointInCanvas(canvas, x, y) {\n  return x >= canvas.left && x <= canvas.right && y >= canvas.top && y <= canvas.bottom;\n}","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/viz/core/utils.js"],"names":["noop","isDefined","isNumeric","isExponential","isFunction","isString","extend","each","adjust","sign","dateUtils","Color","PI","LN10","abs","log","floor","ceil","pow","sqrt","atan2","Math","_min","min","_max","max","_cos","cos","_sin","sin","_round","round","dateToMilliseconds","MAX_PIXEL_COUNT","PI_DIV_180","_isNaN","isNaN","_Number","Number","_NaN","NaN","PANE_PADDING","getLog","value","base","getAdjustedLog10","raiseTo","power","normalizeAngle","angle","convertAngleToRendererSpace","degreesToRadians","getCosAndSin","angleInRadians","DECIMAL_ORDER_THRESHOLD","getDistance","x1","y1","x2","y2","diffX","diffY","getDecimalOrder","number","n","cn","getAppropriateFormat","start","end","count","order","precision","format","type","roundValue","toExponential","toFixed","getPower","split","map","array","callback","i","len","length","result","push","selectByKeys","object","keys","key","decreaseFields","eachDecrease","decrease","dec","_","normalizeEnum","String","toLowerCase","setCanvasValues","canvas","originalTop","top","originalBottom","bottom","originalLeft","left","originalRight","right","normalizeBBoxField","normalizeBBox","bBox","xl","x","yt","y","xr","width","yb","height","isEmpty","rotateBBox","center","w2","h2","centerX","centerY","w2_","h2_","centerX_","centerY_","decreaseGaps","arrayGaps","apply","parseScalar","defaultValue","enumParser","values","stored","ii","_value","patchFontOptions","options","fontOptions","test","color","concat","r","g","b","opacity","convertPolarToXY","centerCoords","startAngle","radius","normalizedRadius","cosSin","convertXYToPolar","phi","processSeriesTemplate","seriesTemplate","items","customizeSeries","nameField","generatedSeries","seriesOrder","series","data","name","nameFieldValue","orderedName","group","call","getCategoriesInfo","categories","startValue","endValue","categoriesValue","category","valueOf","indexStartValue","indexOf","indexEndValue","swapBuf","inverted","visibleCategories","slice","lastIdx","isRelativeHeightPane","pane","unit","normalizePanesHeight","panes","forEach","parsedHeight","parseFloat","relativeHeightPanes","filter","weightSum","reduce","prev","next","weightHeightCount","emptyHeightPanes","emptyHeightCount","weightForEmpty","emptyWeightSum","updatePanesCanvases","rotated","distributedSpace","padding","paneSpace","totalCustomSpace","cur","usefulSpace","startName","endName","calcLength","unique","item","getVerticallyShiftedAngularCoords","dy","isPositive","horizontalOffset1","verticalOffset1","verticalOffset2","horizontalOffset2","dx","mergeMarginOptions","opt1","opt2","checkInterval","size","percentStick","sizePointNormalState","getVizRangeObject","Array","isArray","convertVisualRangeObject","visualRange","convertToVisualRange","getAddFunction","range","correctZeroLevel","dataType","rangeValue","marginValue","arguments","Date","getTime","axisType","getLogExt","raiseToExt","newValue","adjustVisualRange","wholeRange","dataRange","minDefined","maxDefined","nonDiscrete","add","rangeLength","parseInt","isFinite","categoriesInfo","_categoriesInfo","allowNegatives","linearThreshold","transformValue","rangesAreEqual","rangeFromOptions","every","pointInCanvas"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/core/utils.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    isDefined,\r\n    isNumeric,\r\n    isExponential,\r\n    isFunction,\r\n    isString\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    adjust,\r\n    sign\r\n} from \"../../core/utils/math\";\r\nimport dateUtils from \"../../core/utils/date\";\r\nimport Color from \"../../color\";\r\nvar {\r\n    PI: PI,\r\n    LN10: LN10,\r\n    abs: abs,\r\n    log: log,\r\n    floor: floor,\r\n    ceil: ceil,\r\n    pow: pow,\r\n    sqrt: sqrt,\r\n    atan2: atan2\r\n} = Math;\r\nvar _min = Math.min;\r\nvar _max = Math.max;\r\nvar _cos = Math.cos;\r\nvar _sin = Math.sin;\r\nvar _round = Math.round;\r\nvar dateToMilliseconds = dateUtils.dateToMilliseconds;\r\nvar MAX_PIXEL_COUNT = 1e10;\r\nvar PI_DIV_180 = PI / 180;\r\nvar _isNaN = isNaN;\r\nvar _Number = Number;\r\nvar _NaN = NaN;\r\nexport var PANE_PADDING = 10;\r\nexport var getLog = function(value, base) {\r\n    if (!value) {\r\n        return _NaN\r\n    }\r\n    return log(value) / log(base)\r\n};\r\nexport var getAdjustedLog10 = function(value) {\r\n    return adjust(getLog(value, 10))\r\n};\r\nexport var raiseTo = function(power, base) {\r\n    return pow(base, power)\r\n};\r\nexport var normalizeAngle = function(angle) {\r\n    return (angle % 360 + 360) % 360\r\n};\r\nexport var convertAngleToRendererSpace = function(angle) {\r\n    return 90 - angle\r\n};\r\nexport var degreesToRadians = function(value) {\r\n    return PI * value / 180\r\n};\r\nexport var getCosAndSin = function(angle) {\r\n    var angleInRadians = degreesToRadians(angle);\r\n    return {\r\n        cos: _cos(angleInRadians),\r\n        sin: _sin(angleInRadians)\r\n    }\r\n};\r\nvar DECIMAL_ORDER_THRESHOLD = 1e-14;\r\nexport var getDistance = function(x1, y1, x2, y2) {\r\n    var diffX = x2 - x1;\r\n    var diffY = y2 - y1;\r\n    return sqrt(diffY * diffY + diffX * diffX)\r\n};\r\nexport var getDecimalOrder = function(number) {\r\n    var n = abs(number);\r\n    var cn;\r\n    if (!_isNaN(n)) {\r\n        if (n > 0) {\r\n            n = log(n) / LN10;\r\n            cn = ceil(n);\r\n            return cn - n < DECIMAL_ORDER_THRESHOLD ? cn : floor(n)\r\n        }\r\n        return 0\r\n    }\r\n    return _NaN\r\n};\r\nexport var getAppropriateFormat = function(start, end, count) {\r\n    var order = _max(getDecimalOrder(start), getDecimalOrder(end));\r\n    var precision = -getDecimalOrder(abs(end - start) / count);\r\n    var format;\r\n    if (!_isNaN(order) && !_isNaN(precision)) {\r\n        if (abs(order) <= 4) {\r\n            format = \"fixedPoint\";\r\n            precision < 0 && (precision = 0);\r\n            precision > 4 && (precision = 4)\r\n        } else {\r\n            format = \"exponential\";\r\n            precision += order - 1;\r\n            precision > 3 && (precision = 3)\r\n        }\r\n        return {\r\n            type: format,\r\n            precision: precision\r\n        }\r\n    }\r\n    return null\r\n};\r\nexport var roundValue = function(value, precision) {\r\n    if (precision > 20) {\r\n        precision = 20\r\n    }\r\n    if (isNumeric(value)) {\r\n        if (isExponential(value)) {\r\n            return _Number(value.toExponential(precision))\r\n        } else {\r\n            return _Number(value.toFixed(precision))\r\n        }\r\n    }\r\n};\r\nexport var getPower = function(value) {\r\n    return value.toExponential().split(\"e\")[1]\r\n};\r\nexport function map(array, callback) {\r\n    var i = 0;\r\n    var len = array.length;\r\n    var result = [];\r\n    var value;\r\n    while (i < len) {\r\n        value = callback(array[i], i);\r\n        if (null !== value) {\r\n            result.push(value)\r\n        }\r\n        i++\r\n    }\r\n    return result\r\n}\r\n\r\nfunction selectByKeys(object, keys) {\r\n    return map(keys, key => object[key] ? object[key] : null)\r\n}\r\n\r\nfunction decreaseFields(object, keys, eachDecrease, decrease) {\r\n    var dec = decrease;\r\n    each(keys, (_, key) => {\r\n        if (object[key]) {\r\n            object[key] -= eachDecrease;\r\n            dec -= eachDecrease\r\n        }\r\n    });\r\n    return dec\r\n}\r\nexport function normalizeEnum(value) {\r\n    return String(value).toLowerCase()\r\n}\r\nexport function setCanvasValues(canvas) {\r\n    if (canvas) {\r\n        canvas.originalTop = canvas.top;\r\n        canvas.originalBottom = canvas.bottom;\r\n        canvas.originalLeft = canvas.left;\r\n        canvas.originalRight = canvas.right\r\n    }\r\n    return canvas\r\n}\r\n\r\nfunction normalizeBBoxField(value) {\r\n    return -MAX_PIXEL_COUNT < value && value < +MAX_PIXEL_COUNT ? value : 0\r\n}\r\nexport function normalizeBBox(bBox) {\r\n    var xl = normalizeBBoxField(floor(bBox.x));\r\n    var yt = normalizeBBoxField(floor(bBox.y));\r\n    var xr = normalizeBBoxField(ceil(bBox.width + bBox.x));\r\n    var yb = normalizeBBoxField(ceil(bBox.height + bBox.y));\r\n    var result = {\r\n        x: xl,\r\n        y: yt,\r\n        width: xr - xl,\r\n        height: yb - yt\r\n    };\r\n    result.isEmpty = !result.x && !result.y && !result.width && !result.height;\r\n    return result\r\n}\r\nexport function rotateBBox(bBox, center, angle) {\r\n    var cos = _Number(_cos(angle * PI_DIV_180).toFixed(3));\r\n    var sin = _Number(_sin(angle * PI_DIV_180).toFixed(3));\r\n    var w2 = bBox.width / 2;\r\n    var h2 = bBox.height / 2;\r\n    var centerX = bBox.x + w2;\r\n    var centerY = bBox.y + h2;\r\n    var w2_ = abs(w2 * cos) + abs(h2 * sin);\r\n    var h2_ = abs(w2 * sin) + abs(h2 * cos);\r\n    var centerX_ = center[0] + (centerX - center[0]) * cos + (centerY - center[1]) * sin;\r\n    var centerY_ = center[1] - (centerX - center[0]) * sin + (centerY - center[1]) * cos;\r\n    return normalizeBBox({\r\n        x: centerX_ - w2_,\r\n        y: centerY_ - h2_,\r\n        width: 2 * w2_,\r\n        height: 2 * h2_\r\n    })\r\n}\r\nexport var decreaseGaps = function(object, keys, decrease) {\r\n    var arrayGaps;\r\n    do {\r\n        arrayGaps = selectByKeys(object, keys);\r\n        arrayGaps.push(ceil(decrease / arrayGaps.length));\r\n        decrease = decreaseFields(object, keys, _min.apply(null, arrayGaps), decrease)\r\n    } while (decrease > 0 && arrayGaps.length > 1);\r\n    return decrease\r\n};\r\nexport var parseScalar = function(value, defaultValue) {\r\n    return void 0 !== value ? value : defaultValue\r\n};\r\nexport var enumParser = function(values) {\r\n    var stored = {};\r\n    var i;\r\n    var ii;\r\n    for (i = 0, ii = values.length; i < ii; ++i) {\r\n        stored[normalizeEnum(values[i])] = 1\r\n    }\r\n    return function(value, defaultValue) {\r\n        var _value = normalizeEnum(value);\r\n        return stored[_value] ? _value : defaultValue\r\n    }\r\n};\r\nexport var patchFontOptions = function(options) {\r\n    var fontOptions = {};\r\n    each(options || {}, (function(key, value) {\r\n        if (/^(cursor)$/i.test(key)) {} else if (\"opacity\" === key) {\r\n            value = null\r\n        } else if (\"color\" === key) {\r\n            key = \"fill\";\r\n            if (\"opacity\" in options) {\r\n                var color = new Color(value);\r\n                value = \"rgba(\".concat(color.r, \",\").concat(color.g, \",\").concat(color.b, \",\").concat(options.opacity, \")\")\r\n            }\r\n        } else {\r\n            key = \"font-\" + key\r\n        }\r\n        fontOptions[key] = value\r\n    }));\r\n    return fontOptions\r\n};\r\nexport function convertPolarToXY(centerCoords, startAngle, angle, radius) {\r\n    var normalizedRadius = radius > 0 ? radius : 0;\r\n    angle = isDefined(angle) ? angle + startAngle - 90 : 0;\r\n    var cosSin = getCosAndSin(angle);\r\n    return {\r\n        x: _round(centerCoords.x + normalizedRadius * cosSin.cos),\r\n        y: _round(centerCoords.y + normalizedRadius * cosSin.sin)\r\n    }\r\n}\r\nexport var convertXYToPolar = function(centerCoords, x, y) {\r\n    var radius = getDistance(centerCoords.x, centerCoords.y, x, y);\r\n    var angle = atan2(y - centerCoords.y, x - centerCoords.x);\r\n    return {\r\n        phi: _round(normalizeAngle(180 * angle / PI)),\r\n        r: _round(radius)\r\n    }\r\n};\r\nexport var processSeriesTemplate = function(seriesTemplate, items) {\r\n    var customizeSeries = isFunction(seriesTemplate.customizeSeries) ? seriesTemplate.customizeSeries : noop;\r\n    var nameField = seriesTemplate.nameField;\r\n    var generatedSeries = {};\r\n    var seriesOrder = [];\r\n    var series;\r\n    var i = 0;\r\n    var length;\r\n    var data;\r\n    items = items || [];\r\n    for (length = items.length; i < length; i++) {\r\n        data = items[i];\r\n        if (nameField in data) {\r\n            series = generatedSeries[data[nameField]];\r\n            if (!series) {\r\n                series = generatedSeries[data[nameField]] = {\r\n                    name: data[nameField],\r\n                    nameFieldValue: data[nameField]\r\n                };\r\n                seriesOrder.push(series.name)\r\n            }\r\n        }\r\n    }\r\n    return map(seriesOrder, (function(orderedName) {\r\n        var group = generatedSeries[orderedName];\r\n        return extend(group, customizeSeries.call(null, group.name))\r\n    }))\r\n};\r\nexport var getCategoriesInfo = function(categories, startValue, endValue) {\r\n    if (0 === categories.length) {\r\n        return {\r\n            categories: []\r\n        }\r\n    }\r\n    startValue = isDefined(startValue) ? startValue : categories[0];\r\n    endValue = isDefined(endValue) ? endValue : categories[categories.length - 1];\r\n    var categoriesValue = map(categories, category => null === category || void 0 === category ? void 0 : category.valueOf());\r\n    var indexStartValue = categoriesValue.indexOf(startValue.valueOf());\r\n    var indexEndValue = categoriesValue.indexOf(endValue.valueOf());\r\n    var swapBuf;\r\n    var inverted = false;\r\n    indexStartValue < 0 && (indexStartValue = 0);\r\n    indexEndValue < 0 && (indexEndValue = categories.length - 1);\r\n    if (indexEndValue < indexStartValue) {\r\n        swapBuf = indexEndValue;\r\n        indexEndValue = indexStartValue;\r\n        indexStartValue = swapBuf;\r\n        inverted = true\r\n    }\r\n    var visibleCategories = categories.slice(indexStartValue, indexEndValue + 1);\r\n    var lastIdx = visibleCategories.length - 1;\r\n    return {\r\n        categories: visibleCategories,\r\n        start: visibleCategories[inverted ? lastIdx : 0],\r\n        end: visibleCategories[inverted ? 0 : lastIdx],\r\n        inverted: inverted\r\n    }\r\n};\r\nexport function isRelativeHeightPane(pane) {\r\n    return !(pane.unit % 2)\r\n}\r\nexport function normalizePanesHeight(panes) {\r\n    panes.forEach(pane => {\r\n        var height = pane.height;\r\n        var unit = 0;\r\n        var parsedHeight = parseFloat(height) || void 0;\r\n        if (isString(height) && height.indexOf(\"px\") > -1 || isNumeric(height) && height > 1) {\r\n            parsedHeight = _round(parsedHeight);\r\n            unit = 1\r\n        }\r\n        if (!unit && parsedHeight) {\r\n            if (isString(height) && height.indexOf(\"%\") > -1) {\r\n                parsedHeight /= 100;\r\n                unit = 2\r\n            } else if (parsedHeight < 0) {\r\n                parsedHeight = parsedHeight < -1 ? 1 : abs(parsedHeight)\r\n            }\r\n        }\r\n        pane.height = parsedHeight;\r\n        pane.unit = unit\r\n    });\r\n    var relativeHeightPanes = panes.filter(isRelativeHeightPane);\r\n    var weightSum = relativeHeightPanes.reduce((prev, next) => prev + (next.height || 0), 0);\r\n    var weightHeightCount = relativeHeightPanes.length;\r\n    var emptyHeightPanes = relativeHeightPanes.filter(pane => !pane.height);\r\n    var emptyHeightCount = emptyHeightPanes.length;\r\n    if (weightSum < 1 && emptyHeightCount) {\r\n        emptyHeightPanes.forEach(pane => pane.height = (1 - weightSum) / emptyHeightCount)\r\n    } else if (weightSum > 1 || weightSum < 1 && !emptyHeightCount || 1 === weightSum && emptyHeightCount) {\r\n        if (emptyHeightCount) {\r\n            var weightForEmpty = weightSum / weightHeightCount;\r\n            var emptyWeightSum = emptyHeightCount * weightForEmpty;\r\n            relativeHeightPanes.filter(pane => pane.height).forEach(pane => pane.height *= (weightSum - emptyWeightSum) / weightSum);\r\n            emptyHeightPanes.forEach(pane => pane.height = weightForEmpty)\r\n        }\r\n        relativeHeightPanes.forEach(pane => pane.height *= 1 / weightSum)\r\n    }\r\n}\r\nexport function updatePanesCanvases(panes, canvas, rotated) {\r\n    var distributedSpace = 0;\r\n    var padding = PANE_PADDING;\r\n    var paneSpace = rotated ? canvas.width - canvas.left - canvas.right : canvas.height - canvas.top - canvas.bottom;\r\n    var totalCustomSpace = panes.reduce((prev, cur) => prev + (!isRelativeHeightPane(cur) ? cur.height : 0), 0);\r\n    var usefulSpace = paneSpace - padding * (panes.length - 1) - totalCustomSpace;\r\n    var startName = rotated ? \"left\" : \"top\";\r\n    var endName = rotated ? \"right\" : \"bottom\";\r\n    panes.forEach(pane => {\r\n        var calcLength = !isRelativeHeightPane(pane) ? pane.height : _round(pane.height * usefulSpace);\r\n        pane.canvas = pane.canvas || {};\r\n        extend(pane.canvas, canvas);\r\n        pane.canvas[startName] = canvas[startName] + distributedSpace;\r\n        pane.canvas[endName] = canvas[endName] + (paneSpace - calcLength - distributedSpace);\r\n        distributedSpace = distributedSpace + calcLength + padding;\r\n        setCanvasValues(pane.canvas)\r\n    })\r\n}\r\nexport var unique = function(array) {\r\n    var values = {};\r\n    return map(array, (function(item) {\r\n        var result = !values[item] ? item : null;\r\n        values[item] = true;\r\n        return result\r\n    }))\r\n};\r\nexport var getVerticallyShiftedAngularCoords = function(bBox, dy, center) {\r\n    var isPositive = bBox.x + bBox.width / 2 >= center.x;\r\n    var horizontalOffset1 = (isPositive ? bBox.x : bBox.x + bBox.width) - center.x;\r\n    var verticalOffset1 = bBox.y - center.y;\r\n    var verticalOffset2 = verticalOffset1 + dy;\r\n    var horizontalOffset2 = _round(sqrt(horizontalOffset1 * horizontalOffset1 + verticalOffset1 * verticalOffset1 - verticalOffset2 * verticalOffset2));\r\n    var dx = (isPositive ? +horizontalOffset2 : -horizontalOffset2) || horizontalOffset1;\r\n    return {\r\n        x: center.x + (isPositive ? dx : dx - bBox.width),\r\n        y: bBox.y + dy\r\n    }\r\n};\r\nexport function mergeMarginOptions(opt1, opt2) {\r\n    return {\r\n        checkInterval: opt1.checkInterval || opt2.checkInterval,\r\n        size: _max(opt1.size || 0, opt2.size || 0),\r\n        percentStick: opt1.percentStick || opt2.percentStick,\r\n        sizePointNormalState: _max(opt1.sizePointNormalState || 0, opt2.sizePointNormalState || 0)\r\n    }\r\n}\r\nexport function getVizRangeObject(value) {\r\n    if (Array.isArray(value)) {\r\n        return {\r\n            startValue: value[0],\r\n            endValue: value[1]\r\n        }\r\n    } else {\r\n        return value || {}\r\n    }\r\n}\r\nexport function convertVisualRangeObject(visualRange, convertToVisualRange) {\r\n    if (convertToVisualRange) {\r\n        return visualRange\r\n    }\r\n    return [visualRange.startValue, visualRange.endValue]\r\n}\r\nexport function getAddFunction(range, correctZeroLevel) {\r\n    if (\"datetime\" === range.dataType) {\r\n        return function(rangeValue, marginValue) {\r\n            var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\r\n            return new Date(rangeValue.getTime() + sign * marginValue)\r\n        }\r\n    }\r\n    if (\"logarithmic\" === range.axisType) {\r\n        return function(rangeValue, marginValue) {\r\n            var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\r\n            var log = getLogExt(rangeValue, range.base) + sign * marginValue;\r\n            return raiseToExt(log, range.base)\r\n        }\r\n    }\r\n    return function(rangeValue, marginValue) {\r\n        var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\r\n        var newValue = rangeValue + sign * marginValue;\r\n        return correctZeroLevel && newValue * rangeValue <= 0 ? 0 : newValue\r\n    }\r\n}\r\nexport function adjustVisualRange(options, visualRange, wholeRange, dataRange) {\r\n    var minDefined = isDefined(visualRange.startValue);\r\n    var maxDefined = isDefined(visualRange.endValue);\r\n    var nonDiscrete = \"discrete\" !== options.axisType;\r\n    dataRange = dataRange || wholeRange;\r\n    var add = getAddFunction(options, false);\r\n    var min = minDefined ? visualRange.startValue : dataRange.min;\r\n    var max = maxDefined ? visualRange.endValue : dataRange.max;\r\n    var rangeLength = visualRange.length;\r\n    var categories = dataRange.categories;\r\n    if (nonDiscrete && !isDefined(min) && !isDefined(max)) {\r\n        return {\r\n            startValue: min,\r\n            endValue: max\r\n        }\r\n    }\r\n    if (isDefined(rangeLength)) {\r\n        if (nonDiscrete) {\r\n            if (\"datetime\" === options.dataType && !isNumeric(rangeLength)) {\r\n                rangeLength = dateToMilliseconds(rangeLength)\r\n            }\r\n            if (maxDefined && !minDefined || !maxDefined && !minDefined) {\r\n                isDefined(wholeRange.max) && (max = max > wholeRange.max ? wholeRange.max : max);\r\n                min = add(max, rangeLength, -1)\r\n            } else if (minDefined && !maxDefined) {\r\n                isDefined(wholeRange.min) && (min = min < wholeRange.min ? wholeRange.min : min);\r\n                max = add(min, rangeLength)\r\n            }\r\n        } else {\r\n            rangeLength = parseInt(rangeLength);\r\n            if (!isNaN(rangeLength) && isFinite(rangeLength)) {\r\n                rangeLength--;\r\n                if (!maxDefined && !minDefined) {\r\n                    max = categories[categories.length - 1];\r\n                    min = categories[categories.length - 1 - rangeLength]\r\n                } else if (minDefined && !maxDefined) {\r\n                    var categoriesInfo = getCategoriesInfo(categories, min, void 0);\r\n                    max = categoriesInfo.categories[rangeLength]\r\n                } else if (!minDefined && maxDefined) {\r\n                    var _categoriesInfo = getCategoriesInfo(categories, void 0, max);\r\n                    min = _categoriesInfo.categories[_categoriesInfo.categories.length - 1 - rangeLength]\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (nonDiscrete) {\r\n        if (isDefined(wholeRange.max) && max > wholeRange.max) {\r\n            max = wholeRange.max\r\n        }\r\n        if (isDefined(wholeRange.min) && min < wholeRange.min) {\r\n            min = wholeRange.min\r\n        }\r\n    }\r\n    return {\r\n        startValue: min,\r\n        endValue: max\r\n    }\r\n}\r\nexport function getLogExt(value, base) {\r\n    var allowNegatives = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\r\n    var linearThreshold = arguments.length > 3 ? arguments[3] : void 0;\r\n    if (!allowNegatives) {\r\n        return getLog(value, base)\r\n    }\r\n    if (0 === value) {\r\n        return 0\r\n    }\r\n    var transformValue = getLog(abs(value), base) - (linearThreshold - 1);\r\n    if (transformValue < 0) {\r\n        return 0\r\n    }\r\n    return adjust(sign(value) * transformValue, Number(pow(base, linearThreshold - 1).toFixed(abs(linearThreshold))))\r\n}\r\nexport function raiseToExt(value, base) {\r\n    var allowNegatives = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\r\n    var linearThreshold = arguments.length > 3 ? arguments[3] : void 0;\r\n    if (!allowNegatives) {\r\n        return raiseTo(value, base)\r\n    }\r\n    if (0 === value) {\r\n        return 0\r\n    }\r\n    var transformValue = raiseTo(abs(value) + (linearThreshold - 1), base);\r\n    if (transformValue < 0) {\r\n        return 0\r\n    }\r\n    return adjust(sign(value) * transformValue, Number(pow(base, linearThreshold).toFixed(abs(linearThreshold))))\r\n}\r\nexport function rangesAreEqual(range, rangeFromOptions) {\r\n    if (Array.isArray(rangeFromOptions)) {\r\n        return range.length === rangeFromOptions.length && range.every((item, i) => valueOf(item) === valueOf(rangeFromOptions[i]))\r\n    } else {\r\n        return valueOf(range.startValue) === valueOf(rangeFromOptions.startValue) && valueOf(range.endValue) === valueOf(rangeFromOptions.endValue)\r\n    }\r\n}\r\nexport function valueOf(value) {\r\n    return value && value.valueOf()\r\n}\r\nexport function pointInCanvas(canvas, x, y) {\r\n    return x >= canvas.left && x <= canvas.right && y >= canvas.top && y <= canvas.bottom\r\n}\r\n"]},"metadata":{},"sourceType":"module"}