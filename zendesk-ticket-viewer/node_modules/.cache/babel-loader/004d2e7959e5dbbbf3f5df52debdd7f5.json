{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/series/points/polar_point.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../../core/utils/extend\";\nvar _extend = extend;\nimport symbolPoint from \"./symbol_point\";\nimport barPoint from \"./bar_point\";\nimport piePoint from \"./pie_point\";\nimport { isDefined } from \"../../../core/utils/type\";\nimport { normalizeAngle, convertPolarToXY, getCosAndSin, convertXYToPolar } from \"../../core/utils\";\nvar _math = Math;\nvar _max = _math.max;\nimport consts from \"../../components/consts\";\nvar RADIAL_LABEL_INDENT = consts.radialLabelIndent;\nvar ERROR_BARS_ANGLE_OFFSET = 90;\nvar CANVAS_POSITION_START = \"canvas_position_start\";\nvar CANVAS_POSITION_END = \"canvas_position_end\";\nvar CANVAS_POSITION_DEFAULT = \"canvas_position_default\";\nexport var polarSymbolPoint = _extend({}, symbolPoint, {\n  _getLabelCoords: piePoint._getLabelCoords,\n  _getElementCoords: piePoint._getElementCoords,\n  _moveLabelOnCanvas: function (coord, visibleArea, labelBBox) {\n    var x = coord.x;\n    var y = coord.y;\n\n    if (visibleArea.minX > x) {\n      x = visibleArea.minX;\n    }\n\n    if (visibleArea.maxX < x + labelBBox.width) {\n      x = visibleArea.maxX - labelBBox.width;\n    }\n\n    if (visibleArea.minY > y) {\n      y = visibleArea.minY;\n    }\n\n    if (visibleArea.maxY < y + labelBBox.height) {\n      y = visibleArea.maxY - labelBBox.height;\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  },\n  _getLabelPosition: function () {\n    return \"outside\";\n  },\n  _getCoords: function (argument, value) {\n    var axis = this.series.getValueAxis();\n    var startAngle = axis.getAngles()[0];\n\n    var angle = this._getArgTranslator().translate(argument);\n\n    var radius = this._getValTranslator().translate(value);\n\n    var coords = convertPolarToXY(axis.getCenter(), axis.getAngles()[0], angle, radius);\n    coords.angle = angle + startAngle - 90, coords.radius = radius;\n    return coords;\n  },\n\n  _translate() {\n    var center = this.series.getValueAxis().getCenter();\n\n    var coord = this._getCoords(this.argument, this.value);\n\n    var translator = this._getValTranslator();\n\n    var maxRadius = translator.isInverted() ? translator.translate(CANVAS_POSITION_START) : translator.translate(CANVAS_POSITION_END);\n    var normalizedRadius = isDefined(coord.radius) && coord.radius >= 0 ? coord.radius : null;\n    this.vx = normalizeAngle(coord.angle);\n    this.vy = this.radiusOuter = this.radiusLabels = normalizedRadius;\n    this.radiusLabels += RADIAL_LABEL_INDENT;\n    this.radius = normalizedRadius;\n    this.middleAngle = -coord.angle;\n    this.angle = -coord.angle;\n    this.x = coord.x;\n    this.y = coord.y;\n    this.defaultX = this.centerX = center.x;\n    this.defaultY = this.centerY = center.y;\n\n    this._translateErrorBars();\n\n    this.inVisibleArea = this._checkRadiusForVisibleArea(normalizedRadius, maxRadius);\n  },\n\n  _checkRadiusForVisibleArea: (radius, maxRadius) => isDefined(radius) && radius <= maxRadius,\n  _translateErrorBars: function () {\n    var errorBars = this._options.errorBars;\n\n    var translator = this._getValTranslator();\n\n    if (!errorBars) {\n      return;\n    }\n\n    isDefined(this.lowError) && (this._lowErrorCoord = this.centerY - translator.translate(this.lowError));\n    isDefined(this.highError) && (this._highErrorCoord = this.centerY - translator.translate(this.highError));\n    this._errorBarPos = this.centerX;\n    this._baseErrorBarPos = \"stdDeviation\" === errorBars.type ? this._lowErrorCoord + (this._highErrorCoord - this._lowErrorCoord) / 2 : this.centerY - this.radius;\n  },\n  _getTranslates: function (animationEnabled) {\n    return animationEnabled ? this.getDefaultCoords() : {\n      x: this.x,\n      y: this.y\n    };\n  },\n  getDefaultCoords: function () {\n    var cosSin = getCosAndSin(-this.angle);\n\n    var radius = this._getValTranslator().translate(CANVAS_POSITION_DEFAULT);\n\n    var x = this.defaultX + radius * cosSin.cos;\n    var y = this.defaultY + radius * cosSin.sin;\n    return {\n      x: x,\n      y: y\n    };\n  },\n  _addLabelAlignmentAndOffset: function (label, coord) {\n    return coord;\n  },\n  _checkLabelPosition: function (label, coord) {\n    var visibleArea = this._getVisibleArea();\n\n    var graphicBBox = this._getGraphicBBox();\n\n    if (this._isPointInVisibleArea(visibleArea, graphicBBox)) {\n      coord = this._moveLabelOnCanvas(coord, visibleArea, label.getBoundingRect());\n    }\n\n    return coord;\n  },\n  _getErrorBarSettings: function (errorBarOptions, animationEnabled) {\n    var settings = symbolPoint._getErrorBarSettings.call(this, errorBarOptions, animationEnabled);\n\n    settings.rotate = ERROR_BARS_ANGLE_OFFSET - this.angle;\n    settings.rotateX = this.centerX;\n    settings.rotateY = this.centerY;\n    return settings;\n  },\n  getCoords: function (min) {\n    return min ? this.getDefaultCoords() : {\n      x: this.x,\n      y: this.y\n    };\n  }\n});\nexport var polarBarPoint = _extend({}, barPoint, {\n  _translateErrorBars: polarSymbolPoint._translateErrorBars,\n  _getErrorBarSettings: polarSymbolPoint._getErrorBarSettings,\n  _moveLabelOnCanvas: polarSymbolPoint._moveLabelOnCanvas,\n  _getLabelCoords: piePoint._getLabelCoords,\n  _getElementCoords: piePoint._getElementCoords,\n  _getLabelConnector: piePoint._getLabelConnector,\n  getTooltipParams: piePoint.getTooltipParams,\n  _getLabelPosition: piePoint._getLabelPosition,\n  _getCoords: polarSymbolPoint._getCoords,\n\n  _translate() {\n    var translator = this._getValTranslator();\n\n    var businessRange = translator.getBusinessRange();\n    var maxRadius = translator.isInverted() ? translator.translate(CANVAS_POSITION_START) : translator.translate(CANVAS_POSITION_END);\n    this.radiusInner = translator.translate(this.minValue);\n\n    polarSymbolPoint._translate.call(this);\n\n    if (null === this.radiusInner) {\n      this.radiusInner = this.radius = maxRadius;\n    } else if (null === this.radius) {\n      this.radius = this.value >= businessRange.minVisible ? maxRadius : 0;\n    } else if (this.radius > maxRadius) {\n      this.radius = maxRadius;\n    }\n\n    this.radiusOuter = this.radiusLabels = _max(this.radiusInner, this.radius);\n    this.radiusLabels += RADIAL_LABEL_INDENT;\n    this.radiusInner = this.defaultRadius = _math.min(this.radiusInner, this.radius);\n    this.middleAngle = this.angle = -normalizeAngle(this.middleAngleCorrection - this.angle);\n  },\n\n  _checkRadiusForVisibleArea(radius) {\n    return isDefined(radius) || this._getValTranslator().translate(this.minValue) > 0;\n  },\n\n  _getErrorBarBaseEdgeLength() {\n    var coord = this.getMarkerCoords();\n    return _math.PI * coord.outerRadius * _math.abs(coord.startAngle - coord.endAngle) / 180;\n  },\n\n  getMarkerCoords: function () {\n    return {\n      x: this.centerX,\n      y: this.centerY,\n      outerRadius: this.radiusOuter,\n      innerRadius: this.defaultRadius,\n      startAngle: this.middleAngle - this.interval / 2,\n      endAngle: this.middleAngle + this.interval / 2\n    };\n  },\n  _drawMarker: function (renderer, group, animationEnabled) {\n    var styles = this._getStyle();\n\n    var coords = this.getMarkerCoords();\n    var innerRadius = coords.innerRadius;\n    var outerRadius = coords.outerRadius;\n\n    var start = this._getCoords(this.argument, CANVAS_POSITION_DEFAULT);\n\n    var x = coords.x;\n    var y = coords.y;\n\n    if (animationEnabled) {\n      innerRadius = 0;\n      outerRadius = 0;\n      x = start.x;\n      y = start.y;\n    }\n\n    this.graphic = renderer.arc(x, y, innerRadius, outerRadius, coords.startAngle, coords.endAngle).attr(styles).data({\n      \"chart-data-point\": this\n    }).append(group);\n  },\n  _checkLabelPosition: function (label, coord) {\n    var visibleArea = this._getVisibleArea();\n\n    var angleFunctions = getCosAndSin(this.middleAngle);\n    var x = this.centerX + this.defaultRadius * angleFunctions.cos;\n    var y = this.centerY - this.defaultRadius * angleFunctions.sin;\n\n    if (x > visibleArea.minX && x < visibleArea.maxX && y > visibleArea.minY && y < visibleArea.maxY) {\n      coord = this._moveLabelOnCanvas(coord, visibleArea, label.getBoundingRect());\n    }\n\n    return coord;\n  },\n  _addLabelAlignmentAndOffset: function (label, coord) {\n    return coord;\n  },\n  correctCoordinates: function (correctOptions) {\n    this.middleAngleCorrection = correctOptions.offset;\n    this.interval = correctOptions.width;\n  },\n  coordsIn: function (x, y) {\n    var val = convertXYToPolar(this.series.getValueAxis().getCenter(), x, y);\n    var coords = this.getMarkerCoords();\n    var isBetweenAngles = coords.startAngle < coords.endAngle ? -val.phi >= coords.startAngle && -val.phi <= coords.endAngle : -val.phi <= coords.startAngle && -val.phi >= coords.endAngle;\n    return val.r >= coords.innerRadius && val.r <= coords.outerRadius && isBetweenAngles;\n  }\n});","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/viz/series/points/polar_point.js"],"names":["extend","_extend","symbolPoint","barPoint","piePoint","isDefined","normalizeAngle","convertPolarToXY","getCosAndSin","convertXYToPolar","_math","Math","_max","max","consts","RADIAL_LABEL_INDENT","radialLabelIndent","ERROR_BARS_ANGLE_OFFSET","CANVAS_POSITION_START","CANVAS_POSITION_END","CANVAS_POSITION_DEFAULT","polarSymbolPoint","_getLabelCoords","_getElementCoords","_moveLabelOnCanvas","coord","visibleArea","labelBBox","x","y","minX","maxX","width","minY","maxY","height","_getLabelPosition","_getCoords","argument","value","axis","series","getValueAxis","startAngle","getAngles","angle","_getArgTranslator","translate","radius","_getValTranslator","coords","getCenter","_translate","center","translator","maxRadius","isInverted","normalizedRadius","vx","vy","radiusOuter","radiusLabels","middleAngle","defaultX","centerX","defaultY","centerY","_translateErrorBars","inVisibleArea","_checkRadiusForVisibleArea","errorBars","_options","lowError","_lowErrorCoord","highError","_highErrorCoord","_errorBarPos","_baseErrorBarPos","type","_getTranslates","animationEnabled","getDefaultCoords","cosSin","cos","sin","_addLabelAlignmentAndOffset","label","_checkLabelPosition","_getVisibleArea","graphicBBox","_getGraphicBBox","_isPointInVisibleArea","getBoundingRect","_getErrorBarSettings","errorBarOptions","settings","call","rotate","rotateX","rotateY","getCoords","min","polarBarPoint","_getLabelConnector","getTooltipParams","businessRange","getBusinessRange","radiusInner","minValue","minVisible","defaultRadius","middleAngleCorrection","_getErrorBarBaseEdgeLength","getMarkerCoords","PI","outerRadius","abs","endAngle","innerRadius","interval","_drawMarker","renderer","group","styles","_getStyle","start","graphic","arc","attr","data","append","angleFunctions","correctCoordinates","correctOptions","offset","coordsIn","val","isBetweenAngles","phi","r"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/series/points/polar_point.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nvar _extend = extend;\r\nimport symbolPoint from \"./symbol_point\";\r\nimport barPoint from \"./bar_point\";\r\nimport piePoint from \"./pie_point\";\r\nimport {\r\n    isDefined\r\n} from \"../../../core/utils/type\";\r\nimport {\r\n    normalizeAngle,\r\n    convertPolarToXY,\r\n    getCosAndSin,\r\n    convertXYToPolar\r\n} from \"../../core/utils\";\r\nvar _math = Math;\r\nvar _max = _math.max;\r\nimport consts from \"../../components/consts\";\r\nvar RADIAL_LABEL_INDENT = consts.radialLabelIndent;\r\nvar ERROR_BARS_ANGLE_OFFSET = 90;\r\nvar CANVAS_POSITION_START = \"canvas_position_start\";\r\nvar CANVAS_POSITION_END = \"canvas_position_end\";\r\nvar CANVAS_POSITION_DEFAULT = \"canvas_position_default\";\r\nexport var polarSymbolPoint = _extend({}, symbolPoint, {\r\n    _getLabelCoords: piePoint._getLabelCoords,\r\n    _getElementCoords: piePoint._getElementCoords,\r\n    _moveLabelOnCanvas: function(coord, visibleArea, labelBBox) {\r\n        var x = coord.x;\r\n        var y = coord.y;\r\n        if (visibleArea.minX > x) {\r\n            x = visibleArea.minX\r\n        }\r\n        if (visibleArea.maxX < x + labelBBox.width) {\r\n            x = visibleArea.maxX - labelBBox.width\r\n        }\r\n        if (visibleArea.minY > y) {\r\n            y = visibleArea.minY\r\n        }\r\n        if (visibleArea.maxY < y + labelBBox.height) {\r\n            y = visibleArea.maxY - labelBBox.height\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    },\r\n    _getLabelPosition: function() {\r\n        return \"outside\"\r\n    },\r\n    _getCoords: function(argument, value) {\r\n        var axis = this.series.getValueAxis();\r\n        var startAngle = axis.getAngles()[0];\r\n        var angle = this._getArgTranslator().translate(argument);\r\n        var radius = this._getValTranslator().translate(value);\r\n        var coords = convertPolarToXY(axis.getCenter(), axis.getAngles()[0], angle, radius);\r\n        coords.angle = angle + startAngle - 90, coords.radius = radius;\r\n        return coords\r\n    },\r\n    _translate() {\r\n        var center = this.series.getValueAxis().getCenter();\r\n        var coord = this._getCoords(this.argument, this.value);\r\n        var translator = this._getValTranslator();\r\n        var maxRadius = translator.isInverted() ? translator.translate(CANVAS_POSITION_START) : translator.translate(CANVAS_POSITION_END);\r\n        var normalizedRadius = isDefined(coord.radius) && coord.radius >= 0 ? coord.radius : null;\r\n        this.vx = normalizeAngle(coord.angle);\r\n        this.vy = this.radiusOuter = this.radiusLabels = normalizedRadius;\r\n        this.radiusLabels += RADIAL_LABEL_INDENT;\r\n        this.radius = normalizedRadius;\r\n        this.middleAngle = -coord.angle;\r\n        this.angle = -coord.angle;\r\n        this.x = coord.x;\r\n        this.y = coord.y;\r\n        this.defaultX = this.centerX = center.x;\r\n        this.defaultY = this.centerY = center.y;\r\n        this._translateErrorBars();\r\n        this.inVisibleArea = this._checkRadiusForVisibleArea(normalizedRadius, maxRadius)\r\n    },\r\n    _checkRadiusForVisibleArea: (radius, maxRadius) => isDefined(radius) && radius <= maxRadius,\r\n    _translateErrorBars: function() {\r\n        var errorBars = this._options.errorBars;\r\n        var translator = this._getValTranslator();\r\n        if (!errorBars) {\r\n            return\r\n        }\r\n        isDefined(this.lowError) && (this._lowErrorCoord = this.centerY - translator.translate(this.lowError));\r\n        isDefined(this.highError) && (this._highErrorCoord = this.centerY - translator.translate(this.highError));\r\n        this._errorBarPos = this.centerX;\r\n        this._baseErrorBarPos = \"stdDeviation\" === errorBars.type ? this._lowErrorCoord + (this._highErrorCoord - this._lowErrorCoord) / 2 : this.centerY - this.radius\r\n    },\r\n    _getTranslates: function(animationEnabled) {\r\n        return animationEnabled ? this.getDefaultCoords() : {\r\n            x: this.x,\r\n            y: this.y\r\n        }\r\n    },\r\n    getDefaultCoords: function() {\r\n        var cosSin = getCosAndSin(-this.angle);\r\n        var radius = this._getValTranslator().translate(CANVAS_POSITION_DEFAULT);\r\n        var x = this.defaultX + radius * cosSin.cos;\r\n        var y = this.defaultY + radius * cosSin.sin;\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    },\r\n    _addLabelAlignmentAndOffset: function(label, coord) {\r\n        return coord\r\n    },\r\n    _checkLabelPosition: function(label, coord) {\r\n        var visibleArea = this._getVisibleArea();\r\n        var graphicBBox = this._getGraphicBBox();\r\n        if (this._isPointInVisibleArea(visibleArea, graphicBBox)) {\r\n            coord = this._moveLabelOnCanvas(coord, visibleArea, label.getBoundingRect())\r\n        }\r\n        return coord\r\n    },\r\n    _getErrorBarSettings: function(errorBarOptions, animationEnabled) {\r\n        var settings = symbolPoint._getErrorBarSettings.call(this, errorBarOptions, animationEnabled);\r\n        settings.rotate = ERROR_BARS_ANGLE_OFFSET - this.angle;\r\n        settings.rotateX = this.centerX;\r\n        settings.rotateY = this.centerY;\r\n        return settings\r\n    },\r\n    getCoords: function(min) {\r\n        return min ? this.getDefaultCoords() : {\r\n            x: this.x,\r\n            y: this.y\r\n        }\r\n    }\r\n});\r\nexport var polarBarPoint = _extend({}, barPoint, {\r\n    _translateErrorBars: polarSymbolPoint._translateErrorBars,\r\n    _getErrorBarSettings: polarSymbolPoint._getErrorBarSettings,\r\n    _moveLabelOnCanvas: polarSymbolPoint._moveLabelOnCanvas,\r\n    _getLabelCoords: piePoint._getLabelCoords,\r\n    _getElementCoords: piePoint._getElementCoords,\r\n    _getLabelConnector: piePoint._getLabelConnector,\r\n    getTooltipParams: piePoint.getTooltipParams,\r\n    _getLabelPosition: piePoint._getLabelPosition,\r\n    _getCoords: polarSymbolPoint._getCoords,\r\n    _translate() {\r\n        var translator = this._getValTranslator();\r\n        var businessRange = translator.getBusinessRange();\r\n        var maxRadius = translator.isInverted() ? translator.translate(CANVAS_POSITION_START) : translator.translate(CANVAS_POSITION_END);\r\n        this.radiusInner = translator.translate(this.minValue);\r\n        polarSymbolPoint._translate.call(this);\r\n        if (null === this.radiusInner) {\r\n            this.radiusInner = this.radius = maxRadius\r\n        } else if (null === this.radius) {\r\n            this.radius = this.value >= businessRange.minVisible ? maxRadius : 0\r\n        } else if (this.radius > maxRadius) {\r\n            this.radius = maxRadius\r\n        }\r\n        this.radiusOuter = this.radiusLabels = _max(this.radiusInner, this.radius);\r\n        this.radiusLabels += RADIAL_LABEL_INDENT;\r\n        this.radiusInner = this.defaultRadius = _math.min(this.radiusInner, this.radius);\r\n        this.middleAngle = this.angle = -normalizeAngle(this.middleAngleCorrection - this.angle)\r\n    },\r\n    _checkRadiusForVisibleArea(radius) {\r\n        return isDefined(radius) || this._getValTranslator().translate(this.minValue) > 0\r\n    },\r\n    _getErrorBarBaseEdgeLength() {\r\n        var coord = this.getMarkerCoords();\r\n        return _math.PI * coord.outerRadius * _math.abs(coord.startAngle - coord.endAngle) / 180\r\n    },\r\n    getMarkerCoords: function() {\r\n        return {\r\n            x: this.centerX,\r\n            y: this.centerY,\r\n            outerRadius: this.radiusOuter,\r\n            innerRadius: this.defaultRadius,\r\n            startAngle: this.middleAngle - this.interval / 2,\r\n            endAngle: this.middleAngle + this.interval / 2\r\n        }\r\n    },\r\n    _drawMarker: function(renderer, group, animationEnabled) {\r\n        var styles = this._getStyle();\r\n        var coords = this.getMarkerCoords();\r\n        var innerRadius = coords.innerRadius;\r\n        var outerRadius = coords.outerRadius;\r\n        var start = this._getCoords(this.argument, CANVAS_POSITION_DEFAULT);\r\n        var x = coords.x;\r\n        var y = coords.y;\r\n        if (animationEnabled) {\r\n            innerRadius = 0;\r\n            outerRadius = 0;\r\n            x = start.x;\r\n            y = start.y\r\n        }\r\n        this.graphic = renderer.arc(x, y, innerRadius, outerRadius, coords.startAngle, coords.endAngle).attr(styles).data({\r\n            \"chart-data-point\": this\r\n        }).append(group)\r\n    },\r\n    _checkLabelPosition: function(label, coord) {\r\n        var visibleArea = this._getVisibleArea();\r\n        var angleFunctions = getCosAndSin(this.middleAngle);\r\n        var x = this.centerX + this.defaultRadius * angleFunctions.cos;\r\n        var y = this.centerY - this.defaultRadius * angleFunctions.sin;\r\n        if (x > visibleArea.minX && x < visibleArea.maxX && y > visibleArea.minY && y < visibleArea.maxY) {\r\n            coord = this._moveLabelOnCanvas(coord, visibleArea, label.getBoundingRect())\r\n        }\r\n        return coord\r\n    },\r\n    _addLabelAlignmentAndOffset: function(label, coord) {\r\n        return coord\r\n    },\r\n    correctCoordinates: function(correctOptions) {\r\n        this.middleAngleCorrection = correctOptions.offset;\r\n        this.interval = correctOptions.width\r\n    },\r\n    coordsIn: function(x, y) {\r\n        var val = convertXYToPolar(this.series.getValueAxis().getCenter(), x, y);\r\n        var coords = this.getMarkerCoords();\r\n        var isBetweenAngles = coords.startAngle < coords.endAngle ? -val.phi >= coords.startAngle && -val.phi <= coords.endAngle : -val.phi <= coords.startAngle && -val.phi >= coords.endAngle;\r\n        return val.r >= coords.innerRadius && val.r <= coords.outerRadius && isBetweenAngles\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}