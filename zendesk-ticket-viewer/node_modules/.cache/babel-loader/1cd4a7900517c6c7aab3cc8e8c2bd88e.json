{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/series/bar_series.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport * as scatterSeries from \"./scatter_series\";\nimport { chart as areaChart } from \"./area_series\";\nvar areaSeries = areaChart.area;\nimport { convertPolarToXY } from \"../core/utils\";\nvar chartSeries = scatterSeries.chart;\nvar polarSeries = scatterSeries.polar;\nimport { isDefined as _isDefined } from \"../../core/utils/type\";\nvar _extend = extend;\nvar _each = each;\nvar chart = {};\nvar polar = {};\nvar baseBarSeriesMethods = {\n  _createLegendState: function (styleOptions, defaultColor) {\n    return {\n      fill: styleOptions.color || defaultColor,\n      hatching: styleOptions.hatching\n    };\n  },\n  _parsePointStyle: function (style, defaultColor, defaultBorderColor) {\n    var color = style.color || defaultColor;\n\n    var base = chartSeries._parsePointStyle.call(this, style, color, defaultBorderColor);\n\n    base.fill = color;\n    base.hatching = style.hatching;\n    base.dashStyle = style.border && style.border.dashStyle || \"solid\";\n    delete base.r;\n    return base;\n  },\n  _applyMarkerClipRect: function (settings) {\n    settings[\"clip-path\"] = null;\n  },\n  _setGroupsSettings: function (animationEnabled, firstDrawing) {\n    var that = this;\n    var settings = {};\n\n    chartSeries._setGroupsSettings.apply(that, arguments);\n\n    if (animationEnabled && firstDrawing) {\n      settings = this._getAffineCoordOptions();\n    } else if (!animationEnabled) {\n      settings = {\n        scaleX: 1,\n        scaleY: 1,\n        translateX: 0,\n        translateY: 0\n      };\n    }\n\n    that._markersGroup.attr(settings);\n  },\n  _drawPoint: function (options) {\n    options.hasAnimation = options.hasAnimation && !options.firstDrawing;\n    options.firstDrawing = false;\n\n    chartSeries._drawPoint.call(this, options);\n  },\n  _getMainColor: function () {\n    return this._options.mainSeriesColor;\n  },\n  _createPointStyles: function (pointOptions) {\n    var mainColor = pointOptions.color || this._getMainColor();\n\n    return {\n      normal: this._parsePointStyle(pointOptions, mainColor, mainColor),\n      hover: this._parsePointStyle(pointOptions.hoverStyle || {}, mainColor, mainColor),\n      selection: this._parsePointStyle(pointOptions.selectionStyle || {}, mainColor, mainColor)\n    };\n  },\n  _updatePointsVisibility: function () {\n    var visibility = this._options.visible;\n    each(this._points, function (_, point) {\n      point._options.visible = visibility;\n    });\n  },\n  _getOptionsForPoint: function () {\n    return this._options;\n  },\n  _animate: function (firstDrawing) {\n    var that = this;\n\n    that._animatePoints(firstDrawing, function () {\n      that._animateComplete();\n    }, function (drawnPoints, complete) {\n      var lastPointIndex = drawnPoints.length - 1;\n\n      _each(drawnPoints || [], function (i, point) {\n        point.animate(i === lastPointIndex ? complete : void 0, point.getMarkerCoords());\n      });\n    });\n  },\n  getValueRangeInitialValue: areaSeries.getValueRangeInitialValue,\n  _patchMarginOptions: function (options) {\n    options.checkInterval = !this.useAggregation();\n    return options;\n  },\n  _defaultAggregator: \"sum\",\n\n  _defineDrawingState() {},\n\n  usePointsToDefineAutoHiding: () => false\n};\nchart.bar = _extend({}, chartSeries, baseBarSeriesMethods, {\n  _getAffineCoordOptions: function () {\n    var rotated = this._options.rotated;\n    var direction = rotated ? \"X\" : \"Y\";\n    var settings = {\n      scaleX: rotated ? .001 : 1,\n      scaleY: rotated ? 1 : .001\n    };\n    settings[\"translate\" + direction] = this.getValueAxis().getTranslator().translate(\"canvas_position_default\");\n    return settings;\n  },\n  _animatePoints: function (firstDrawing, complete, animateFunc) {\n    this._markersGroup.animate({\n      scaleX: 1,\n      scaleY: 1,\n      translateY: 0,\n      translateX: 0\n    }, void 0, complete);\n\n    if (!firstDrawing) {\n      animateFunc(this._drawnPoints, complete);\n    }\n  },\n\n  checkSeriesViewportCoord(axis, coord) {\n    if (!chartSeries.checkSeriesViewportCoord.call(this)) {\n      return false;\n    }\n\n    if (axis.isArgumentAxis) {\n      return true;\n    }\n\n    var translator = axis.getTranslator();\n    var range = this.getViewport();\n    var min = translator.translate(range.categories ? range.categories[0] : range.min);\n    var max = translator.translate(range.categories ? range.categories[range.categories.length - 1] : range.max);\n    var rotated = this.getOptions().rotated;\n    var inverted = axis.getOptions().inverted;\n    return rotated && !inverted || !rotated && inverted ? coord >= min && coord <= max : coord >= max && coord <= min;\n  },\n\n  getSeriesPairCoord(coord, isArgument) {\n    var oppositeCoord = null;\n    var {\n      rotated: rotated\n    } = this._options;\n    var isOpposite = !isArgument && !rotated || isArgument && rotated;\n    var coordName = isOpposite ? \"vy\" : \"vx\";\n    var oppositeCoordName = isOpposite ? \"vx\" : \"vy\";\n    var points = this.getPoints();\n\n    for (var i = 0; i < points.length; i++) {\n      var p = points[i];\n      var tmpCoord = void 0;\n\n      if (isArgument) {\n        tmpCoord = p.getCenterCoord()[coordName[1]] === coord ? p[oppositeCoordName] : void 0;\n      } else {\n        tmpCoord = p[coordName] === coord ? p[oppositeCoordName] : void 0;\n      }\n\n      if (this._checkAxisVisibleAreaCoord(!isArgument, tmpCoord)) {\n        oppositeCoord = tmpCoord;\n        break;\n      }\n    }\n\n    return oppositeCoord;\n  }\n\n});\npolar.bar = _extend({}, polarSeries, baseBarSeriesMethods, {\n  _animatePoints: function (firstDrawing, complete, animateFunc) {\n    animateFunc(this._drawnPoints, complete);\n  },\n  _setGroupsSettings: chartSeries._setGroupsSettings,\n  _drawPoint: function (point, groups, animationEnabled) {\n    chartSeries._drawPoint.call(this, point, groups, animationEnabled);\n  },\n  _parsePointStyle: function (style) {\n    var base = baseBarSeriesMethods._parsePointStyle.apply(this, arguments);\n\n    base.opacity = style.opacity;\n    return base;\n  },\n  _createGroups: chartSeries._createGroups,\n  _setMarkerGroupSettings: function () {\n    var markersSettings = this._createPointStyles(this._getMarkerGroupOptions()).normal;\n\n    markersSettings.class = \"dxc-markers\";\n\n    this._applyMarkerClipRect(markersSettings);\n\n    var groupSettings = _extend({}, markersSettings);\n\n    delete groupSettings.opacity;\n\n    this._markersGroup.attr(groupSettings);\n  },\n\n  getSeriesPairCoord(params, isArgument) {\n    var coords = null;\n    var paramName = isArgument ? \"argument\" : \"radius\";\n    var points = this.getVisiblePoints();\n    var argAxis = this.getArgumentAxis();\n    var startAngle = argAxis.getAngles()[0];\n\n    for (var i = 0; i < points.length; i++) {\n      var p = points[i];\n      var tmpPoint = _isDefined(p[paramName]) && _isDefined(params[paramName]) && p[paramName].valueOf() === params[paramName].valueOf() ? convertPolarToXY(argAxis.getCenter(), startAngle, -argAxis.getTranslatedAngle(p.angle), p.radius) : void 0;\n\n      if (_isDefined(tmpPoint)) {\n        coords = tmpPoint;\n        break;\n      }\n    }\n\n    return coords;\n  },\n\n  _createLegendState: areaSeries._createLegendState\n});\nexport { chart, polar };","map":{"version":3,"sources":["/Users/rahulsharma/node_modules/devextreme/esm/viz/series/bar_series.js"],"names":["extend","each","scatterSeries","chart","areaChart","areaSeries","area","convertPolarToXY","chartSeries","polarSeries","polar","isDefined","_isDefined","_extend","_each","baseBarSeriesMethods","_createLegendState","styleOptions","defaultColor","fill","color","hatching","_parsePointStyle","style","defaultBorderColor","base","call","dashStyle","border","r","_applyMarkerClipRect","settings","_setGroupsSettings","animationEnabled","firstDrawing","that","apply","arguments","_getAffineCoordOptions","scaleX","scaleY","translateX","translateY","_markersGroup","attr","_drawPoint","options","hasAnimation","_getMainColor","_options","mainSeriesColor","_createPointStyles","pointOptions","mainColor","normal","hover","hoverStyle","selection","selectionStyle","_updatePointsVisibility","visibility","visible","_points","_","point","_getOptionsForPoint","_animate","_animatePoints","_animateComplete","drawnPoints","complete","lastPointIndex","length","i","animate","getMarkerCoords","getValueRangeInitialValue","_patchMarginOptions","checkInterval","useAggregation","_defaultAggregator","_defineDrawingState","usePointsToDefineAutoHiding","bar","rotated","direction","getValueAxis","getTranslator","translate","animateFunc","_drawnPoints","checkSeriesViewportCoord","axis","coord","isArgumentAxis","translator","range","getViewport","min","categories","max","getOptions","inverted","getSeriesPairCoord","isArgument","oppositeCoord","isOpposite","coordName","oppositeCoordName","points","getPoints","p","tmpCoord","getCenterCoord","_checkAxisVisibleAreaCoord","groups","opacity","_createGroups","_setMarkerGroupSettings","markersSettings","_getMarkerGroupOptions","class","groupSettings","params","coords","paramName","getVisiblePoints","argAxis","getArgumentAxis","startAngle","getAngles","tmpPoint","valueOf","getCenter","getTranslatedAngle","angle","radius"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/series/bar_series.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport * as scatterSeries from \"./scatter_series\";\r\nimport {\r\n    chart as areaChart\r\n} from \"./area_series\";\r\nvar areaSeries = areaChart.area;\r\nimport {\r\n    convertPolarToXY\r\n} from \"../core/utils\";\r\nvar chartSeries = scatterSeries.chart;\r\nvar polarSeries = scatterSeries.polar;\r\nimport {\r\n    isDefined as _isDefined\r\n} from \"../../core/utils/type\";\r\nvar _extend = extend;\r\nvar _each = each;\r\nvar chart = {};\r\nvar polar = {};\r\nvar baseBarSeriesMethods = {\r\n    _createLegendState: function(styleOptions, defaultColor) {\r\n        return {\r\n            fill: styleOptions.color || defaultColor,\r\n            hatching: styleOptions.hatching\r\n        }\r\n    },\r\n    _parsePointStyle: function(style, defaultColor, defaultBorderColor) {\r\n        var color = style.color || defaultColor;\r\n        var base = chartSeries._parsePointStyle.call(this, style, color, defaultBorderColor);\r\n        base.fill = color;\r\n        base.hatching = style.hatching;\r\n        base.dashStyle = style.border && style.border.dashStyle || \"solid\";\r\n        delete base.r;\r\n        return base\r\n    },\r\n    _applyMarkerClipRect: function(settings) {\r\n        settings[\"clip-path\"] = null\r\n    },\r\n    _setGroupsSettings: function(animationEnabled, firstDrawing) {\r\n        var that = this;\r\n        var settings = {};\r\n        chartSeries._setGroupsSettings.apply(that, arguments);\r\n        if (animationEnabled && firstDrawing) {\r\n            settings = this._getAffineCoordOptions()\r\n        } else if (!animationEnabled) {\r\n            settings = {\r\n                scaleX: 1,\r\n                scaleY: 1,\r\n                translateX: 0,\r\n                translateY: 0\r\n            }\r\n        }\r\n        that._markersGroup.attr(settings)\r\n    },\r\n    _drawPoint: function(options) {\r\n        options.hasAnimation = options.hasAnimation && !options.firstDrawing;\r\n        options.firstDrawing = false;\r\n        chartSeries._drawPoint.call(this, options)\r\n    },\r\n    _getMainColor: function() {\r\n        return this._options.mainSeriesColor\r\n    },\r\n    _createPointStyles: function(pointOptions) {\r\n        var mainColor = pointOptions.color || this._getMainColor();\r\n        return {\r\n            normal: this._parsePointStyle(pointOptions, mainColor, mainColor),\r\n            hover: this._parsePointStyle(pointOptions.hoverStyle || {}, mainColor, mainColor),\r\n            selection: this._parsePointStyle(pointOptions.selectionStyle || {}, mainColor, mainColor)\r\n        }\r\n    },\r\n    _updatePointsVisibility: function() {\r\n        var visibility = this._options.visible;\r\n        each(this._points, (function(_, point) {\r\n            point._options.visible = visibility\r\n        }))\r\n    },\r\n    _getOptionsForPoint: function() {\r\n        return this._options\r\n    },\r\n    _animate: function(firstDrawing) {\r\n        var that = this;\r\n        that._animatePoints(firstDrawing, (function() {\r\n            that._animateComplete()\r\n        }), (function(drawnPoints, complete) {\r\n            var lastPointIndex = drawnPoints.length - 1;\r\n            _each(drawnPoints || [], (function(i, point) {\r\n                point.animate(i === lastPointIndex ? complete : void 0, point.getMarkerCoords())\r\n            }))\r\n        }))\r\n    },\r\n    getValueRangeInitialValue: areaSeries.getValueRangeInitialValue,\r\n    _patchMarginOptions: function(options) {\r\n        options.checkInterval = !this.useAggregation();\r\n        return options\r\n    },\r\n    _defaultAggregator: \"sum\",\r\n    _defineDrawingState() {},\r\n    usePointsToDefineAutoHiding: () => false\r\n};\r\nchart.bar = _extend({}, chartSeries, baseBarSeriesMethods, {\r\n    _getAffineCoordOptions: function() {\r\n        var rotated = this._options.rotated;\r\n        var direction = rotated ? \"X\" : \"Y\";\r\n        var settings = {\r\n            scaleX: rotated ? .001 : 1,\r\n            scaleY: rotated ? 1 : .001\r\n        };\r\n        settings[\"translate\" + direction] = this.getValueAxis().getTranslator().translate(\"canvas_position_default\");\r\n        return settings\r\n    },\r\n    _animatePoints: function(firstDrawing, complete, animateFunc) {\r\n        this._markersGroup.animate({\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            translateY: 0,\r\n            translateX: 0\r\n        }, void 0, complete);\r\n        if (!firstDrawing) {\r\n            animateFunc(this._drawnPoints, complete)\r\n        }\r\n    },\r\n    checkSeriesViewportCoord(axis, coord) {\r\n        if (!chartSeries.checkSeriesViewportCoord.call(this)) {\r\n            return false\r\n        }\r\n        if (axis.isArgumentAxis) {\r\n            return true\r\n        }\r\n        var translator = axis.getTranslator();\r\n        var range = this.getViewport();\r\n        var min = translator.translate(range.categories ? range.categories[0] : range.min);\r\n        var max = translator.translate(range.categories ? range.categories[range.categories.length - 1] : range.max);\r\n        var rotated = this.getOptions().rotated;\r\n        var inverted = axis.getOptions().inverted;\r\n        return rotated && !inverted || !rotated && inverted ? coord >= min && coord <= max : coord >= max && coord <= min\r\n    },\r\n    getSeriesPairCoord(coord, isArgument) {\r\n        var oppositeCoord = null;\r\n        var {\r\n            rotated: rotated\r\n        } = this._options;\r\n        var isOpposite = !isArgument && !rotated || isArgument && rotated;\r\n        var coordName = isOpposite ? \"vy\" : \"vx\";\r\n        var oppositeCoordName = isOpposite ? \"vx\" : \"vy\";\r\n        var points = this.getPoints();\r\n        for (var i = 0; i < points.length; i++) {\r\n            var p = points[i];\r\n            var tmpCoord = void 0;\r\n            if (isArgument) {\r\n                tmpCoord = p.getCenterCoord()[coordName[1]] === coord ? p[oppositeCoordName] : void 0\r\n            } else {\r\n                tmpCoord = p[coordName] === coord ? p[oppositeCoordName] : void 0\r\n            }\r\n            if (this._checkAxisVisibleAreaCoord(!isArgument, tmpCoord)) {\r\n                oppositeCoord = tmpCoord;\r\n                break\r\n            }\r\n        }\r\n        return oppositeCoord\r\n    }\r\n});\r\npolar.bar = _extend({}, polarSeries, baseBarSeriesMethods, {\r\n    _animatePoints: function(firstDrawing, complete, animateFunc) {\r\n        animateFunc(this._drawnPoints, complete)\r\n    },\r\n    _setGroupsSettings: chartSeries._setGroupsSettings,\r\n    _drawPoint: function(point, groups, animationEnabled) {\r\n        chartSeries._drawPoint.call(this, point, groups, animationEnabled)\r\n    },\r\n    _parsePointStyle: function(style) {\r\n        var base = baseBarSeriesMethods._parsePointStyle.apply(this, arguments);\r\n        base.opacity = style.opacity;\r\n        return base\r\n    },\r\n    _createGroups: chartSeries._createGroups,\r\n    _setMarkerGroupSettings: function() {\r\n        var markersSettings = this._createPointStyles(this._getMarkerGroupOptions()).normal;\r\n        markersSettings.class = \"dxc-markers\";\r\n        this._applyMarkerClipRect(markersSettings);\r\n        var groupSettings = _extend({}, markersSettings);\r\n        delete groupSettings.opacity;\r\n        this._markersGroup.attr(groupSettings)\r\n    },\r\n    getSeriesPairCoord(params, isArgument) {\r\n        var coords = null;\r\n        var paramName = isArgument ? \"argument\" : \"radius\";\r\n        var points = this.getVisiblePoints();\r\n        var argAxis = this.getArgumentAxis();\r\n        var startAngle = argAxis.getAngles()[0];\r\n        for (var i = 0; i < points.length; i++) {\r\n            var p = points[i];\r\n            var tmpPoint = _isDefined(p[paramName]) && _isDefined(params[paramName]) && p[paramName].valueOf() === params[paramName].valueOf() ? convertPolarToXY(argAxis.getCenter(), startAngle, -argAxis.getTranslatedAngle(p.angle), p.radius) : void 0;\r\n            if (_isDefined(tmpPoint)) {\r\n                coords = tmpPoint;\r\n                break\r\n            }\r\n        }\r\n        return coords\r\n    },\r\n    _createLegendState: areaSeries._createLegendState\r\n});\r\nexport {\r\n    chart,\r\n    polar\r\n};\r\n"]},"metadata":{},"sourceType":"module"}